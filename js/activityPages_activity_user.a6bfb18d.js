(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"267":function(e,t,n){"use strict";n.d(t,"z",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return u}),n.d(t,"F",function(){return s}),n.d(t,"D",function(){return o}),n.d(t,"s",function(){return l}),n.d(t,"t",function(){return f}),n.d(t,"o",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"B",function(){return d}),n.d(t,"p",function(){return b}),n.d(t,"r",function(){return _}),n.d(t,"x",function(){return v}),n.d(t,"I",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"m",function(){return x}),n.d(t,"N",function(){return w}),n.d(t,"J",function(){return O}),n.d(t,"g",function(){return k}),n.d(t,"v",function(){return E}),n.d(t,"w",function(){return j}),n.d(t,"C",function(){return T}),n.d(t,"l",function(){return N}),n.d(t,"b",function(){return A}),n.d(t,"h",function(){return C}),n.d(t,"M",function(){return S}),n.d(t,"H",function(){return D}),n.d(t,"u",function(){return U}),n.d(t,"j",function(){return G}),n.d(t,"y",function(){return L}),n.d(t,"O",function(){return P}),n.d(t,"S",function(){return R}),n.d(t,"A",function(){return H}),n.d(t,"n",function(){return I}),n.d(t,"P",function(){return M}),n.d(t,"Q",function(){return $}),n.d(t,"a",function(){return q}),n.d(t,"K",function(){return F}),n.d(t,"i",function(){return z}),n.d(t,"E",function(){return Y}),n.d(t,"L",function(){return V}),n.d(t,"G",function(){return J}),n.d(t,"k",function(){return h}),n.d(t,"R",function(){return K}),n.d(t,"q",function(){return B});var r=n(3),a=n(5),c=function loadTeams(e){return r.a.httpGql(a.ac,e,!0)},i=function addTeamAlbum(e){return r.a.post("team_album",e)},u=function changeTeamAlbum(e){var t=e.id;return delete e.id,r.a.put("team_album/"+t,e)},s=function teamAlbumEvalLike(e){var t=e.id;return delete e.id,r.a.put("team_album_eval/isLike/"+t,e)},o=function saveEvalValue(e){return r.a.post("team_album_eval",e)},l=function getTeamAlbum(e){return r.a.httpGql(a.Pb,e,!0)},f=function getTeamAlbumEval(e){return r.a.httpGql(a.Qb,e,!0)},m=function getEvalStatus(e){return r.a.httpGql(a.S,e,!0)},p=function applyUnfrozen(e){return r.a.post("team/applyUnfrozen",e)},d=function recordInfo(e){return r.a.post("record_information",e)},b=function getFillingInfo(e){return r.a.httpGql(a.a,e)},h=function editFillingInfo(e,t){return r.a.put("record_information/"+e,t)},_=function getTeam(e){return r.a.httpGql(a.Nb,e,!0)},v=function joinTeam(e){return r.a.post("team_user",e)},g=function teamLable(e){return r.a.httpGql(a.Ub,e)},y=function addTeamLable(e){return r.a.post("team_lable",e)},x=function eidtTeamLable(e){var t=e.id;return delete e.id,r.a.put("team_lable/"+t,e)},w=function teamUserMsg(e){return r.a.httpGql(a.Xb,e)},O=function teamLableUsers(e){return r.a.httpGql(a.Vb,e)},k=function deleteLableUsers(e){return r.a.delete("team_lable_user/batch",e)},E=function getTeamUsers(e){return r.a.httpGql(a.Yb,e)},j=function joinLableTeam(e){return r.a.post("team_lable_user",e)},T=function removeLableUser(e){return r.a.delete("team_lable_user/"+e.id)},N=function editTeamMsg(e){return r.a.put("team/"+e.id,e)},A=function addTeam(e){return r.a.post("team",e)},C=function deletePic(e){return r.a.delete("file-upload/"+e.id)},S=function teamUserApply(e){return r.a.httpGql(a.mc,e)},D=function teamCyclActivities(e){return r.a.httpGql(a.Tb,e,!0)},U=function getTeamAlbums(e){return r.a.httpGql(a.Sb,e)},G=function disLikeAct(e){return r.a.put("activity_user/"+e.id+"/dislike",e)},L=function likeAct(e){return r.a.put("activity_user/"+e.id+"/like",e)},P=function teamWechatUsers(e){return r.a.httpGql(a.Zb,e,!0)},R=function writtenOffTeam(e){return r.a.put("team/"+e.id+"/writtenOff")},H=function logoutTeam(e){return r.a.delete("team_user",e)},I=function frozenTeam(e){return r.a.put("team/"+e+"/frozen")},M=function unfrozenTeam(e){return r.a.put("team/"+e+"/unfrozen")},$=function userApplyAudit(e){var t=e.id;return delete e.id,r.a.put("team_user/"+t+"/apply",e)},q=function activeTeams(e){return r.a.httpGql(a.b,e,!0)},F=function teamLables(e){return r.a.httpGql(a.Wb,e)},z=function deleteTeamLable(e){return r.a.delete("team_lable/"+e)},Y=function setTeamRole(e){return r.a.put("team_user/"+e.id+"/setRole",e)},V=function teamTeransfer(e){return r.a.put("team/"+e.id+"/changeRole",e)},J=function teamApplyDetail(e){return r.a.httpGql(a.lc,e)},K=function userCompanys(e){return r.a.httpGql(a.ec,e)},B=function getMyCompanys(e){return r.a.httpGql(a.ib,e)}},"616":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});var r=n(4),a=n.n(r),c=n(2),i=n(6),u=n(617),s=n(274),o=n(598),l=n(599),f=n(328),m=n(723),p=n(276),d=n(14),b=n(29),h=n(267),_=n(270),v=n(264),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,a=!1,c=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw c}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),w=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var c=r.get;return void 0!==c?c.call(n):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var c=t[r](a),i=c.value}catch(e){return void n(e)}if(!c.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function ActivityUser(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ActivityUser);for(var r=arguments.length,a=Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=n=_possibleConstructorReturn(this,(e=ActivityUser.__proto__||Object.getPrototypeOf(ActivityUser)).call.apply(e,[this].concat(a))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ActivityUser,i["a"].Component),x(ActivityUser,[{"key":"render","value":function render(){var e=this,t=i.a.useState({"page":1,"rows":1e4,"activityId":""}),r=y(t,2),x=r[0],w=r[1],O=i.a.useState(!1),k=y(O,2),E=k[0],j=k[1],T=i.a.useState({}),N=y(T,2),A=N[0],C=N[1],S=i.a.useState([]),D=y(S,2),U=D[0],G=D[1],L=i.a.useState([]),P=y(L,2),R=P[0],H=P[1],I=i.a.useState(0),M=y(I,2),$=M[0],q=M[1],F=i.a.useState(120),z=y(F,1)[0],Y=i.a.useState(!1),V=y(Y,2),J=V[0],K=V[1],B=i.a.useState(5),W=y(B,2),Q=W[0],X=W[1],Z=i.a.useState(""),ee=y(Z,2),te=ee[0],ne=ee[1],re=i.a.useState([]),ae=y(re,2),ce=ae[0],ie=ae[1],ue=i.a.useState("LEAVE"),se=(y(ue,1)[0],i.a.useState("DUTY")),oe=(y(se,1)[0],i.a.useState("ABSENCE")),le=(y(oe,1)[0],i.a.useState(!1)),fe=y(le,2),me=fe[0],pe=fe[1],de=i.a.useState({}),be=y(de,2),he=be[0],_e=be[1],ve=i.a.useState("INVALID"),ge=y(ve,1)[0],ye=i.a.useState("CHECKED"),xe=(y(ye,1)[0],i.a.useState([])),we=y(xe,2),Oe=we[0],ke=we[1],Ee=i.a.useState(""),je=y(Ee,2),Te=je[0],Ne=je[1],Ae=i.a.useState([]),Ce=y(Ae,2),Se=Ce[0],De=Ce[1],Ue=i.a.useState(""),Ge=y(Ue,2),Le=Ge[0],Pe=Ge[1],Re=i.a.useState([]),He=y(Re,2),Ie=He[0],Me=He[1],$e=i.a.useState(!1),qe=y($e,2),Fe=qe[0],ze=(qe[1],i.a.useRef(Fe)),Ye=i.a.useRouter(),Ve=0;Object(d.z)(0).then(function(e){Ve=e});var Je,Ke,Be,We,Qe,Xe,Ze,et,tt,nt,rt,at,ct,it,ut,st,ot,lt,ft,mt,pt,dt=function convertTime(e){if(e){e=e.replace(/-/g,"/");var t=new Date(e),n=t.getHours(),r=t.getMinutes();return(n=n>9?""+n:"0"+n)+":"+(r=r>9?""+r:"0"+r)}return""},bt=(Je=_asyncToGenerator(a.a.mark(function _callee(t){var n,r,c,i,u,s,o,l;return a.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.K)(t);case 2:return n=e.sent,r=n&&n.team_lables&&n.team_lables.edges?n.team_lables.edges:[],c=[],i=0,u=1,s=-1,o=!1,r.length>0&&(u=r.length+1,r.forEach(function(e){var t=e&&e.node?e.node:null;t&&c.push(t)})),(c=c.sort(function(e,t){var n=e.name||"",r=t.name||"";return n.length-r.length})).forEach(function(e,t){var n=e.name||"";i+=n.length,o||i>4&&(o=!0,s=t+1)}),console.log("idx",s,"max",u),X((l=s>-1?s:u)<2?2:l),e.abrupt("return",c);case 16:case"end":return e.stop()}},_callee,e)})),function loadTeamTag(e){return Je.apply(this,arguments)}),ht=(Ke=_asyncToGenerator(a.a.mark(function _callee2(t){var n,r,c,i;return a.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Object(h.J)(t);case 3:return r=e.sent,(c=r&&r.team_lable_users&&r.team_lable_users.edges?r.team_lable_users.edges:[]).length>0&&(i=A.id,c.forEach(function(e){var t=e.node;t.teamLableUserId=t.id,t.isLableUser=!0;var r=t&&t.wechat_user&&t.wechat_user.extra&&t.wechat_user.extra.avatar?t.wechat_user.extra.avatar:"";r&&r.indexOf("api/file-upload/getFile")>-1&&(r=Object(d.w)(r));var a=t.wechat_user||{},c=a.username||"",u=a.nickname||"",s="佚名";u&&c?s=c+"("+u+")":u&&!c?s=""+u:c&&!u&&(s=""+c),t.activityUsername=s,t.picture=r,t.activity_id=i,n.push(t)})),e.abrupt("return",n);case 7:case"end":return e.stop()}},_callee2,e)})),function loadTeamTagUsers(e){return Ke.apply(this,arguments)}),_t=(Be=_asyncToGenerator(a.a.mark(function _callee3(t){var n,r,c,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return i&&(t.page=1,w(t)),n=[],e.next=4,Object(_.L)(t);case 4:return r=e.sent,(c=r&&r.activity_users&&r.activity_users.edges?r.activity_users.edges:[])&&c.length>0&&c.forEach(function(e){var t=e.node,r=t&&t.wechat_user&&t.wechat_user.extra&&t.wechat_user.extra.avatar?t.wechat_user.extra.avatar:"";r&&r.indexOf("api/file-upload/getFile")>-1&&(r=Object(d.w)(r));var a=t.wechat_user||{},c=a.username||"",i=a.nickname||"",u="佚名";i&&c?u=c+"("+i+")":i&&!c?u=""+i:c&&!i&&(u=""+c);var s=t.checkin_time,o=t.checkout_time;t.checkinTime=dt(s),t.checkoutTime=dt(o),t.activityUsername=u,t.picture=r,t.showRecord=!1,n.push(t)}),e.abrupt("return",n);case 8:case"end":return e.stop()}},_callee3,e)})),function loadData(e){return Be.apply(this,arguments)}),vt=(We=_asyncToGenerator(a.a.mark(function _callee4(t){var n,r,c;return a.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.v)(t);case 2:return n=e.sent,r=n&&n.team_users&&n.team_users.edges?n.team_users.edges:[],c=[],r.forEach(function(e){var t=e.node,n=t&&t.wechat_user&&t.wechat_user.extra&&t.wechat_user.extra.avatar?t.wechat_user.extra.avatar:"";n&&n.indexOf("api/file-upload/getFile")>-1&&(n=Object(d.w)(n));var r=t.wechat_user||{},a=r.username||"",i=r.nickname||"",u="佚名";i&&a?u=a+"("+i+")":i&&!a?u=""+i:a&&!i&&(u=""+a),t.activityUsername=u,t.picture=n,c.push(t)}),e.abrupt("return",c);case 7:case"end":return e.stop()}},_callee4,e)})),function loadTeamUser(e){return We.apply(this,arguments)}),gt=(Qe=_asyncToGenerator(a.a.mark(function _callee5(){var t,n;return a.a.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,Object(d.k)();case 4:n=e.sent,t=n.address,e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log("地址位置授权失败",e.t0),t="定位失败",Object(d.B)("/pages/result?type=getLocationFail"),e.abrupt("return",t);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},_callee5,e,[[1,8]])})),function getCurrentLoaction(){return Qe.apply(this,arguments)}),yt=function updateData(e,t){var n=t.ids||[],r=t.all||!1;return e.filter(function(e){var a=e.id;return(r||n.indexOf(a)>-1)&&Object.assign(e,t),!0})},xt=function canCheckInOut(e,t,n,r){e=e.replace(/-/g,"/"),n=n.replace(/-/g,"/");var a=Date.now(),c=Date.parse(e),i=Date.parse(n);return a>=c+60*t*1e3&&a<=i+60*r*1e3},wt=(Xe=_asyncToGenerator(a.a.mark(function _callee6(t){var n,r,c,i,u;return a.a.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,Object(_.a)({"id":n});case 3:return r=(r=e.sent).activity||{},Object.assign(t,r),c=!1,i=["FINISHED"],u=t.status,i.indexOf(u)>-1&&(c=!0),e.abrupt("return",c);case 11:case"end":return e.stop()}},_callee6,e)})),function helpCheck(e){return Xe.apply(this,arguments)}),Ot=(Ze=_asyncToGenerator(a.a.mark(function _callee7(t){var n,r,c;return a.a.wrap(function _callee7$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.E)(t);case 2:return n=e.sent,r=n&&n.sign_times?n.sign_times:[],c=[],r.length>0&&r.forEach(function(e){c.push(e)}),e.abrupt("return",c);case 7:case"end":return e.stop()}},_callee7,e)})),function getCheckRecord(e){return Ze.apply(this,arguments)}),kt=function getArr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=[],c=e;c<=t;c+=r)a.push(c>=10?""+c+n:"0"+c+n);return a},Et=function initDate(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"needHour":!0,"startHour":0,"endHour":23,"hourStep":1,"needMinute":!0,"startMinute":0,"endMinute":59,"minuteStep":1},a=e,c=e,i=t+1,u=t+1,s=n,o=n,l=0,f=24,m=0,p=60,d=[];if(d.push(kt(a,c,"年")),d.push(kt(i,u,"月")),d.push(kt(s,o,"日")),r.needHour){l=r.startHour||0,f=r.endHour||24;var b=r.hourStep||1;d.push(kt(l,f,"时",b))}if(r.needMinute){m=r.startMinute||0,p=r.endMinute||60;var h=r.minuteStep||5;d.push(kt(m,p,"分",h))}return d},jt=function isDateValidate(e){var t=e[0]+(new Date).getFullYear(),n=e[1]+1,r=e[2];if(n in[4,6,9,11]&&r>30)return!1;if(2===n){if(r>29)return!1;if((t%100==0&&t%400!=0||t%4!=0)&&r>28)return!1}return!0},Tt=function getDateValue(e){console.log("datestr",e),e=(e=e||"").replace(/-/g,"/");var t=new Date(e),n=new Date,r=t.getFullYear(),a=n.getFullYear();return[a-r-1>=0?a-r-1:0,t.getMonth(),t.getDate()-1,t.getHours(),t.getMinutes()]},Nt=(et=_asyncToGenerator(a.a.mark(function _callee8(t){var n,r,c,i,u,s,o,l,f,m,p,d;return a.a.wrap(function _callee8$(e){for(;;)switch(e.prev=e.next){case 0:if(Object(b.a)(!0),n=R[t]||{"id":""},r=n.id||"",c=[],"ALL"!==r){e.next=10;break}return e.next=7,_t(x,!0);case 7:c=e.sent,e.next=31;break;case 10:if("TEAM_USERS"!==r){e.next=22;break}return e.next=13,_t(x);case 13:return i=e.sent,u=A.organizer_id,e.next=17,vt({"page":1,"rows":1e4,"teamId":u});case 17:s=e.sent,o=i.map(function(e){return e.wechat_user.uid}),s.forEach(function(e){var t=e.wechat_user.uid,n=o.indexOf(t),r=e;n>-1&&(r=i[n]),c.push(r)}),e.next=31;break;case 22:return e.next=24,_t(x,!0);case 24:return l=e.sent,f={"page":1,"rows":1e5,"labelId":r},e.next=28,ht(f);case 28:m=e.sent,p=l.map(function(e){return e.wechat_user.uid}),m.forEach(function(e){var t=e.wechat_user.uid,n=p.indexOf(t),r=e;n>-1&&(r=l[n]),c.push(r)});case 31:return c=c.sort(function(e,t){var n=e.activityUsername||"",r=t.activityUsername||"";return n.length-r.length}),G(c),e.next=35,Object(_.a)({"id":A.id});case 35:d=(d=e.sent)&&d.activity?d.activity:{},C(function(e){return g({},e,d)}),Object(b.a)(!1);case 39:case"end":return e.stop()}},_callee8,e)})),function refreshData(e){return et.apply(this,arguments)}),At=(tt=_asyncToGenerator(a.a.mark(function _callee9(){var t,n,r,c,i,u,s;return a.a.wrap(function _callee9$(e){for(;;)switch(e.prev=e.next){case 0:if(Object(b.a)(!0),0===Ve){e.next=5;break}return Object(b.a)(!1),Object(d.v)(Ve),e.abrupt("return");case 5:return t=Ye.params.id,(n=x).id=t,w(n),e.next=11,Object(_.a)({"id":t});case 11:return r=(r=e.sent)&&r.activity?r.activity:{},C(r),e.next=16,_t(n,!0);case 16:return c=(c=e.sent).sort(function(e,t){var n=e.activityUsername||"",r=t.activityUsername||"";return n.length-r.length}),G(c),i=r.organizer_id,q(0),u={"page":1,"rows":1e5,"teamId":i},e.next=24,bt(u);case 24:s=e.sent,s=[{"id":"ALL","name":"报名清单"},{"id":"TEAM_USERS","name":"团队成员"}].concat(_toConsumableArray(s)),H(s),Object(b.a)(!1);case 28:case"end":return e.stop()}},_callee9,e)})),function onload(){return tt.apply(this,arguments)}),Ct=(nt=_asyncToGenerator(a.a.mark(function _callee10(t){return a.a.wrap(function _callee10$(e){for(;;)switch(e.prev=e.next){case 0:return ze.current=!0,q(t),ne(""),e.next=5,Nt(t);case 5:ze.current=!1;case 6:case"end":return e.stop()}},_callee10,e)})),function tagChange(e){return nt.apply(this,arguments)}),St=(rt=_asyncToGenerator(a.a.mark(function _callee11(t,n){var r,c,i,u,s,o,l;return a.a.wrap(function _callee11$(e){for(;;)switch(e.prev=e.next){case 0:if(!t.showRecord){e.next=7;break}t.showRecord=!1,(r=[].concat(_toConsumableArray(U)))[n]=t,G([].concat(_toConsumableArray(r))),e.next=21;break;case 7:return ne(""),_e(t),c=t.wechat_user.uid,i=A.id,u={"uid":c,"activity_id":i},e.next=14,Ot(u);case 14:s=e.sent,o={},l=[],s.forEach(function(e){var t=e.sign_time;t=t.replace(/-/g,"/");var n=new Date(t),r=n.getFullYear(),a=n.getMonth()+1,c=n.getDate(),i=n.getHours(),u=n.getMinutes(),s=r+"-"+a+"-"+c,f=(i=i>=0&&i<10?"0"+i:i)+":"+(u=u>=0&&u<10?"0"+u:u);e.signDate=s,e.signTime=f,e.showTitle=!o[s];var m=o[s]||[];m.push(e),o[s]=m,l.push(e)}),ie(l),s=U.filter(function(e){return e.wechat_user.uid===c?e.showRecord=!e.showRecord:e.showRecord=!1,!0}),G(s);case 21:case"end":return e.stop()}},_callee11,e)})),function showRecord(e,t){return rt.apply(this,arguments)}),Dt=(at=_asyncToGenerator(a.a.mark(function _callee12(t,n){var r,c,i,u,s,o,l,f,m,p,d;return a.a.wrap(function _callee12$(e){for(;;)switch(e.prev=e.next){case 0:if("FILED"!==A.status){e.next=4;break}return e.next=3,Object(b.c)("无效操作,活动已结项");case 3:return e.abrupt("return");case 4:if("PUBLIC"!==A.status){e.next=8;break}return e.next=7,Object(b.c)("无效操作,活动已进入公示");case 7:return e.abrupt("return");case 8:return r=A.start_time,c=A.end_time,i=xt(r,-1*z,c,z),e.next=13,wt(A);case 13:if(u=e.sent,i||u){e.next=19;break}return Object(b.a)(!1),e.next=18,Object(b.c)("活动开始前2小时至公示前才能操作");case 18:return e.abrupt("return");case 19:return s=t.id,o=t.wechat_user.uid,l=A.id,f={"status":n,"reason":"","uid":o,"activity_id":l},e.next=25,Object(_.r)(f);case 25:if(m=e.sent,p={"ids":[s]},0!==m.code){e.next=35;break}p.status=n,p=Object.assign(p,m.data||{}),d=yt(U,p),G(d),Nt($),e.next=37;break;case 35:return e.next=37,Object(b.c)(m.msg);case 37:case"end":return e.stop()}},_callee12,e)})),ct=_asyncToGenerator(a.a.mark(function _callee13(t){var n,r,c,i,u,s,o,l,f;return a.a.wrap(function _callee13$(e){for(;;)switch(e.prev=e.next){case 0:if(me){e.next=32;break}return n=A.start_time,r=A.end_time,c=xt(n,-1*z,r,z),e.next=6,wt(A);case 6:if(i=e.sent,c||i){e.next=12;break}return Object(b.a)(!1),e.next=11,Object(b.c)("活动开始前2小时至公示前才能操作");case 11:return e.abrupt("return");case 12:return Object(b.a)(!0,"提交中"),pe(!0),u=t.wechat_user.uid,s=A.id,o=A.address,l={"uid":u,"activity_id":s,"sign_address":o},e.next=20,Object(_.k)(l);case 20:if(0!==(f=e.sent).code){e.next=26;break}Object(b.a)(!1),Nt($),e.next=30;break;case 26:return pe(!1),Object(b.a)(!1),e.next=30,Object(b.c)(f.msg);case 30:Object(b.a)(!1),pe(!1);case 32:case"end":return e.stop()}},_callee13,e)})),it=_asyncToGenerator(a.a.mark(function _callee14(){var t,n,r,c,i,u,s,o,l,f;return a.a.wrap(function _callee14$(e){for(;;)switch(e.prev=e.next){case 0:return t=A.start_time,n=A.end_time,r=xt(t,-1*z,n,z),e.next=5,wt(A);case 5:if(c=e.sent,r||c){e.next=11;break}return Object(b.a)(!1),e.next=10,Object(b.c)("活动开始前2小时至公示前才能操作");case 10:return e.abrupt("return");case 11:ne("showHelpCheck"),i=U.filter(function(e){return e.showRecord=!1,!0}),G(i),Ne(A.start_time),Pe(A.end_time),u=A.start_time.replace(/-/g,"/"),s=new Date(u),o=s.getFullYear(),l=s.getMonth(),f=s.getDate(),ke(Et(o,l,f)),De(Tt(A.start_time)),Me(Tt(A.end_time));case 24:case"end":return e.stop()}},_callee14,e)})),ut=_asyncToGenerator(a.a.mark(function _callee15(t,n){var r,c,i,u,s,o,l,f,m;return a.a.wrap(function _callee15$(e){for(;;)switch(e.prev=e.next){case 0:return r=A.start_time,c=A.end_time,i=xt(r,-1*z,c,z),e.next=5,wt(A);case 5:if(u=e.sent,i||u){e.next=11;break}return Object(b.a)(!1),e.next=10,Object(b.c)("活动开始前2小时至公示前才能操作");case 10:return e.abrupt("return");case 11:return e.next=13,Object(b.b)({"title":"提示","content":"确定要作废此记录吗"});case 13:if(e.sent.confirm){e.next=16;break}return e.abrupt("return");case 16:return s=ge,o=t.id,e.next=20,Object(_.J)(o,{"status":s});case 20:if(0!==(l=e.sent).code){e.next=30;break}(f=ce[n]||[]).status=s,(m=[].concat(_toConsumableArray(ce)))[n]=[].concat(_toConsumableArray(f)),ie(m),Nt($),e.next=32;break;case 30:return e.next=32,Object(b.c)(l.msg);case 32:case"end":return e.stop()}},_callee15,e)})),st=_asyncToGenerator(a.a.mark(function _callee16(t){var n,r;return a.a.wrap(function _callee16$(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.detail.value,jt(n)){e.next=5;break}return e.next=4,Object(b.c)("签到时间无效");case 4:return e.abrupt("return");case 5:De(n),r=Oe[0][n[0]]+"-"+Oe[1][n[1]]+"-"+Oe[2][n[2]]+" "+Oe[3][n[3]]+":"+Oe[4][n[4]],Ne(r.replace(/[年月日时分]/g,""));case 8:case"end":return e.stop()}},_callee16,e)})),function startTimeChange(e){return st.apply(this,arguments)}),Ut=(ot=_asyncToGenerator(a.a.mark(function _callee17(t){var n,r;return a.a.wrap(function _callee17$(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.detail.value,jt(n)){e.next=5;break}return e.next=4,Object(b.c)("活动结束时间无效");case 4:return e.abrupt("return");case 5:Me(n),r=Oe[0][n[0]]+"-"+Oe[1][n[1]]+"-"+Oe[2][n[2]]+" "+Oe[3][n[3]]+":"+Oe[4][n[4]],Pe(r.replace(/[年月日时分]/g,""));case 8:case"end":return e.stop()}},_callee17,e)})),function endTimeChange(e){return ot.apply(this,arguments)}),Gt=(lt=_asyncToGenerator(a.a.mark(function _callee18(){var t,n,r,c,i,u,s;return a.a.wrap(function _callee18$(e){for(;;)switch(e.prev=e.next){case 0:return Object(b.a)(!0,"提交中"),t={},n=he.wechat_user.uid,r=A.id,c=Te,i=Le,u=A.address,t={"uid":n,"activity_id":r,"start_time":c,"end_time":i,"sign_address":u},e.next=10,Object(_.W)(t);case 10:if(0!==(s=e.sent).code){e.next=18;break}return e.next=14,Object(b.c)("补签成功");case 14:ne(""),Nt($),e.next=21;break;case 18:return Object(b.a)(!1),e.next=21,Object(b.c)(s.msg);case 21:Object(b.a)(!1);case 22:case"end":return e.stop()}},_callee18,e)})),function formSubmit(){return lt.apply(this,arguments)}),Lt=(ft=_asyncToGenerator(a.a.mark(function _callee19(){var t,n,r,c,i,u,s,o;return a.a.wrap(function _callee19$(e){for(;;)switch(e.prev=e.next){case 0:return t=A.start_time,n=A.end_time,r=xt(t,-1*z,n,z),e.next=5,wt(A);case 5:if(c=e.sent,r||c){e.next=11;break}return Object(b.a)(!1),e.next=10,Object(b.c)("活动开始前2小时至公示前才能操作");case 10:return e.abrupt("return");case 11:return e.next=13,Object(b.b)({"title":"提示","content":"确定一键点名吗"});case 13:if(e.sent.confirm){e.next=16;break}return e.abrupt("return");case 16:if(Object(b.a)(!0,"提交中"),i=A.id,u=[],U.forEach(function(e){var t={"uid":e.wechat_user.uid,"activity_id":i},n=e.status||"";[""].indexOf(n)>-1&&u.push(t)}),!(u.length<1)){e.next=23;break}return Object(b.a)(!1),e.abrupt("return");case 23:return e.next=25,gt();case 25:if(s=e.sent){e.next=38;break}return Object(b.a)(!1),e.next=30,Object(b.b)({"title":"提示","content":"地址位置获取失败","hideCancel":!0});case 30:if(!e.sent.confirm){e.next=36;break}return Object(b.a)(!1),e.abrupt("return");case 36:return Object(b.a)(!1),e.abrupt("return");case 38:return u=u.filter(function(e){return e.sign_address=s,!0}),e.next=41,Object(_.ab)(u);case 41:if(0!==(o=e.sent).code){e.next=46;break}Nt($),e.next=49;break;case 46:return Object(b.a)(!1),e.next=49,Object(b.c)(o.msg);case 49:Object(b.a)(!1);case 50:case"end":return e.stop()}},_callee19,e)})),mt=_asyncToGenerator(a.a.mark(function _callee20(t){var n;return a.a.wrap(function _callee20$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)({"phoneNumber":t.wechat_user.mobile||""});case 2:n=e.sent,console.log("res",n,"item",t);case 4:case"end":return e.stop()}},_callee20,e)})),function makePhoneCall(e){return mt.apply(this,arguments)}),Pt=(pt=_asyncToGenerator(a.a.mark(function _callee21(t,n){var r,c;return a.a.wrap(function _callee21$(e){for(;;)switch(e.prev=e.next){case 0:return Object(b.a)(!0),e.next=3,Object(_.n)({"status":"AUDITED"},t.id);case 3:0===(r=e.sent).code?(Object(b.c)("审核成功"),(c=[].concat(_toConsumableArray(U)))[n].status="AUDITED",G([].concat(_toConsumableArray(c)))):Object(b.c)(r.msg||"提交失败"),Object(b.a)(!1);case 6:case"end":return e.stop()}},_callee21,e)})),function auditEnroll(e,t){return pt.apply(this,arguments)}),Rt=i.a.useRef(0);i.a.usePageScroll(function(e){Rt.current=e.scrollTop;var t=e.scrollTop;j(t>500)}),i.a.useEffect(function(){At()},[]),i.a.useDidShow(function(){Object(s.a)({"scrollTop":Ht.current,"duration":100}),Object(d.L)("活动用户")});var Ht=i.a.useRef(0);return i.a.useDidHide(function(){Ht.current=Rt.current,e.pageHide=!0}),c.l.createElement(o.a,{"className":"body"},c.l.createElement(o.a,{"className":"content"},c.l.createElement(o.a,{"className":"box"},c.l.createElement(o.a,{"className":"activity-sign-box","style":"padding-top:0px;"},c.l.createElement(o.a,{"className":"sign-in-title","style":"font-size:21px;font-weight:bold;"},c.l.createElement(l.a,{"style":"width:21.3px;height:21.3px;","src":n(369),"className":"img"}),A.name||""),c.l.createElement(o.a,{"className":"activity-sign-date"},"活动时间：",A.start_time," 至 ",A.end_time))),R&&R.length>0&&c.l.createElement(o.a,{"className":"box","onClick":function onClick(){return function toggleShow(){ze.current||K(!J)}()}},c.l.createElement(o.a,{"className":"nav-list"},c.l.createElement(o.a,{"className":"nav-list-box"},c.l.createElement(o.a,{"className":"nav-list-content clear"},c.l.createElement(o.a,{"className":"btn-group clear"},R.map(function(e,t){return c.l.createElement(c.l.Fragment,{"key":e.name},t<=Q&&c.l.createElement(c.l.Fragment,null,$==t?c.l.createElement(o.a,{"style":"margin-left:4px;","onClick":function onClick(){return Ct(t)},"className":"btn-default"},e.name||""):c.l.createElement(o.a,{"style":"margin-left:4px;","onClick":function onClick(){return Ct(t)},"className":"btn-single"},e.name||"")),t>Q&&J&&c.l.createElement(c.l.Fragment,null,$==t?c.l.createElement(o.a,{"style":"margin-left:"+(e.name.length<19?4:-2)+"px;","onClick":function onClick(){return Ct(t)},"className":"btn-default"},e.name||""):c.l.createElement(o.a,{"style":"margin-left:"+(e.name.length<19?4:-2)+"px;","onClick":function onClick(){return Ct(t)},"className":"btn-single"},e.name||"")))})))))),c.l.createElement(o.a,{"className":"sign-in-list-box"},c.l.createElement(o.a,{"className":"tabs-main tabs-sign-in"},c.l.createElement(o.a,{"className":"sign-in-tips clear"},c.l.createElement(o.a,{"className":"sign-in-tips-content left"},c.l.createElement(o.a,{"className":"sign-in-tips-txt"},"参加活动人数"),c.l.createElement(o.a,{"className":"sign-in-tips-red"},A.enroll_num||0))),c.l.createElement(o.a,{"className":"sign-in-list"},U&&U.length>0?U.map(function(e,t){return c.l.createElement(c.l.Fragment,{"key":e.wechat_user.uid},c.l.createElement(o.a,{"className":"sign-in-list-content clear"},c.l.createElement(o.a,{"className":"head-pic left"},c.l.createElement(l.a,{"style":"width:53.25px;height:53.25px;","src":e.picture||n(263),"className":"img"}),c.l.createElement(o.a,{"style":"overflow: hidden;word-break: keep-all;text-overflow: ellipsis;white-space: nowrap;","className":"name"},e.activityUsername||"佚名")),c.l.createElement(o.a,{"className":"sign-in-list-main left"},c.l.createElement(o.a,{"className":"sign-in-list-title left","onClick":function onClick(){return St(e,t)}},c.l.createElement(o.a,{"className":"title"},"签到"),c.l.createElement(o.a,{"className":"time"},"CHECKED"===e.checkin_status&&e.checkinTime||"--")),c.l.createElement(o.a,{"className":"sign-in-list-title left","onClick":function onClick(){return St(e,t)}},c.l.createElement(o.a,{"className":"title"},"签退"),c.l.createElement(o.a,{"className":"time"},"CHECKED"===e.checkout_status&&e.checkoutTime||"--")),c.l.createElement(o.a,{"className":"sign-in-list-title left"},"NOPASS"==e.status&&c.l.createElement(o.a,{"className":"not-in"},"报名不通过"),"AUDITED"==e.status&&c.l.createElement(o.a,{"className":"not-in"},"报名通过")),c.l.createElement(o.a,{"className":"sign-in-list-title right"},0==$&&"TOAUDITED"==e.status&&c.l.createElement(o.a,{"onClick":function onClick(){return Pt(e,t)},"className":"btn"},"通过"),e.wechat_user&&e.wechat_user.mobile&&c.l.createElement(o.a,{"onClick":function onClick(){return Lt(e)},"style":"padding: 0px;background:#fff;","className":"sign-in-btn"},c.l.createElement(l.a,{"style":"width:30px;height:30px;","className":"img","src":n(370)}))))))}):c.l.createElement(o.a,{"style":"padding-top:28px;","className":"i-class i-load-more i-load-more-line"},c.l.createElement(o.a,{"className":"i-load-more-tip"},c.l.createElement(o.a,null,"暂无数据"))))))),"showHelpCheck"==te&&c.l.createElement(o.a,{"className":"foot-nav"},c.l.createElement(f.a,{"onSubmit":Gt.bind(this)},c.l.createElement(o.a,{"className":"content"},c.l.createElement(o.a,{"className":"retroactive"},c.l.createElement(o.a,{"className":"list clear"},c.l.createElement(o.a,{"className":"title left"},"签到时间"),c.l.createElement(o.a,{"className":"time left"},Te||""),c.l.createElement(m.a,{"name":"start_time","mode":"multiSelector","onChange":Dt.bind(this),"range":Oe,"value":Se},c.l.createElement(o.a,{"className":"btn right"},"修改"))),c.l.createElement(o.a,{"className":"list clear"},c.l.createElement(o.a,{"className":"title left"},"签退时间"),c.l.createElement(o.a,{"className":"time left"},Le||""),c.l.createElement(m.a,{"name":"end_time","mode":"multiSelector","onChange":Ut.bind(this),"range":Oe,"value":Ie},c.l.createElement(o.a,{"className":"btn right"},"修改"))),c.l.createElement(o.a,{"className":"list clear"},c.l.createElement(p.a,{"className":"btn-new ","style":"-webkit-appearance: none;border-radius: 0;border:0;","form-type":"submit"},"补签")))))),E&&c.l.createElement(v.a,null))}},{"key":"componentDidMount","value":function componentDidMount(){w(ActivityUser.prototype.__proto__||Object.getPrototypeOf(ActivityUser.prototype),"componentDidMount",this)&&w(ActivityUser.prototype.__proto__||Object.getPrototypeOf(ActivityUser.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){w(ActivityUser.prototype.__proto__||Object.getPrototypeOf(ActivityUser.prototype),"componentDidShow",this)&&w(ActivityUser.prototype.__proto__||Object.getPrototypeOf(ActivityUser.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){w(ActivityUser.prototype.__proto__||Object.getPrototypeOf(ActivityUser.prototype),"componentDidHide",this)&&w(ActivityUser.prototype.__proto__||Object.getPrototypeOf(ActivityUser.prototype),"componentDidHide",this).call(this)}}]),ActivityUser}();O.config={}}}]);