(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{"263":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),a=n(273),c=n(6),i=n(596),o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var u=function(e){function BackTop(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BackTop),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(BackTop.__proto__||Object.getPrototypeOf(BackTop)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(BackTop,c["a"].Component),o(BackTop,[{"key":"render","value":function render(){return r.l.createElement(i.a,null,r.l.createElement(i.a,{"style":"bottom:15%;","onClick":function onClick(){return function toTop(){Object(a.a)({"scrollTop":0,"duration":500})}()},"className":"back-top"}))}}]),BackTop}();u.options={"addGlobalClass":!0}},"266":function(e,t,n){"use strict";n.d(t,"z",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"F",function(){return u}),n.d(t,"D",function(){return l}),n.d(t,"s",function(){return s}),n.d(t,"t",function(){return f}),n.d(t,"o",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"B",function(){return m}),n.d(t,"p",function(){return b}),n.d(t,"r",function(){return y}),n.d(t,"x",function(){return h}),n.d(t,"I",function(){return g}),n.d(t,"d",function(){return _}),n.d(t,"m",function(){return k}),n.d(t,"N",function(){return A}),n.d(t,"J",function(){return E}),n.d(t,"g",function(){return O}),n.d(t,"v",function(){return w}),n.d(t,"w",function(){return x}),n.d(t,"C",function(){return T}),n.d(t,"l",function(){return C}),n.d(t,"b",function(){return N}),n.d(t,"h",function(){return L}),n.d(t,"M",function(){return j}),n.d(t,"H",function(){return D}),n.d(t,"u",function(){return S}),n.d(t,"j",function(){return P}),n.d(t,"y",function(){return U}),n.d(t,"O",function(){return I}),n.d(t,"S",function(){return B}),n.d(t,"A",function(){return G}),n.d(t,"n",function(){return R}),n.d(t,"P",function(){return q}),n.d(t,"Q",function(){return H}),n.d(t,"a",function(){return W}),n.d(t,"K",function(){return F}),n.d(t,"i",function(){return M}),n.d(t,"E",function(){return V}),n.d(t,"L",function(){return Y}),n.d(t,"G",function(){return X}),n.d(t,"k",function(){return v}),n.d(t,"R",function(){return z}),n.d(t,"q",function(){return Q});var r=n(3),a=n(5),c=function loadTeams(e){return r.a.httpGql(a.ac,e,!0)},i=function addTeamAlbum(e){return r.a.post("team_album",e)},o=function changeTeamAlbum(e){var t=e.id;return delete e.id,r.a.put("team_album/"+t,e)},u=function teamAlbumEvalLike(e){var t=e.id;return delete e.id,r.a.put("team_album_eval/isLike/"+t,e)},l=function saveEvalValue(e){return r.a.post("team_album_eval",e)},s=function getTeamAlbum(e){return r.a.httpGql(a.Pb,e,!0)},f=function getTeamAlbumEval(e){return r.a.httpGql(a.Qb,e,!0)},p=function getEvalStatus(e){return r.a.httpGql(a.S,e,!0)},d=function applyUnfrozen(e){return r.a.post("team/applyUnfrozen",e)},m=function recordInfo(e){return r.a.post("record_information",e)},b=function getFillingInfo(e){return r.a.httpGql(a.a,e)},v=function editFillingInfo(e,t){return r.a.put("record_information/"+e,t)},y=function getTeam(e){return r.a.httpGql(a.Nb,e,!0)},h=function joinTeam(e){return r.a.post("team_user",e)},g=function teamLable(e){return r.a.httpGql(a.Ub,e)},_=function addTeamLable(e){return r.a.post("team_lable",e)},k=function eidtTeamLable(e){var t=e.id;return delete e.id,r.a.put("team_lable/"+t,e)},A=function teamUserMsg(e){return r.a.httpGql(a.Xb,e)},E=function teamLableUsers(e){return r.a.httpGql(a.Vb,e)},O=function deleteLableUsers(e){return r.a.delete("team_lable_user/batch",e)},w=function getTeamUsers(e){return r.a.httpGql(a.Yb,e)},x=function joinLableTeam(e){return r.a.post("team_lable_user",e)},T=function removeLableUser(e){return r.a.delete("team_lable_user/"+e.id)},C=function editTeamMsg(e){return r.a.put("team/"+e.id,e)},N=function addTeam(e){return r.a.post("team",e)},L=function deletePic(e){return r.a.delete("file-upload/"+e.id)},j=function teamUserApply(e){return r.a.httpGql(a.mc,e)},D=function teamCyclActivities(e){return r.a.httpGql(a.Tb,e,!0)},S=function getTeamAlbums(e){return r.a.httpGql(a.Sb,e)},P=function disLikeAct(e){return r.a.put("activity_user/"+e.id+"/dislike",e)},U=function likeAct(e){return r.a.put("activity_user/"+e.id+"/like",e)},I=function teamWechatUsers(e){return r.a.httpGql(a.Zb,e,!0)},B=function writtenOffTeam(e){return r.a.put("team/"+e.id+"/writtenOff")},G=function logoutTeam(e){return r.a.delete("team_user",e)},R=function frozenTeam(e){return r.a.put("team/"+e+"/frozen")},q=function unfrozenTeam(e){return r.a.put("team/"+e+"/unfrozen")},H=function userApplyAudit(e){var t=e.id;return delete e.id,r.a.put("team_user/"+t+"/apply",e)},W=function activeTeams(e){return r.a.httpGql(a.b,e,!0)},F=function teamLables(e){return r.a.httpGql(a.Wb,e)},M=function deleteTeamLable(e){return r.a.delete("team_lable/"+e)},V=function setTeamRole(e){return r.a.put("team_user/"+e.id+"/setRole",e)},Y=function teamTeransfer(e){return r.a.put("team/"+e.id+"/changeRole",e)},X=function teamApplyDetail(e){return r.a.httpGql(a.lc,e)},z=function userCompanys(e){return r.a.httpGql(a.ec,e)},Q=function getMyCompanys(e){return r.a.httpGql(a.ib,e)}},"269":function(e,t,n){"use strict";n.d(t,"N",function(){return c}),n.d(t,"K",function(){return i}),n.d(t,"L",function(){return o}),n.d(t,"M",function(){return u}),n.d(t,"s",function(){return l}),n.d(t,"H",function(){return s}),n.d(t,"o",function(){return f}),n.d(t,"j",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"f",function(){return b}),n.d(t,"Z",function(){return v}),n.d(t,"C",function(){return y}),n.d(t,"v",function(){return h}),n.d(t,"u",function(){return g}),n.d(t,"t",function(){return _}),n.d(t,"e",function(){return k}),n.d(t,"d",function(){return A}),n.d(t,"Y",function(){return E}),n.d(t,"db",function(){return O}),n.d(t,"Q",function(){return w}),n.d(t,"p",function(){return x}),n.d(t,"E",function(){return T}),n.d(t,"c",function(){return C}),n.d(t,"k",function(){return N}),n.d(t,"V",function(){return L}),n.d(t,"T",function(){return j}),n.d(t,"i",function(){return D}),n.d(t,"x",function(){return S}),n.d(t,"h",function(){return P}),n.d(t,"S",function(){return U}),n.d(t,"m",function(){return I}),n.d(t,"y",function(){return B}),n.d(t,"I",function(){return G}),n.d(t,"q",function(){return R}),n.d(t,"R",function(){return q}),n.d(t,"ab",function(){return H}),n.d(t,"r",function(){return W}),n.d(t,"J",function(){return F}),n.d(t,"W",function(){return M}),n.d(t,"U",function(){return V}),n.d(t,"eb",function(){return Y}),n.d(t,"cb",function(){return X}),n.d(t,"G",function(){return z}),n.d(t,"g",function(){return Q}),n.d(t,"l",function(){return Z}),n.d(t,"w",function(){return K}),n.d(t,"z",function(){return J}),n.d(t,"A",function(){return $}),n.d(t,"X",function(){return ee}),n.d(t,"P",function(){return te}),n.d(t,"D",function(){return ne}),n.d(t,"bb",function(){return re}),n.d(t,"B",function(){return ae}),n.d(t,"F",function(){return ce}),n.d(t,"n",function(){return ie}),n.d(t,"O",function(){return oe});var r=n(3),a=n(5),c=function loadActivityss(e){return r.a.httpGql(a.s,e,!0)},i=function loadActivityOfMore(e){return r.a.httpGql(a.i,e,!0)},o=function loadActivityUsers(e){return r.a.httpGql(a.q,e,!0)},u=function loadActivitys(e){return r.a.httpGql(a.r,e,!0)},l=function closeActivity(e,t){return r.a.put("activity/"+e+"/audit",t)},s=function handleCheck(e,t){return r.a.put("activity/switch/check/"+e,t)},f=function cancelEnroll(e,t){return r.a.delete("activity_user?activity_id="+e+"&uid="+t)},p=function activityReports(e){return r.a.httpGql(a.n,e,!0)},d=function activity(e){return r.a.httpGql(a.c,e,!0)},m=function activityByUid(e){return r.a.httpGql(a.d,e)},b=function activityEvaluate(e){return r.a.post("activity_eval",e)},v=function seekHelpEvaluate(e){return r.a.post("seek_help_eval",e)},y=function getCouponYhq(e){return r.a.put("redeem/coupon_yhq/"+e.uid+"/"+e.id)},h=function couponYhqOfCollect(e){return r.a.httpGql(a.tb,e)},g=function couponYhqList(e){return r.a.httpGql(a.G,e)},_=function couponYhqDetail(e){return r.a.httpGql(a.F,e,!0)},k=function activityEvals(e){return r.a.httpGql(a.f,e,!0)},A=function activityEvalById(e){return r.a.httpGql(a.e,e)},E=function seekHelpEvalById(e){return r.a.httpGql(a.Ab,e)},O=function teamAlbumEvalById(e){return r.a.httpGql(a.Rb,e)},w=function praiseForEval(e){return r.a.put("eval_eval/"+e.id+"/like",e)},x=function cancelPraiseForEval(e){return r.a.put("eval_eval/"+e.id+"/dislike",e)},T=function getSignTimes(e){return r.a.httpGql(a.Hb,e)},C=function activityEnroll(e){return r.a.post("activity_user",e)},N=function activitySign(e){return r.a.post("sign_time",e)},L=function regularActivitysEvals(e){return r.a.httpGql(a.wb,e,!0)},j=function regularActivityDetail(e){return r.a.httpGql(a.ub,e,!0)},D=function activityReportMsg(e){return r.a.httpGql(a.k,e,!0)},S=function evalOfActivityReport(e){return r.a.httpGql(a.m,e,!0)},P=function activityReportEval(e){return r.a.httpGql(a.l,e,!0)},U=function praiseForactivityReport(e,t){return r.a.put("activity_report/"+e,t)},I=function addActivityReport(e){return r.a.post("activity_report",e)},B=function familyConnections(e){return r.a.httpGql(a.X,e)},G=function hasStore(e){return r.a.httpGql(a.cb,e)},R=function cancelPraiseForUserStore(e,t){return r.a.put("user_store/"+e+"/dislike",t)},q=function praiseForUserStore(e,t){return r.a.put("user_store/"+e+"/like",t)},H=function signForAll(e){return r.a.post("sign_time/signBatch",e)},W=function changeActUserStatus(e){return r.a.post("sign_time/changeStatus",e)},F=function invalidCheckRecord(e,t){return r.a.put("sign_time/"+e,t)},M=function replaceSignTime(e){return r.a.post("sign_time/replacement",e)},V=function regularActivityReports(e){return r.a.httpGql(a.vb,e,!0)},Y=function visitActivity(e,t){return r.a.put("wechat_method/"+e+"/visit/activity",t)},X=function subactivity(e){return r.a.post("activity/subactivity",e)},z=function getUserTeams(e){return r.a.httpGql(a.bb,e)},Q=function activityMsg(e){return r.a.get("activity/"+e)},Z=function addActivity(e){return r.a.post("activity",e)},K=function editActivity(e,t){return r.a.put("activity/"+e,t)},J=function getActivityForCalendar(e){return r.a.httpGql(a.g,e)},$=function getActivitySimilar(e){return r.a.httpGql(a.j,e,!0)},ee=function reportVisit(e){return r.a.put("wechat_method/activity_report/"+e+"/visit")},te=function navigationActivitys(e){return r.a.httpGql(a.lb,e,!0)},ne=function getReportSimilar(e){return r.a.httpGql(a.xb,e,!0)},re=function siteActivity(e){return r.a.httpGql(a.h,e,!0)},ae=function getCanEnrollTeams(e){return r.a.httpGql(a.z,e,!e.uid)},ce=function getTeamsUsers(e){return r.a.httpGql(a.bc,e)},ie=function auditActEnroll(e,t){return r.a.put("activity_user/"+t+"/audit",e)},oe=function loadTimeBankOrgs(e){return r.a.httpGql(a.cc,e)}},"270":function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"g",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return i}),n.d(t,"h",function(){return o}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return s});n(6),n(253),"function"==typeof Symbol&&Symbol.iterator;function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=function rebuildTree(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[],a=0;a<e.length;a++){var c=e[a],i=c.name,o=c.code||"",u={"label":i,"value":c.id+"="+c.name+"="+o};if(n||t!==c.type){if(t===c.type){r.push(u);continue}var l=c.children;l&&(u.children=rebuildTree(l,t,n)),r.push(u)}}return r},a=function sortActivities(e){var t={"UNDERWAY":[],"ENROLMENT":[],"ENROLLEND":[],"PUBLISHED":[],"PUBLIC":[],"OTHER":[]};return e.forEach(function(e){var n=e.status||e.activity.status;n=t.hasOwnProperty(n)?n:"OTHER",t[n].push(e)}),[].concat(_toConsumableArray(t.UNDERWAY),_toConsumableArray(t.ENROLLEND),_toConsumableArray(t.ENROLMENT),_toConsumableArray(t.PUBLISHED),_toConsumableArray(t.PUBLIC),_toConsumableArray(t.OTHER))},c=function rankArr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sort";if(Array.isArray(e)&&e.length>0){var r=0;e.forEach(function(e,a,c){if(a>0){var i=c[a-1];r=e[t]===i[t]?r:a}e[n]=r})}else e=e.filter(function(e,t){return e[n]=t,!0});return e},i=function replaceHtml(e){return e=(e=(e=(e=(e=e||"").replace(/ /g,"&nbsp;")).replace(/\r\n/g,"<br>")).replace(/\n/g,"<br>")).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},o=function trunRichTextToText(e){var t=e.replace(/<.+?>/g,"");return t=(t=(t=t.replace(/ /gi,"")).replace(/\s/gi,"")).replace(/&nbsp;/gi,"")},u=function getDateT(e){var t=e.indexOf("T");return-1!==t&&(e=e.substr(0,t)),e},l=function getDateStr(e){e=e.replace(/-/g,"/");var t=new Date(e),n=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);return["周日","周一","周二","周三","周四","周五","周六"][t.getDay()]},s=function formatWorkTime(e,t){switch(t){case 9:e=e.substr(0,1)+"********";break;case 8:e=e.substr(0,1)+"*******";break;case 7:e=e.substr(0,1)+"******";break;case 6:e=e.substr(0,1)+"*****";break;case 5:e=e.substr(0,1)+"****";break;case 4:e=e.substr(0,1)+"***";break;case 3:e=e.substr(0,1)+"**";break;case 2:e=e.substr(0,1)+"*"}return e}},"273":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=void 0,c=void 0,i=function pageScrollTo(e){var t=e.scrollTop,n=e.duration,i=void 0===n?300:n,o=e.success,u=e.fail,l=e.complete;return new Promise(function(e,n){try{if(void 0===t)throw Error('"scrollTop" is required');var s=document.querySelector(".taro-tabbar__panel")||window;a||(a=s===window?function scrollFunc(e){if(void 0===e)return window.pageYOffset;window.scrollTo(0,e)}:function scrollFunc(e){if(void 0===e)return s.scrollTop;s.scrollTop=e});var f=a(),p=t-f,d=i/17,m=Object(r.g)(r.c,d);!function scroll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=f+p*m(t);if(a(n),t<d)c&&clearTimeout(c),c=setTimeout(function(){scroll(t+1)},17);else{var r={"errMsg":"pageScrollTo:ok"};o&&o(r),l&&l(),e(r)}}()}catch(e){var b={"errMsg":"pageScrollTo:fail "+e.message};u&&u(b),l&&l(),n(b)}})}},"277":function(e,t,n){var r=n(278);"string"==typeof r&&(r=[[e.i,r,""]]);var a={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};n(261)(r,a);r.locals&&(e.exports=r.locals)},"278":function(e,t,n){(e.exports=n(260)(!1)).push([e.i,".taro-scroll {\n  -webkit-overflow-scrolling: auto;\n}\n\n.taro-scroll::-webkit-scrollbar {\n  display: none;\n}\n\n.taro-scroll-view {\n  overflow: hidden;\n}\n\n.taro-scroll-view__scroll-x {\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n\n.taro-scroll-view__scroll-y {\n  overflow-x: hidden;\n  overflow-y: scroll;\n}",""])},"294":function(e,t,n){},"302":function(e,t,n){"use strict";n(257);var r=n(2),a=n(258),c=n(259),i=n.n(c),o=(n(277),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}function easeOutScroll(e,t,n){if(e!==t&&"number"==typeof e){var r=t-e,a=500,c=+new Date,i=t>=e;!function step(){e=function linear(e,t,n,r){return n*e/r+t}(+new Date-c,e,r,a),i&&e>=t||!i&&t>=e?n(t):(n(e),requestAnimationFrame(step))}()}}var l=function(e){function ScrollView(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ScrollView);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ScrollView.__proto__||Object.getPrototypeOf(ScrollView)).apply(this,arguments));return e.onTouchMove=function(e){e.stopPropagation()},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ScrollView,r["l"].Component),u(ScrollView,[{"key":"componentDidMount","value":function componentDidMount(){var e=this;setTimeout(function(){var t=e.props;t.scrollY&&"number"==typeof t.scrollTop&&("scrollWithAnimation"in t?easeOutScroll(0,t.scrollTop,function(t){e.container.scrollTop=t}):e.container.scrollTop=t.scrollTop,e._scrollTop=t.scrollTop),t.scrollX&&"number"==typeof t.scrollLeft&&("scrollWithAnimation"in t?easeOutScroll(0,t.scrollLeft,function(t){e.container.scrollLeft=t}):e.container.scrollLeft=t.scrollLeft,e._scrollLeft=t.scrollLeft)},10)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){var t=this,n=this.props;e.scrollY&&"number"==typeof e.scrollTop&&e.scrollTop!==this._scrollTop&&("scrollWithAnimation"in e?easeOutScroll(this._scrollTop,e.scrollTop,function(e){t.container.scrollTop=e}):this.container.scrollTop=e.scrollTop,this._scrollTop=e.scrollTop),e.scrollX&&"number"==typeof n.scrollLeft&&e.scrollLeft!==this._scrollLeft&&("scrollWithAnimation"in e?easeOutScroll(this._scrollLeft,e.scrollLeft,function(e){t.container.scrollLeft=e}):this.container.scrollLeft=e.scrollLeft,this._scrollLeft=e.scrollLeft),e.scrollIntoView&&"string"==typeof e.scrollIntoView&&document&&document.querySelector&&document.querySelector("#"+e.scrollIntoView)&&document.querySelector("#"+e.scrollIntoView).scrollIntoView({"behavior":"smooth","block":"center","inline":"start"})}},{"key":"render","value":function render(){var e,t=this,n=this.props,c=n.className,u=n.onScroll,l=n.onScrollToUpper,s=n.onScrollToLower,f=n.onTouchMove,p=n.scrollX,d=n.scrollY,m=this.props,b=m.upperThreshold,v=void 0===b?50:b,y=m.lowerThreshold,h=void 0===y?50:y,g=i()("taro-scroll",(_defineProperty(e={},"taro-scroll-view__scroll-x",p),_defineProperty(e,"taro-scroll-view__scroll-y",d),e),c);v=parseInt(v),h=parseInt(h);var _=function throttle(e,t){var n=null;return function(){for(var r=arguments.length,a=Array(r),c=0;c<r;c++)a[c]=arguments[c];clearTimeout(n),n=setTimeout(function(){e.apply(void 0,a)},t)}}(function uperAndLower(e){var n=t.container,r=n.offsetWidth,a=n.offsetHeight,c=n.scrollLeft,i=n.scrollTop,o=n.scrollHeight,u=n.scrollWidth;s&&(t.props.scrollY&&a+i+h>=o||t.props.scrollX&&r+c+h>=u)&&s(e),l&&(t.props.scrollY&&i<=v||t.props.scrollX&&c<=v)&&l(e)},200);return r.l.createElement("div",o({"ref":function ref(e){t.container=e}},Object(a.a)(this.props,["className","scrollTop","scrollLeft"]),{"className":g,"onScroll":function _onScroll(e){var n=t.container,r=n.scrollLeft,a=n.scrollTop,c=n.scrollHeight,i=n.scrollWidth;t._scrollLeft=r,t._scrollTop=a,Object.defineProperty(e,"detail",{"enumerable":!0,"writable":!0,"value":{"scrollLeft":r,"scrollTop":a,"scrollHeight":c,"scrollWidth":i}}),_(e),u&&u(e)},"onTouchMove":function _onTouchMove(e){f?f(e):t.onTouchMove(e)}}),this.props.children)}}]),ScrollView}();t.a=l},"408":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADpUlEQVRIia2Xe6hVZRDFf4m978VepKJWZBY9sNSQzOj9higIjAj0n1iVhlC3LKwgobLoSUF4pyAhKpOUnmReKwPNwiCiMkgs0hBNQ+yJvZlcO07n7r3Pvnjnj3Ng7/3N+uabNWvm26u3t5eGNgo4HZgEnAAcA3QB24AvgHXAWmCVpF87uWwCnEA9wJXAPsDfwBbgS+BHYCRwNHCwv/8WWAg8LmlbldMhNYCHAU8BHxn0JeACR34EcDZwmaRTgdHAOGAGsAm4MzcWETcMNOLJwAuOJD+4x5H0M0n9nkXEGcD9wFTgReA6STs7RXw+8C7QDVwIXF8FWmWSVgFnAncBVwHLIuLQOuBTgFdMmNx130AAW03SX5LypKYDpwGLI2LvMuADgUXALuBSk2ePTdKzwCzgXOC+MuB5wHHe4brBAC1M0pNAbuCWiJjaCnwsMNvMfX0wQVusx+V3b0QMKYCTQHn+d1QsmmRmd9V5joiJEfFARBzU/s41PR84K3OewMNcf301eR3jTS01F8pAk5hvATcBB1T4ed4CNC2BxwOHOAdV9nLmxwKypB08Ik4GlgP7AudI2lzmR9I3LtV/gU/y809rgNMeBm4GLjIXugw63pGmnF4saXUHP++lzA51/lLUN3ZYkPZoqp038Zz/FwP754YkfdDAx1f5k8BHAd8BOxosSnvEG33C9b411U7S2obrv8fl9IcZPbThQpynH7xmPfDxANbuKoA3m1zdDRcme1fawUPuUm9ERCnbS6y7AE5S7QeMaAi63Dm9ArjV5ZPNZElD8NEFcCGP4xqA/sde4EN2l8hjBk+2L42IWpEBJgC/FxH/mU29A+jbPplLgDWtLw3e48hfi4hhZU68qcszVUWOXwWuca7L7ETgpzLQFvBk+xzgeE8vZXae3y0stHqBo5lZsWCRHb5fd4aSHgTGStpQ8ck8z2tvFsBJmHeAuZ4e2y1T8UsdaAv4z2XPPX+ltM6XtKO1H882cZ7x/6CZtTxVL5Ute/P/BoHPgRs98jzdYQJtbBEx1k0m1W66pBSsfmq1wBJ6m2v1WmDnHoBOsZaPsJavL96VyeTt3t3drrmZ5sBAALs9Z2Xj357tVNLK1m+q9DnZ94nzkaKxzKfRV0eyiBhjPciyOhJYsZtv+rr9205XmOHOe/bhnCqyE2UXSj5kJKnXGV3KYBIox9jkxmc50EvK1llqTS9teT/K6eNqq9jhbeTL1OTVJZt83kBWS/qt0hvwD7M7BvkakfxmAAAAAElFTkSuQmCC"},"409":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACu0lEQVRIia3WS8incxQH8M/7GiaG0qjJpWk2ViKXcUvvsFKysLAYkTcLnCQ2JjFNyGXBwq1p8P6ywTRKkRUrMkUkNDOLiVIjiSG3wUQzDJ06o7//PM/8b87iff/Pc57f+f7OOd9zmVtaWjKjXIDbsRYn4A+8jjT8TUT8PWh+2YxgK/E4VuMNfIFLcX/pN+P7/xPwDlyIdRGx4/DL1toW3IrtrbV3IuLQYd38DGBrcB8+zDC21gYvv6Vsn4y5wUPTAi7HA/gSp+AJrG+trSn9OdiP34cPTkOavOQVeBs3YC8exll4rcjS8DU2RMSng4enyWGG6VG8h5cjIt8ttNYWEwDX4Xhswmddt51E8oJX4aIqhX/PR8RLuBIHsBWfDJfEpB5m8k/DY3gBuzq+ublytzki9nYZmcTDFViskN4zrGytnVpEyhx+3mdkXMD87swqg0fw3RBY6p/CV9gWEfv6DI0b0pVFiJ/wZIc+c3otbinW9so4gMeWwRsrpAc6vHuuWPtWRBxRe5N6eAbuLYNbO/TX47xi6LejjI0CzHpah8twcc/5bN7P4uOI+HMU4CjSrC6ivIodHfq7cCKewc+jwIzwMOm/HqdXKxsu4lVVBg9hT1eRd0mfh/M1du7ExhykHd9kw/4RL0bE/nHAjuZherdQXqytifBD6Y7BudW4F4cH7LQeHoeT6ncC7sbd9fxXzbv38WZEHJwE8Gg5XFYt6hrcVuG9Gh9VuC8ZlyjjAqbk7ffUjpKL0Su4HM9X8z404vwR0hfSuWLlL/W8UAtRNoFteBAja65L+jycr6I/G0/jJrxbRPmgpvlU0gf4W618OZLOr9a2vXI6EUmGpQ9wX3WPnQW8exaQQcklKjesLIHhm+dzlkDWXYY4/88i6dzB/JMbV4LmrBskUZImAfNdkug/++WEkrZW4Nd/AB2MpxNkVclXAAAAAElFTkSuQmCC"},"677":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var r=n(4),a=n.n(r),c=n(2),i=n(6),o=n(25),u=n(273),l=n(596),s=n(302),f=n(597),p=n(14),d=n(29),m=n(8),b=n(269),v=n(270),y=n(30),h=n(266),g=n(3),_=n(263),k=(n(294),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),A=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,a=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw c}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),O=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var c=r.get;return void 0!==c?c.call(n):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var c=t[r](a),i=c.value}catch(e){return void n(e)}if(!c.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function UserActivity(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserActivity);for(var r=arguments.length,a=Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=n=_possibleConstructorReturn(this,(e=UserActivity.__proto__||Object.getPrototypeOf(UserActivity)).call.apply(e,[this].concat(a))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UserActivity,i["a"].Component),E(UserActivity,[{"key":"render","value":function render(){var e,t,r,E,O,w,x,T,C=this,N=[["UNDERWAY","PUBLISHED","FINISHED","FILED","PUBLIC"],["PUBLISHED","UNDERWAY","FINISHED","FILED","PUBLIC"],["FINISHED","FILED","PUBLIC"]],L=Object(m.a)("defaultTeamLogo"),j=Object(m.a)("defaultAcitivyPic"),D=i.a.useState(!1),S=A(D,2),P=S[0],U=S[1],I=i.a.useState([]),B=A(I,2),G=B[0],R=B[1],q=i.a.useState({"mid":"","uid":"","page":1,"rows":10,"sort":"","order":"","status":["UNDERWAY","PUBLISHED","FINISHED","FILED","PUBLIC"]}),H=A(q,2),W=H[0],F=H[1],M=i.a.useState({"page":1,"rows":10,"team_ids":[]}),V=A(M,2),Y=V[0],X=V[1],z=i.a.useState([]),Q=A(z,2),Z=Q[0],K=Q[1],J=i.a.useState(!0),$=A(J,2),ee=$[0],te=$[1],ne=i.a.useState([{"title":"我参与的","selected":!1,"cur":"cur"},{"title":"我管理的","selected":!1}]),re=A(ne,2),ae=re[0],ce=re[1],ie=i.a.useState(""),oe=A(ie,2),ue=oe[0],le=oe[1],se=i.a.useState(0),fe=A(se,2),pe=fe[0],de=fe[1],me=i.a.useState([]),be=A(me,2),ve=be[0],ye=be[1],he=i.a.useState(""),ge=A(he,2),_e=ge[0],ke=ge[1],Ae=!1,Ee=Object(p.u)(),Oe=function canCheckInOut(e,t,n,r){e=e.replace(/-/g,"/"),n=n.replace(/-/g,"/");var a=Date.now(),c=Date.parse(e),i=Date.parse(n);return a>=c+60*t*1e3&&a<=i+60*r*1e3},we=function canEdit(e){var t=e.start_time,n=e.status;return!(["FILED","FINISHED","PUBLIC"].indexOf(n)>-1)&&(!(["UNDERWAY"].indexOf(n)>-1)&&(!(["TOAUDITED","CANCLED","NOTPASS"].indexOf(n)>-1)&&!!Oe(t,-63072e4,t,-120)))},xe=function canCheckOnOrCheckOut(e){var t=e.status,n=e.start_time,r=e.end_time;return["TOAUDITED","CANCLED","NOTPASS","FILED"].indexOf(t)<0&&Oe(n,-120,r,120)?1===e.is_check_on?"closeCheck":"openCheck":"cantTrun"},Te=(e=_asyncToGenerator(a.a.mark(function _callee(e){var t,n,r,c,i,o;return a.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.id,n=Ee.uid,r=e.status,!(["PUBLISHED"].indexOf(r)>-1)){a.next=13;break}return c="query activity_user($uid: String!, $activity_id: String!) {\n        activity_user(uid: $uid, activity_id: $activity_id) {\n          is_like is_store is_sign_up checkin_addr checkout_addr checkin_time checkout_time\n          checkin_status checkout_status status\n        }\n      }",i={"uid":n,"activity_id":t},a.next=8,g.a.httpGql(c,i);case 8:if(o=a.sent,1!==(o.activity_user||{}).is_sign_up){a.next=12;break}return a.abrupt("return",!0);case 12:return a.abrupt("return",!1);case 13:case"end":return a.stop()}},_callee,C)})),function canCancel(t){return e.apply(this,arguments)}),Ce=function canCloseActivcity(e){return"PUBLIC"===e.status},Ne=(t=_asyncToGenerator(a.a.mark(function _callee2(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t,n,r,c,i,o,u,l,s,f,d,m,y,h,g,_,k,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(b.M)(e);case 3:if(t=a.sent,n=t.activitys.edges||[],r=parseInt(t.activitys.totalCount)||0,W.page*W.rows>=r?te(!1):te(!0),c=[],!(n&&n.length>0)){a.next=38;break}i=0;case 10:if(!(i<n.length)){a.next=36;break}if(o=n[i],!(u=o.node)){a.next=33;break}return(l=u.file_uploads||[]).length>0?(s=l[0].url,u.picture=Object(p.w)(s)):(f="ALL",u.picture=""+j[f]),(d=u.group)&&(m=d.simple_name||d.name||"",d.name=m,u.group=d),(y=u.start_time||"").length>9&&(y=y.substring(0,10),u.activityStartTime=y),h=u.team||{},u.teamLogo=h.logos&&h.logos[0]&&h.logos[0].url?Object(p.w)(h.logos[0].url):L,g=u.organizer_id,u.canEdit=we(u),u.checkOnOrOut=xe(u),a.next=27,Te(u);case 27:u.canCancel=a.sent,u.canClose=Ce(u),_=A.length>0?A:ve,k=_.indexOf(g)>-1,u.isAdmin=k,c.push(u);case 33:i++,a.next=10;break;case 36:c=c.filter(function(e){return Object(p.A)(e.start_time,e.end_time)&&(e.status="ENROLLMENT"),!0}),c=Object(v.g)(c);case 38:return a.abrupt("return",c);case 39:case"end":return a.stop()}},_callee2,C)})),function loadData(e){return t.apply(this,arguments)}),Le=(r=_asyncToGenerator(a.a.mark(function _callee3(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a.a.wrap(function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return r&&(Y.page=1,X(Y),K([])),a.next=3,Object(h.H)(Y);case 3:e=a.sent,t=[],(n=e&&e.cycle_activitys&&e.cycle_activitys.edges?e.cycle_activitys.edges:[]).length>0&&n.forEach(function(e){var n=e.node;if(n){var r=n.file_uploads||[];if(r.length>0){var a=r[0].url;n.picture=Object(p.w)(a)}else{n.picture=""+Object(m.a)("defaultAcitivyPic").ALL}var c=n.start_time||"";c.length>9&&(c=c.substring(0,10),n.start_time=c);var i=n.team||{};n.teamLogo=i.logos&&i.logos[0]&&i.logos[0].url?Object(p.w)(i.logos[0].url):L,n.activityType="CYCLE",t.push(n)}}),K(r?t:[].concat(_toConsumableArray(Z),t));case 8:case"end":return a.stop()}},_callee3,C)})),function loadModuleActivity(){return r.apply(this,arguments)}),je=(E=_asyncToGenerator(a.a.mark(function _callee4(e){var t,n,r,c,i,o,u;return a.a.wrap(function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:return t={"uid":e,"role_id":["PLEADER","TLEADER"]},a.next=3,Object(y.a)(t);case 3:for(n=a.sent,r=n.aTeams||[],c=[],i=0;i<r.length;i++)o=r[i],u=o.id,"RECRUITING"!==o.status&&"RECRUITED"!==o.status&&"AUDITED"!==o.status||c.push(u);return a.abrupt("return",c);case 8:case"end":return a.stop()}},_callee4,C)})),function loadATeamIds(e){return E.apply(this,arguments)}),De=(O=_asyncToGenerator(a.a.mark(function _callee5(e){var t,n,r,c;return a.a.wrap(function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:if(Ae){a.next=25;break}if(Ae=!0,Object(d.a)(!0),t=[],t=ae.filter(function(t,n){return t.selected=n===e,t.cur=n===e?"cur":"",!0}),ce(t),de(e),"module"===ue&&0!==e){a.next=22;break}return W.status=N[e],W.page=1,F(W),R([]),n={"page":1,"rows":10},r=Ee.uid,2===e?n.c_uid=r:(n.status=N[e],le(""),1===e?n.m_uid=r:n.uid=r),F(n),a.next=18,Ne(n,!0);case 18:c=a.sent,R([].concat(_toConsumableArray(c))),a.next=23;break;case 22:1===e&&Le(!0);case 23:Object(d.a)(!1),Ae=!1;case 25:case"end":return a.stop()}},_callee5,C)})),function tabClick(e){return O.apply(this,arguments)}),Se=(w=_asyncToGenerator(a.a.mark(function _callee6(e){var t;return a.a.wrap(function _callee6$(n){for(;;)switch(n.prev=n.next){case 0:if(Object(d.a)(!0),e!==ue){n.next=7;break}"normal"!==e&&"module"!==e||(W.m_uid=Ee.uid,W.status=N[pe],delete W.c_uid),le(""),W.status=N[pe],n.next=26;break;case 7:if(le(e),"UNDERWAY"!=e&&"PUBLISHED"!==e){n.next=12;break}W.status=[e],n.next=26;break;case 12:if("END"!==e){n.next=16;break}W.status=N[2],n.next=26;break;case 16:if("normal"!==e){n.next=22;break}W.c_uid=Ee.uid,delete W.m_uid,delete W.status,n.next=26;break;case 22:if("module"!==e){n.next=26;break}return R([]),n.next=26,Le(!0);case 26:if("module"===e&&(e!==ue||"module"!==e)){n.next=33;break}return F(W),K([]),n.next=31,Ne(W,!0);case 31:t=n.sent,R(t);case 33:Object(d.a)(!1);case 34:case"end":return n.stop()}},_callee6,C)})),function filter(e){return w.apply(this,arguments)}),Pe=function toDetail(e){var t=e.id;if("CYCLE"!==e.activity_type){var n="/activityPages/pages/activity_detail?id="+t;if(3===pe&&e.created_by_who===Ee.uid)if("NOTPASS"===e.status)n="/activityPages/pages/activity_edit?id="+t;else if(["TOAUDITED","CANCLED","NOTPASS","AUDITED"].indexOf(e.status)>-1)return;Object(p.B)(n)}else{var r="/activityPages/pages/regular_activity_detail?id="+t;Object(p.B)(r)}},Ue=function toReport(e){var t="/activityPages/pages/report_edit?activity_id="+e.id+"&from=detail";Object(p.B)(t)},Ie=(x=_asyncToGenerator(a.a.mark(function _callee7(e){var t,n,r,c,i,u,l,s,f,m,v,y,h,_,k,A,E,O,w,x,T;return a.a.wrap(function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.isAdmin,n=[],e.create_type,r=e.id,c=Ee.uid,i=e.status,t&&(n.push({"title":"关闭活动","value":"closeActivity"}),n.push({"title":"编辑封面图","value":"editActivityPicture"})),!(["PUBLISHED"].indexOf(i)>-1)){a.next=15;break}return u="query activity_user($uid: String!, $activity_id: String!) {\n        activity_user(uid: $uid, activity_id: $activity_id) {\n          is_like is_store is_sign_up checkin_addr checkout_addr checkin_time checkout_time\n          checkin_status checkout_status status\n        }\n      }",l={"uid":c,"activity_id":r},a.next=12,g.a.httpGql(u,l);case 12:s=a.sent,1===(s.activity_user||{}).is_sign_up&&n.push({"title":"取消报名","value":"cancelEnroll"});case 15:if(!((f=n.map(function(e){return e.title})).length<1)){a.next=19;break}return Object(d.c)("暂无更多操作"),a.abrupt("return");case 19:return a.prev=19,a.next=22,Object(o.c)({"itemList":f});case 22:if(m=a.sent,"showActionSheet:ok"!==m.errMsg){a.next=77;break}if(v=m.tapIndex,y=n[v],"closeActivity"!==(h=y.value)){a.next=45;break}if("PUBLIC"!==i){a.next=42;break}return a.next=32,Object(d.b)({"title":"提示","content":"确定要关闭此活动吗?"});case 32:if(a.sent.confirm){a.next=35;break}return a.abrupt("return");case 35:return _={"status":"FILED"},a.next=38,Object(b.s)(r,_);case 38:0===(k=a.sent).code?(Object(d.c)("活动关闭成功"),A=[],A=G.filter(function(e){return e.id===r&&(e.status="FILED"),!0}),R(A)):Object(d.c)(k.msg),a.next=43;break;case 42:Object(d.c)("公示中的活动才能关闭");case 43:a.next=77;break;case 45:if("editActivityPicture"!==h){a.next=50;break}E="/activityPages/pages/publish_report?id="+r+"&from=detail",Object(p.B)(E),a.next=77;break;case 50:if("share"!==h){a.next=53;break}a.next=77;break;case 53:if("closeCheck"!==h){a.next=60;break}return a.next=56,Object(b.H)(r,{"state":0});case 56:0===a.sent.code?(O=[],O=G.filter(function(e){return e.id===r&&(e.is_check_on=0),!0}),R(O)):Object(d.c)(m.msg),a.next=77;break;case 60:if("openCheck"!==h){a.next=67;break}return a.next=63,Object(b.H)(r,{"state":1});case 63:0===a.sent.code?(w=[],w=G.filter(function(e){return e.id===r&&(e.is_check_on=1),!0}),R(w)):Object(d.c)(m.msg),a.next=77;break;case 67:if("cancelEnroll"!==h){a.next=77;break}return a.next=70,Object(d.b)({"title":"提示","content":"确定要取消报名吗?"});case 70:if(a.sent.confirm){a.next=73;break}return a.abrupt("return");case 73:return a.next=75,Object(b.o)(r,c);case 75:0===(x=a.sent).code?(Object(d.c)("取消报名成功"),T=[],T=G.filter(function(e){return e.id!==r}),R(T)):Object(d.c)(x.data);case 77:a.next=82;break;case 79:a.prev=79,a.t0=a.catch(19),console.log("error",a.t0);case 82:case"end":return a.stop()}},_callee7,C,[[19,79]])})),T=_asyncToGenerator(a.a.mark(function _callee8(e,t){var n,r,c,i,o,u,l,s,f,m,v,y,h;return a.a.wrap(function _callee8$(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.id,r=Ee.uid,c=e.status,"closeActivity"!==t){a.next=20;break}if("PUBLIC"!==c){a.next=17;break}return a.next=7,Object(d.b)({"title":"提示","content":"确定要关闭此活动吗?"});case 7:if(a.sent.confirm){a.next=10;break}return a.abrupt("return");case 10:return i={"status":"FILED"},a.next=13,Object(b.s)(n,i);case 13:0===(o=a.sent).code?(Object(d.c)("活动关闭成功"),u=[],u=G.filter(function(e){return e.id===n&&(e.status="FILED"),!0}),R(u)):Object(d.c)(o.msg),a.next=18;break;case 17:Object(d.c)("公示中的活动才能关闭");case 18:a.next=52;break;case 20:if("editActivityPicture"!==t){a.next=25;break}l="/activityPages/pages/publish_report?id="+n+"&from=detail",Object(p.B)(l),a.next=52;break;case 25:if("share"!==t){a.next=28;break}a.next=52;break;case 28:if("closeCheck"!==t){a.next=35;break}return a.next=31,Object(b.H)(n,{"state":0});case 31:0===(s=a.sent).code?(f=[],f=G.filter(function(e){return e.id===n&&(e.is_check_on=0,e.checkOnOrOut="openCheck"),!0}),R(f)):Object(d.c)(s.msg),a.next=52;break;case 35:if("openCheck"!==t){a.next=42;break}return a.next=38,Object(b.H)(n,{"state":1});case 38:0===(m=a.sent).code?(v=[],v=G.filter(function(e){return e.id===n&&(e.is_check_on=1,e.checkOnOrOut="closeCheck"),!0}),R(v)):Object(d.c)(m.msg),a.next=52;break;case 42:if("cancelEnroll"!==t){a.next=52;break}return a.next=45,Object(d.b)({"title":"提示","content":"确定要取消报名吗?"});case 45:if(a.sent.confirm){a.next=48;break}return a.abrupt("return");case 48:return a.next=50,Object(b.o)(n,r);case 50:0===(y=a.sent).code?(Object(d.c)("取消报名成功"),h=[],h=G.filter(function(e){return e.id!==n}),R(h)):Object(d.c)(y.data);case 52:case"end":return a.stop()}},_callee8,C)})),function handleBtnClick(e,t){return T.apply(this,arguments)}),Be=i.a.useRef(0);i.a.usePageScroll(function(e){Be.current=e.scrollTop;var t=e.scrollTop;ke(t>250?"fixed-top":""),U(t>500)});var Ge,Re=(Ge=_asyncToGenerator(a.a.mark(function _callee9(){var e,t,n,r,c,i;return a.a.wrap(function _callee9$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.z)(0);case 2:if(0===(e=a.sent)){a.next=6;break}return Object(p.v)(e,{"nextUrl":"/userPages/pages/user_index"}),a.abrupt("return");case 6:if(Object(d.a)(!0),t="",!Ee){a.next=12;break}t=Ee.uid||"",a.next=16;break;case 12:return a.next=14,Object(p.r)();case 14:n=a.sent,t=n.uid||"";case 16:return a.next=18,je(t);case 18:return r=a.sent,c=[],r&&r.length>0?c=[].concat(_toConsumableArray(r)):c.push("noTeam"),Y.team_ids=c,X(function(e){return k({},e,Y)}),ye(r),W.uid=t,a.next=27,Ne(W,!1,c);case 27:i=a.sent,R(i),F(W),Object(d.a)(!1);case 31:case"end":return a.stop()}},_callee9,C)})),function onload(){return Ge.apply(this,arguments)}),qe=i.a.useRef(function(){}),He=i.a.useRef(0);i.a.useReachBottom(_asyncToGenerator(a.a.mark(function _callee10(){var e;return a.a.wrap(function _callee10$(t){for(;;)switch(t.prev=t.next){case 0:if(!C.pageHide){t.next=2;break}return t.abrupt("return");case 2:if(!((e=document.documentElement.scrollTop||document.body.scrollTop)<He.current)){t.next=8;break}return He.current=e,t.abrupt("return");case 8:He.current=e;case 9:qe.current()&&Fe();case 11:case"end":return t.stop()}},_callee10,C)})));var We,Fe=(We=_asyncToGenerator(a.a.mark(function _callee11(){var e;return a.a.wrap(function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:if(!Ae){t.next=2;break}return t.abrupt("return");case 2:if(!ee){t.next=16;break}if(!(pe<3)){t.next=16;break}return W.page+=1,W.status=N[pe],t.next=8,Ne(W);case 8:if(e=t.sent,R([].concat(_toConsumableArray(G),_toConsumableArray(e))),F(function(e){return k({},e,W)}),1!==pe||"module"!==ue){t.next=16;break}return Y.page+=1,X(function(e){return k({},e,Y)}),t.next=16,Le();case 16:case"end":return t.stop()}},_callee11,C)})),function reachBottom(){return We.apply(this,arguments)});i.a.useDidShow(function(){Object(u.a)({"scrollTop":Me.current,"duration":100}),Object(p.L)("我的活动"),C.pageHide=!1,qe.current=Object(p.Q)()});var Me=i.a.useRef(0);i.a.useDidHide(function(){Me.current=Be.current,C.pageHide=!0}),i.a.useEffect(function(){Re()},[]);var Ve={"CANCLED":{"title":"已取消","className":"cancel"},"ENROLLMENT":{"title":"即将开始","className":"coming-soon"},"FILED":{"title":"已结束","className":"jieshu"},"FILING":{"title":"归档中","className":"account"},"FINISHED":{"title":"结算中","className":"account"},"NOTPASS":{"title":"审核不通过","className":"cancel"},"PUBLIC":{"title":"公示中","className":"gongshi"},"PUBLISHED":{"title":"准备中","className":"coming-soon"},"TOAUDITED":{"title":"待审核","className":"coming-soon"},"UNDERWAY":{"title":"进行中","className":"ing"},"0":{"title":"已关闭","className":"jiesu"},"1":{"title":"开展中","className":"ing"}};return c.l.createElement(l.a,null,c.l.createElement(l.a,{"className":"content fix content-nav"},c.l.createElement(l.a,{"className":"my-activity"},c.l.createElement(l.a,{"style":"padding-bottom:0px;","className":"tabs clear "+_e},c.l.createElement(s.a,{"style":"height:50px;white-space: nowrap;","scrollX":!0,"scroll-with-animation":"true"},ae.map(function(e,t){return c.l.createElement(l.a,{"style":"width:50%;word-break:keep-all;display:inline-block;","onClick":function onClick(){return De(t)},"key":e.title,"className":"tabs-li "+e.cur},e.title)}))),c.l.createElement(c.l.Fragment,null,0===pe&&c.l.createElement(l.a,{"className":"container-content clear"},c.l.createElement(l.a,{"className":"select-date"},c.l.createElement(l.a,{"className":"roll-left","style":"width: 100%;"},c.l.createElement(l.a,{"style":"width: 33%;","className":"UNDERWAY"===ue?"btn-selected":"btn-default","onClick":function onClick(){return Se("UNDERWAY")}},"进行中"),c.l.createElement(l.a,{"style":"width: 33%;","className":"PUBLISHED"===ue?"btn-selected":"btn-default","onClick":function onClick(){return Se("PUBLISHED")}},"即将开始"),c.l.createElement(l.a,{"style":"width: 33%;","className":"END"===ue?"btn-selected":"btn-default","onClick":function onClick(){return Se("END")}},"已结束")))),void 0,"module"!==ue&&c.l.createElement(c.l.Fragment,null,c.l.createElement(l.a,{"className":"tabs-main tabs-all-activity container-content","style":"display:block;"},!!G&&G.length>0&&G.map(function(e){return c.l.createElement(l.a,{"className":"main-con margin-b clear","key":e.id},c.l.createElement(l.a,null,c.l.createElement(l.a,{"className":"detail-tags","onClick":function onClick(){return Pe(e)}},c.l.createElement(l.a,{"className":"detail-tags-txt"},e.group.simple_name||e.group.name)),c.l.createElement(l.a,{"className":"user-name-sym padding-t margin-t","onClick":function onClick(){return Pe(e)}},c.l.createElement(l.a,{"className":"head left"},c.l.createElement(f.a,{"className":"img","src":e.teamLogo})),c.l.createElement(l.a,{"className":"overflow"}," ",e.organizer_name)),c.l.createElement(l.a,{"className":"activity-sym clear"},c.l.createElement(l.a,{"className":"cover","onClick":function onClick(){return Pe(e)}},c.l.createElement(l.a,{"className":"cover-tags"},c.l.createElement(l.a,{"className":"cover-tags-txt"},Ve[e.status].title)),c.l.createElement(f.a,{"className":"img","src":e.picture})),c.l.createElement(l.a,{"className":"detail "},c.l.createElement(l.a,{"className":"title control-2line clear","style":"-webkit-box-orient: vertical;","onClick":function onClick(){return Pe(e)}},e.name),c.l.createElement(l.a,{"className":"date secondry-text","onClick":function onClick(){return Pe(e)}},e.activityStartTime),e.canCancel?c.l.createElement(l.a,{"className":"sign blue-btn-second","onClick":function onClick(){return Ie(e,"cancelEnroll")}},"取消报名"):c.l.createElement(l.a,{"className":"sign blue-btn-second","onClick":function onClick(){return Ue(e)}},"活动现场")))),e.isAdmin&&(e.canClose||e.canEdit||"cantTrun"!==e.checkOnOrOut)&&c.l.createElement(l.a,{"className":"btn-group padding-t-b clear","style":"font-size: 14px;"},e.canClose&&c.l.createElement(l.a,{"className":"grid left","onClick":function onClick(){return Ie(e,"closeActivity")}},c.l.createElement(f.a,{"className":"img","style":"width: 16px;height: 16px;vertical-align: sub;","src":n(408)}),"关闭活动"),e.canEdit&&c.l.createElement(l.a,{"className":"grid left","onClick":function onClick(){return function toEdit(e){var t=e.start_time,n=e.status;if(["FILED","FINISHED","PUBLIC"].indexOf(n)>-1)Object(d.c)("活动已经结束不能编辑");else if(["UNDERWAY"].indexOf(n)>-1)Object(d.c)("活动已经开始不能编辑");else if(["TOAUDITED","CANCLED","NOTPASS"].indexOf(n)>-1)Object(d.c)("此活动待审通过或已取消");else if(Oe(t,-63072e4,t,-120)){var r="/activityPages/pages/activity_edit?id="+e.id+"&canUpdated=changeAddress";Object(p.B)(r)}else Object(d.c)("活动即将开始不能编辑")}(e)}},c.l.createElement(f.a,{"className":"img","style":"width: 16px;height: 16px;vertical-align: sub;","src":n(409)}),"变更时间地址")))})),(!G||0===G.length)&&c.l.createElement(l.a,{"style":"margin-top:30px;","className":"i-class i-load-more i-load-more-line"},c.l.createElement(l.a,{"className":"i-load-more-tip"},c.l.createElement(l.a,null,"暂无数据")))),"module"===ue&&c.l.createElement(c.l.Fragment,null,!!Z&&Z.length>0&&c.l.createElement(l.a,{"className":"tabs-main tabs-all-activity","style":"display:block;"},Z.map(function(e){return c.l.createElement(l.a,{"className":"main-con margin-b clear","key":e.id},c.l.createElement(l.a,{"onClick":function onClick(){return function toCycleDetail(e){var t="/activityPages/pages/regular_activity?id="+e.id;Object(p.B)(t)}(e)}},c.l.createElement(l.a,{"className":"detail-tags"},c.l.createElement(l.a,{"className":"detail-tags-txt"},e.group.simple_name||e.group.name)),c.l.createElement(l.a,{"className":"user-name-sym padding-t margin-t","onClick":function onClick(){return Pe(e)}},c.l.createElement(l.a,{"className":"head left"},c.l.createElement(f.a,{"className":"img","src":e.teamLogo})),c.l.createElement(l.a,{"className":"overflow"}," ",e.organizer_name)),c.l.createElement(l.a,{"className":"activity-sym clear"},c.l.createElement(l.a,{"className":"cover"},c.l.createElement(l.a,{"className":"cover-tags"},c.l.createElement(l.a,{"className":"cover-tags-txt"},Ve[e.status].title)),c.l.createElement(f.a,{"className":"img","src":e.picture})," "),c.l.createElement(l.a,{"className":"detail "},c.l.createElement(l.a,{"className":"title control-2line clear","style":"-webkit-box-orient: vertical;"},e.name),c.l.createElement(l.a,{"className":"date secondry-text"},e.activityStartTime),e.canCancel?c.l.createElement(l.a,{"className":"sign blue-btn-second font16","onClick":function onClick(){return Ie(e,"cancelEnroll")}},"取消报名"):c.l.createElement(l.a,{"className":"sign blue-btn-second font16","onClick":function onClick(){return Ue(e)}},"活动现场")))))})),(!Z||0===Z.length)&&c.l.createElement(l.a,{"style":"margin-top:30px;","className":"i-class i-load-more i-load-more-line"},c.l.createElement(l.a,{"className":"i-load-more-tip"},c.l.createElement(l.a,null,"暂无数据"))))))),P&&c.l.createElement(_.a,null))}},{"key":"componentDidMount","value":function componentDidMount(){O(UserActivity.prototype.__proto__||Object.getPrototypeOf(UserActivity.prototype),"componentDidMount",this)&&O(UserActivity.prototype.__proto__||Object.getPrototypeOf(UserActivity.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){O(UserActivity.prototype.__proto__||Object.getPrototypeOf(UserActivity.prototype),"componentDidShow",this)&&O(UserActivity.prototype.__proto__||Object.getPrototypeOf(UserActivity.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){O(UserActivity.prototype.__proto__||Object.getPrototypeOf(UserActivity.prototype),"componentDidHide",this)&&O(UserActivity.prototype.__proto__||Object.getPrototypeOf(UserActivity.prototype),"componentDidHide",this).call(this)}}]),UserActivity}();w.config={}}}]);