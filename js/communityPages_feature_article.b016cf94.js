(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"264":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),i=n(274),o=n(6),a=n(598),c=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}();var u=function(t){function BackTop(){return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BackTop),function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(BackTop.__proto__||Object.getPrototypeOf(BackTop)).apply(this,arguments))}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(BackTop,o["a"].Component),c(BackTop,[{"key":"render","value":function render(){return r.l.createElement(a.a,null,r.l.createElement(a.a,{"style":"bottom:15%;","onClick":function onClick(){return function toTop(){Object(i.a)({"scrollTop":0,"duration":500})}()},"className":"back-top"}))}}]),BackTop}();u.options={"addGlobalClass":!0}},"270":function(t,e,n){"use strict";n.d(e,"N",function(){return o}),n.d(e,"K",function(){return a}),n.d(e,"L",function(){return c}),n.d(e,"M",function(){return u}),n.d(e,"s",function(){return l}),n.d(e,"H",function(){return s}),n.d(e,"o",function(){return p}),n.d(e,"j",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"b",function(){return v}),n.d(e,"f",function(){return y}),n.d(e,"Z",function(){return m}),n.d(e,"C",function(){return h}),n.d(e,"v",function(){return g}),n.d(e,"u",function(){return b}),n.d(e,"t",function(){return _}),n.d(e,"e",function(){return w}),n.d(e,"d",function(){return O}),n.d(e,"Y",function(){return E}),n.d(e,"db",function(){return A}),n.d(e,"Q",function(){return T}),n.d(e,"p",function(){return j}),n.d(e,"E",function(){return k}),n.d(e,"c",function(){return P}),n.d(e,"k",function(){return N}),n.d(e,"V",function(){return x}),n.d(e,"T",function(){return C}),n.d(e,"i",function(){return q}),n.d(e,"x",function(){return G}),n.d(e,"h",function(){return R}),n.d(e,"S",function(){return S}),n.d(e,"m",function(){return F}),n.d(e,"y",function(){return D}),n.d(e,"I",function(){return B}),n.d(e,"q",function(){return H}),n.d(e,"R",function(){return L}),n.d(e,"ab",function(){return U}),n.d(e,"r",function(){return M}),n.d(e,"J",function(){return I}),n.d(e,"W",function(){return Y}),n.d(e,"U",function(){return $}),n.d(e,"eb",function(){return z}),n.d(e,"cb",function(){return J}),n.d(e,"G",function(){return W}),n.d(e,"g",function(){return Q}),n.d(e,"l",function(){return V}),n.d(e,"w",function(){return X}),n.d(e,"z",function(){return K}),n.d(e,"A",function(){return Z}),n.d(e,"X",function(){return tt}),n.d(e,"P",function(){return et}),n.d(e,"D",function(){return nt}),n.d(e,"bb",function(){return rt}),n.d(e,"B",function(){return it}),n.d(e,"F",function(){return ot}),n.d(e,"n",function(){return at}),n.d(e,"O",function(){return ct});var r=n(3),i=n(5),o=function loadActivityss(t){return r.a.httpGql(i.s,t,!0)},a=function loadActivityOfMore(t){return r.a.httpGql(i.i,t,!0)},c=function loadActivityUsers(t){return r.a.httpGql(i.q,t,!0)},u=function loadActivitys(t){return r.a.httpGql(i.r,t,!0)},l=function closeActivity(t,e){return r.a.put("activity/"+t+"/audit",e)},s=function handleCheck(t,e){return r.a.put("activity/switch/check/"+t,e)},p=function cancelEnroll(t,e){return r.a.delete("activity_user?activity_id="+t+"&uid="+e)},f=function activityReports(t){return r.a.httpGql(i.n,t,!0)},d=function activity(t){return r.a.httpGql(i.c,t,!0)},v=function activityByUid(t){return r.a.httpGql(i.d,t)},y=function activityEvaluate(t){return r.a.post("activity_eval",t)},m=function seekHelpEvaluate(t){return r.a.post("seek_help_eval",t)},h=function getCouponYhq(t){return r.a.put("redeem/coupon_yhq/"+t.uid+"/"+t.id)},g=function couponYhqOfCollect(t){return r.a.httpGql(i.tb,t)},b=function couponYhqList(t){return r.a.httpGql(i.G,t)},_=function couponYhqDetail(t){return r.a.httpGql(i.F,t,!0)},w=function activityEvals(t){return r.a.httpGql(i.f,t,!0)},O=function activityEvalById(t){return r.a.httpGql(i.e,t)},E=function seekHelpEvalById(t){return r.a.httpGql(i.Ab,t)},A=function teamAlbumEvalById(t){return r.a.httpGql(i.Rb,t)},T=function praiseForEval(t){return r.a.put("eval_eval/"+t.id+"/like",t)},j=function cancelPraiseForEval(t){return r.a.put("eval_eval/"+t.id+"/dislike",t)},k=function getSignTimes(t){return r.a.httpGql(i.Hb,t)},P=function activityEnroll(t){return r.a.post("activity_user",t)},N=function activitySign(t){return r.a.post("sign_time",t)},x=function regularActivitysEvals(t){return r.a.httpGql(i.wb,t,!0)},C=function regularActivityDetail(t){return r.a.httpGql(i.ub,t,!0)},q=function activityReportMsg(t){return r.a.httpGql(i.k,t,!0)},G=function evalOfActivityReport(t){return r.a.httpGql(i.m,t,!0)},R=function activityReportEval(t){return r.a.httpGql(i.l,t,!0)},S=function praiseForactivityReport(t,e){return r.a.put("activity_report/"+t,e)},F=function addActivityReport(t){return r.a.post("activity_report",t)},D=function familyConnections(t){return r.a.httpGql(i.X,t)},B=function hasStore(t){return r.a.httpGql(i.cb,t)},H=function cancelPraiseForUserStore(t,e){return r.a.put("user_store/"+t+"/dislike",e)},L=function praiseForUserStore(t,e){return r.a.put("user_store/"+t+"/like",e)},U=function signForAll(t){return r.a.post("sign_time/signBatch",t)},M=function changeActUserStatus(t){return r.a.post("sign_time/changeStatus",t)},I=function invalidCheckRecord(t,e){return r.a.put("sign_time/"+t,e)},Y=function replaceSignTime(t){return r.a.post("sign_time/replacement",t)},$=function regularActivityReports(t){return r.a.httpGql(i.vb,t,!0)},z=function visitActivity(t,e){return r.a.put("wechat_method/"+t+"/visit/activity",e)},J=function subactivity(t){return r.a.post("activity/subactivity",t)},W=function getUserTeams(t){return r.a.httpGql(i.bb,t)},Q=function activityMsg(t){return r.a.get("activity/"+t)},V=function addActivity(t){return r.a.post("activity",t)},X=function editActivity(t,e){return r.a.put("activity/"+t,e)},K=function getActivityForCalendar(t){return r.a.httpGql(i.g,t)},Z=function getActivitySimilar(t){return r.a.httpGql(i.j,t,!0)},tt=function reportVisit(t){return r.a.put("wechat_method/activity_report/"+t+"/visit")},et=function navigationActivitys(t){return r.a.httpGql(i.lb,t,!0)},nt=function getReportSimilar(t){return r.a.httpGql(i.xb,t,!0)},rt=function siteActivity(t){return r.a.httpGql(i.h,t,!0)},it=function getCanEnrollTeams(t){return r.a.httpGql(i.z,t,!t.uid)},ot=function getTeamsUsers(t){return r.a.httpGql(i.bc,t)},at=function auditActEnroll(t,e){return r.a.put("activity_user/"+e+"/audit",t)},ct=function loadTimeBankOrgs(t){return r.a.httpGql(i.cc,t)}},"274":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=void 0,o=void 0,a=function pageScrollTo(t){var e=t.scrollTop,n=t.duration,a=void 0===n?300:n,c=t.success,u=t.fail,l=t.complete;return new Promise(function(t,n){try{if(void 0===e)throw Error('"scrollTop" is required');var s=document.querySelector(".taro-tabbar__panel")||window;i||(i=s===window?function scrollFunc(t){if(void 0===t)return window.pageYOffset;window.scrollTo(0,t)}:function scrollFunc(t){if(void 0===t)return s.scrollTop;s.scrollTop=t});var p=i(),f=e-p,d=a/17,v=Object(r.g)(r.c,d);!function scroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=p+f*v(e);if(i(n),e<d)o&&clearTimeout(o),o=setTimeout(function(){scroll(e+1)},17);else{var r={"errMsg":"pageScrollTo:ok"};c&&c(r),l&&l(),t(r)}}()}catch(t){var y={"errMsg":"pageScrollTo:fail "+t.message};u&&u(y),l&&l(),n(y)}})}},"338":function(t,e,n){"use strict";n(258);var r=n(2),i=n(259),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}();var c=function(t){function RichText(){return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,RichText),function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(RichText.__proto__||Object.getPrototypeOf(RichText)).apply(this,arguments))}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(RichText,r["l"].Component),a(RichText,[{"key":"renderNodes","value":function renderNodes(t){if("text"===t.type)return r.l.createElement("span",{},t.text);var e=this.renderChildrens(t.children),n={"className":"","style":""};if(t.hasOwnProperty("attrs"))for(var i in t.attrs)"class"===i?n.className=t.attrs[i]||"":n[i]=t.attrs[i]||"";return r.l.createElement(t.name,n,e)}},{"key":"renderChildrens","value":function renderChildrens(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==e.length)return e.map(function(e,n){return"text"===e.type?e.text:t.renderNodes(e)})}},{"key":"render","value":function render(){var t=this,e=this.props,n=e.nodes,a=e.className,c=function _objectWithoutProperties(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(e,["nodes","className"]);return Array.isArray(n)?r.l.createElement("div",o({"className":a},Object(i.a)(this.props,["nodes","className"]),c),n.map(function(e,n){return t.renderNodes(e)})):r.l.createElement("div",o({"className":a},Object(i.a)(this.props,["className"]),c,{"dangerouslySetInnerHTML":{"__html":n}}))}}]),RichText}();e.a=c},"648":function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return O});var r=n(4),i=n.n(r),o=n(2),a=n(6),c=n(274),u=n(598),l=n(599),s=n(338),p=n(10),f=n(29),d=n(8),v=n(14),y=n(264),m=n(30),h=n(270),g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}(),w=function get(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:get(i,e,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _asyncToGenerator(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function step(r,i){try{var o=e[r](i),a=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(a).then(function(t){step("next",t)},function(t){step("throw",t)});t(a)}("next")})}}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var O=function(t){function FeatureArticle(){var t,e,n;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FeatureArticle);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n=_possibleConstructorReturn(this,(t=FeatureArticle.__proto__||Object.getPrototypeOf(FeatureArticle)).call.apply(t,[this].concat(i))),n.config={},_possibleConstructorReturn(n,e)}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FeatureArticle,a["a"].Component),_(FeatureArticle,[{"key":"render","value":function render(){var t=this,e=a.a.useState(!1),n=b(e,2),r=n[0],_=n[1],w=a.a.useState([]),O=b(w,2),E=O[0],A=O[1],T=a.a.useState({}),j=b(T,2),k=j[0],P=j[1],N=a.a.useState({}),x=b(N,2),C=x[0],q=x[1],G=a.a.useState(!0),R=b(G,2),S=(R[0],R[1]),F=a.a.useRouter().params,D=a.a.useRef(0);a.a.usePageScroll(function(t){D.current=t.scrollTop;var e=t.scrollTop;_(e>500)});var B,H,L=(B=_asyncToGenerator(i.a.mark(function _callee(e){var n,r,o,a,c,u,l,s,p,f,y,m,g,b,_,w,O,T=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return T&&(e.page=1),n=Object(d.a)("defaultAcitivyPic"),r=Object(d.a)("defaultTeamLogo"),t.next=5,Object(h.P)(e);case 5:for(o=t.sent,a=o.navigation_activitys.edges||[],c=o.navigation_activitys.totalCount||0,u=!0,e.page*e.rows>=c&&(u=!1),l=[],s=0;s<a.length;s++)p=a[s],(f=p.node.activity||null)&&((f.file_uploads||[]).length>0?(y=f.file_uploads[0].url,f.picture=Object(v.w)(y)):(m="ALL",f.picture=""+n[m]),(g=f.start_time||"").length>9&&(g=g.substring(0,10),f.startTime=g),(b=f.group)&&(_=b.simple_name||b.name||"",b.name=_,f.group=b),(w=f.team)&&(w.logos&&w.logos.length>0?(O=w.logos[0].url,f.teamLogo=Object(v.w)(O)):f.teamLogo=""+r),l.push(f));T?(A(l),S(u)):(A([].concat(_toConsumableArray(E),l)),S(u));case 13:case"end":return t.stop()}},_callee,t)})),function loadNavigationActivitys(t){return B.apply(this,arguments)}),U=(H=_asyncToGenerator(i.a.mark(function _callee2(){var e,n,r,o,a,c,u,l;return i.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return Object(f.a)(!0),e=F.id,t.next=4,Object(m.j)({"id":e});case 4:if(n=t.sent,r=n.navigation_bar,o=r.content,a=F.title,r.pics.length>0)for(c=0;c<r.pics.length;c++)r.pics[c].url=Object(v.w)(r.pics[c].url);o=(o=o.replace(new RegExp("/ueditor/ue","g"),p.c+"/ueditor/ue")).replace(new RegExp("<img ","g"),"<img class='img-width' "),u=r&&r.pics&&r.pics[0]&&r.pics[0].url?r.pics[0].url:"",console.log(u),q({"name":a,"id":e,"picture":u,"introduction":o}),L(l={"navigation_id":e,"page":1,"rows":10},!0),P(l),Object(f.a)(!1);case 19:case"end":return t.stop()}},_callee2,t)})),function onload(){return H.apply(this,arguments)}),M=a.a.useRef(function(){}),I=a.a.useRef(0);a.a.useReachBottom(_asyncToGenerator(i.a.mark(function _callee3(){var e;return i.a.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:if(!t.pageHide){n.next=2;break}return n.abrupt("return");case 2:if(!((e=document.documentElement.scrollTop||document.body.scrollTop)<I.current)){n.next=8;break}return I.current=e,n.abrupt("return");case 8:I.current=e;case 9:M.current()&&$();case 11:case"end":return n.stop()}},_callee3,t)})));var Y,$=(Y=_asyncToGenerator(i.a.mark(function _callee4(){return i.a.wrap(function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return k.page+=1,P(function(t){return g({},t,k)}),t.next=4,L(k);case 4:case"end":return t.stop()}},_callee4,t)})),function reachBottom(){return Y.apply(this,arguments)});a.a.useDidShow(function(){Object(c.a)({"scrollTop":z.current,"duration":100}),Object(v.L)("专题文章"),t.pageHide=!1,M.current=Object(v.Q)()});var z=a.a.useRef(0);a.a.useDidHide(function(){z.current=D.current,t.pageHide=!0}),a.a.useEffect(function(){U()},[]);return o.l.createElement(u.a,null,o.l.createElement(u.a,{"className":"body"},o.l.createElement(u.a,{"className":"content","style":"padding: 0;"},o.l.createElement(u.a,{"className":"activity-view"},o.l.createElement(u.a,{"className":"activity-view-pic"},o.l.createElement(l.a,{"src":C.picture,"style":"width:100%","mode":"widthFix","className":"image"})),o.l.createElement(u.a,{"className":"content content-nav","style":"padding: 0;"},o.l.createElement(u.a,{"className":"notice-view"},o.l.createElement(u.a,{"className":"notice-view-content"},o.l.createElement(u.a,{"className":"grid10 bold padding-t-b font18 text-black "},C.name),o.l.createElement(u.a,{"className":"notice-view-box font14"},o.l.createElement(s.a,{"space":"nbsp","nodes":C.introduction}))))),E.length>0&&o.l.createElement(u.a,{"className":"container-content"},o.l.createElement(u.a,{"className":"padding-top-down clear"},o.l.createElement(u.a,{"className":" bold left"},"相关活动")),E.map(function(t){return o.l.createElement(u.a,{"key":t.id,"className":"main-con margin-b clear","onClick":function onClick(){return function toActivityDetail(t){if(t){var e="/pages/index/index",n=t.id,r="/activityPages/pages/activity_detail?id="+n+"&backUrl="+e;if("CYCLE"===t.activityType)return r="/activityPages/pages/regular_activity?id="+n+"&backUrl="+e,void Object(v.B)(r);if("CYCLE"===t.activity_type)return r="/activityPages/pages/regular_activity_detail?id="+n+"&backUrl="+e,void Object(v.B)(r);if("NOTPASS"===t.status)r="/activityPages/pages/activity_edit?id="+n;else if(["TOAUDITED","CANCLED"].indexOf(t.status)>-1)return;Object(v.B)(r)}}(t)}},o.l.createElement(u.a,{"className":"detail-tags"},o.l.createElement(u.a,{"className":"detail-tags-txt"},t.group?t.group.name:"")),o.l.createElement(u.a,{"className":"user-name-sym padding-t-b margin-t"},o.l.createElement(u.a,{"className":"head"},o.l.createElement(l.a,{"className":"img","src":t.teamLogo})),o.l.createElement(u.a,{"className":"overflow"},t.organizer_name)),o.l.createElement(u.a,{"className":"activity-sym clear"},o.l.createElement(u.a,{"className":"cover"},o.l.createElement(u.a,{"className":"cover-tags"},"PUBLISHED"===t.status&&o.l.createElement(u.a,{"className":"cover-tags-txt"},"准备中"),"UNDERWAY"===t.status&&o.l.createElement(u.a,{"className":"cover-tags-txt"},"进行中")),o.l.createElement(l.a,{"className":"img","src":t.picture})),o.l.createElement(u.a,{"className":"detail "},o.l.createElement(u.a,{"className":"title control-2line clear","style":"-webkit-box-orient: vertical;"},t.name),o.l.createElement(u.a,{"className":"date secondry-text"},t.startTime))))}))))),r&&o.l.createElement(y.a,null))}},{"key":"componentDidMount","value":function componentDidMount(){w(FeatureArticle.prototype.__proto__||Object.getPrototypeOf(FeatureArticle.prototype),"componentDidMount",this)&&w(FeatureArticle.prototype.__proto__||Object.getPrototypeOf(FeatureArticle.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){w(FeatureArticle.prototype.__proto__||Object.getPrototypeOf(FeatureArticle.prototype),"componentDidShow",this)&&w(FeatureArticle.prototype.__proto__||Object.getPrototypeOf(FeatureArticle.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){w(FeatureArticle.prototype.__proto__||Object.getPrototypeOf(FeatureArticle.prototype),"componentDidHide",this)&&w(FeatureArticle.prototype.__proto__||Object.getPrototypeOf(FeatureArticle.prototype),"componentDidHide",this).call(this)}}]),FeatureArticle}();O.config={}}}]);