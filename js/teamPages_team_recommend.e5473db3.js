(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"263":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),o=n(273),a=n(6),c=n(596),u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function BackTop(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BackTop),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(BackTop.__proto__||Object.getPrototypeOf(BackTop)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(BackTop,a["a"].Component),u(BackTop,[{"key":"render","value":function render(){return r.l.createElement(c.a,null,r.l.createElement(c.a,{"style":"bottom:15%;","onClick":function onClick(){return function toTop(){Object(o.a)({"scrollTop":0,"duration":500})}()},"className":"back-top"}))}}]),BackTop}();i.options={"addGlobalClass":!0}},"266":function(e,t,n){"use strict";n.d(t,"z",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"F",function(){return i}),n.d(t,"D",function(){return l}),n.d(t,"s",function(){return s}),n.d(t,"t",function(){return f}),n.d(t,"o",function(){return p}),n.d(t,"e",function(){return m}),n.d(t,"B",function(){return d}),n.d(t,"p",function(){return b}),n.d(t,"r",function(){return y}),n.d(t,"x",function(){return _}),n.d(t,"I",function(){return v}),n.d(t,"d",function(){return g}),n.d(t,"m",function(){return T}),n.d(t,"N",function(){return A}),n.d(t,"J",function(){return w}),n.d(t,"g",function(){return O}),n.d(t,"v",function(){return E}),n.d(t,"w",function(){return k}),n.d(t,"C",function(){return j}),n.d(t,"l",function(){return R}),n.d(t,"b",function(){return C}),n.d(t,"h",function(){return x}),n.d(t,"M",function(){return P}),n.d(t,"H",function(){return G}),n.d(t,"u",function(){return S}),n.d(t,"j",function(){return N}),n.d(t,"y",function(){return D}),n.d(t,"O",function(){return I}),n.d(t,"S",function(){return L}),n.d(t,"A",function(){return U}),n.d(t,"n",function(){return q}),n.d(t,"P",function(){return B}),n.d(t,"Q",function(){return M}),n.d(t,"a",function(){return F}),n.d(t,"K",function(){return J}),n.d(t,"i",function(){return H}),n.d(t,"E",function(){return V}),n.d(t,"L",function(){return z}),n.d(t,"G",function(){return Q}),n.d(t,"k",function(){return h}),n.d(t,"R",function(){return W}),n.d(t,"q",function(){return Y});var r=n(3),o=n(5),a=function loadTeams(e){return r.a.httpGql(o.ac,e,!0)},c=function addTeamAlbum(e){return r.a.post("team_album",e)},u=function changeTeamAlbum(e){var t=e.id;return delete e.id,r.a.put("team_album/"+t,e)},i=function teamAlbumEvalLike(e){var t=e.id;return delete e.id,r.a.put("team_album_eval/isLike/"+t,e)},l=function saveEvalValue(e){return r.a.post("team_album_eval",e)},s=function getTeamAlbum(e){return r.a.httpGql(o.Pb,e,!0)},f=function getTeamAlbumEval(e){return r.a.httpGql(o.Qb,e,!0)},p=function getEvalStatus(e){return r.a.httpGql(o.S,e,!0)},m=function applyUnfrozen(e){return r.a.post("team/applyUnfrozen",e)},d=function recordInfo(e){return r.a.post("record_information",e)},b=function getFillingInfo(e){return r.a.httpGql(o.a,e)},h=function editFillingInfo(e,t){return r.a.put("record_information/"+e,t)},y=function getTeam(e){return r.a.httpGql(o.Nb,e,!0)},_=function joinTeam(e){return r.a.post("team_user",e)},v=function teamLable(e){return r.a.httpGql(o.Ub,e)},g=function addTeamLable(e){return r.a.post("team_lable",e)},T=function eidtTeamLable(e){var t=e.id;return delete e.id,r.a.put("team_lable/"+t,e)},A=function teamUserMsg(e){return r.a.httpGql(o.Xb,e)},w=function teamLableUsers(e){return r.a.httpGql(o.Vb,e)},O=function deleteLableUsers(e){return r.a.delete("team_lable_user/batch",e)},E=function getTeamUsers(e){return r.a.httpGql(o.Yb,e)},k=function joinLableTeam(e){return r.a.post("team_lable_user",e)},j=function removeLableUser(e){return r.a.delete("team_lable_user/"+e.id)},R=function editTeamMsg(e){return r.a.put("team/"+e.id,e)},C=function addTeam(e){return r.a.post("team",e)},x=function deletePic(e){return r.a.delete("file-upload/"+e.id)},P=function teamUserApply(e){return r.a.httpGql(o.mc,e)},G=function teamCyclActivities(e){return r.a.httpGql(o.Tb,e,!0)},S=function getTeamAlbums(e){return r.a.httpGql(o.Sb,e)},N=function disLikeAct(e){return r.a.put("activity_user/"+e.id+"/dislike",e)},D=function likeAct(e){return r.a.put("activity_user/"+e.id+"/like",e)},I=function teamWechatUsers(e){return r.a.httpGql(o.Zb,e,!0)},L=function writtenOffTeam(e){return r.a.put("team/"+e.id+"/writtenOff")},U=function logoutTeam(e){return r.a.delete("team_user",e)},q=function frozenTeam(e){return r.a.put("team/"+e+"/frozen")},B=function unfrozenTeam(e){return r.a.put("team/"+e+"/unfrozen")},M=function userApplyAudit(e){var t=e.id;return delete e.id,r.a.put("team_user/"+t+"/apply",e)},F=function activeTeams(e){return r.a.httpGql(o.b,e,!0)},J=function teamLables(e){return r.a.httpGql(o.Wb,e)},H=function deleteTeamLable(e){return r.a.delete("team_lable/"+e)},V=function setTeamRole(e){return r.a.put("team_user/"+e.id+"/setRole",e)},z=function teamTeransfer(e){return r.a.put("team/"+e.id+"/changeRole",e)},Q=function teamApplyDetail(e){return r.a.httpGql(o.lc,e)},W=function userCompanys(e){return r.a.httpGql(o.ec,e)},Y=function getMyCompanys(e){return r.a.httpGql(o.ib,e)}},"273":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=void 0,a=void 0,c=function pageScrollTo(e){var t=e.scrollTop,n=e.duration,c=void 0===n?300:n,u=e.success,i=e.fail,l=e.complete;return new Promise(function(e,n){try{if(void 0===t)throw Error('"scrollTop" is required');var s=document.querySelector(".taro-tabbar__panel")||window;o||(o=s===window?function scrollFunc(e){if(void 0===e)return window.pageYOffset;window.scrollTo(0,e)}:function scrollFunc(e){if(void 0===e)return s.scrollTop;s.scrollTop=e});var f=o(),p=t-f,m=c/17,d=Object(r.g)(r.c,m);!function scroll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=f+p*d(t);if(o(n),t<m)a&&clearTimeout(a),a=setTimeout(function(){scroll(t+1)},17);else{var r={"errMsg":"pageScrollTo:ok"};u&&u(r),l&&l(),e(r)}}()}catch(e){var b={"errMsg":"pageScrollTo:fail "+e.message};i&&i(b),l&&l(),n(b)}})}},"303":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNC8wMS8xOTLpLfMAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAQ0lEQVQokaWOsREAIAgDA/tmGRbWykIUUaTiSP4PMbOGj1GSUoVJio6lAgOA+sMLPAluJb6jWSHLFkFUjMRbgQdOX3WFZxS1gbyl/wAAAABJRU5ErkJggg=="},"320":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(6),o=n(2),a=n(596),c=n(14),u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function TeamItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TeamItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(TeamItem.__proto__||Object.getPrototypeOf(TeamItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(TeamItem,r["a"].Component),u(TeamItem,[{"key":"render","value":function render(){var e=this.props,t=e.url,n=e.teamList;return o.l.createElement(a.a,null,o.l.createElement(a.a,{"className":"main-con team-photo-box"},!!n&&n.length>0&&n.map(function(e){return o.l.createElement(a.a,{"className":"team-photo-content","key":e.id},o.l.createElement(a.a,{"className":"clear","onClick":function onClick(){return function toDetail(e){if(t)Object(c.B)(t);else{var n="/teamPages/pages/team_index?id="+e;Object(c.B)(n)}}(e.id)}},o.l.createElement(a.a,{"className":"team-photo-pic left","style":"background-image:url("+e.picture+"); position:relative;"}),o.l.createElement(a.a,{"className":"team-photo-info right"},o.l.createElement(a.a,{"className":"team-photo-name overflow"},e.team_name),o.l.createElement(a.a,{"className":"second-txt"},e.group?e.group.simple_name||e.group.simple_name:""))))})))}}]),TeamItem}();i.options={"addGlobalClass":!0}},"669":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var r=n(4),o=n.n(r),a=n(2),c=n(6),u=n(273),i=n(596),l=n(597),s=n(282),f=n(29),p=n(266),m=n(8),d=n(14),b=n(30),h=n(270),y=n(320),_=n(263),v=n(287),g=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),A=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function TeamRecommend(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TeamRecommend);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=TeamRecommend.__proto__||Object.getPrototypeOf(TeamRecommend)).call.apply(e,[this].concat(o))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(TeamRecommend,c["a"].Component),T(TeamRecommend,[{"key":"render","value":function render(){var e=this,t=c.a.useState([]),r=g(t,2),T=r[0],A=r[1],w=c.a.useState(""),O=g(w,2),E=O[0],k=O[1],j=c.a.useState({"id":"","name":"珠海市"}),R=g(j,2),C=R[0],x=R[1],P=c.a.useState(!1),G=g(P,2),S=G[0],N=G[1],D=c.a.useState([]),I=g(D,2),L=I[0],U=I[1],q=c.a.useState(!1),B=g(q,2),M=B[0],F=B[1],J=c.a.useState({"uid":"","page":1,"rows":10,"sort":"","order":"","status":["RECRUITING","RECRUITED","AUDITED"]}),H=g(J,2),V=H[0],z=H[1],Q=Object(d.u)(),W=0;Object(d.z)(0).then(function(e){W=e});var Y,Z,$,X,K,ee=(Y=_asyncToGenerator(o.a.mark(function _callee(t){var n,r,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VOLUNTEER";return o.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)({"uid":t,"role_id":[c]});case 2:return n=e.sent,r=n.aTeams||[],a=[],r.forEach(function(e){var t=e.id;t&&a.push(t)}),e.abrupt("return",a);case 7:case"end":return e.stop()}},_callee,e)})),function loadJoinedTeams(e){return Y.apply(this,arguments)}),te=(Z=_asyncToGenerator(o.a.mark(function _callee2(){var t,n,r,a,c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return c&&(V.page=1,z(V),A([])),e.next=3,Object(p.a)(V);case 3:return t=e.sent,n=t.activeTeam||[],e.next=7,ee(V.uid);case 7:r=e.sent,a=[],n.forEach(function(e){var t=e;if(t){if((t.logos||[]).length>0){var n=t.logos[0].url;t.picture=Object(d.w)(n)}else t.picture=""+Object(m.a)("defaultPic").TEAM_LOGO;var o=t.id;t.joined=r.indexOf(o)>=0,a.push(t)}}),A(function(e){return[].concat(_toConsumableArray(e),a)});case 11:case"end":return e.stop()}},_callee2,e)})),function loadData(){return Z.apply(this,arguments)}),ne=($=_asyncToGenerator(o.a.mark(function _callee3(){var t,n,r,a,c;return o.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if(0===W){e.next=3;break}return Object(d.v)(W,{"nextUrl":"/pages/index/index"}),e.abrupt("return");case 3:return Object(f.a)(!0),t=Q.uid,V.uid=t,z(V),e.next=9,Object(d.n)();case 9:return n=e.sent,e.next=12,Object(d.p)();case 12:return r=e.sent,C.id=r.org_id,C.name=r.org_name,x(C),a=[],n.forEach(function(e){e.id&&a.push(e.id)}),e.next=20,Object(d.l)();case 20:c=e.sent,U(Object(h.e)(c,"TOWN")),V.city_id=r.org_id,V.org_id=a,z(V),te(),Object(f.a)(!1);case 27:case"end":return e.stop()}},_callee3,e)})),function onload(){return $.apply(this,arguments)}),re=(X=_asyncToGenerator(o.a.mark(function _callee4(){var t;return o.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return t=E,A([]),V.page=1,V.team_name=t||"",z(V),e.next=7,te(!0);case 7:case"end":return e.stop()}},_callee4,e)})),function search(){return X.apply(this,arguments)}),oe=(K=_asyncToGenerator(o.a.mark(function _callee5(t){var n,r,a,c,u,i;return o.a.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:n=t.valueList,(r=n.length)>0&&(a=n[r-1].value,c=a.split("="),Array.isArray(c)&&c.length>0&&(u=c[0],i=c[1],C.id=u,C.name=i,x(C),V.city_id=u)),V.org_id=[],z(V),te(!0);case 6:case"end":return e.stop()}},_callee5,e)})),function cascaderChange(e){return K.apply(this,arguments)});c.a.useEffect(function(){ne()},[]);var ae=c.a.useRef(0);c.a.usePageScroll(function(e){ae.current=e.scrollTop;var t=e.scrollTop;F(t>500)});var ce=c.a.useRef(function(){}),ue=c.a.useRef(0);c.a.useReachBottom(_asyncToGenerator(o.a.mark(function _callee6(){var t;return o.a.wrap(function _callee6$(n){for(;;)switch(n.prev=n.next){case 0:if(!e.pageHide){n.next=2;break}return n.abrupt("return");case 2:if(!((t=document.documentElement.scrollTop||document.body.scrollTop)<ue.current)){n.next=8;break}return ue.current=t,n.abrupt("return");case 8:ue.current=t;case 9:ce.current()&&ie();case 11:case"end":return n.stop()}},_callee6,e)})));var ie=function reachBottom(){V.page+=1,z(V),te()};c.a.useDidShow(function(){Object(u.a)({"scrollTop":le.current,"duration":100}),Object(d.L)("更多团队"),e.pageHide=!1,ce.current=Object(d.Q)()});var le=c.a.useRef(0);return c.a.useDidHide(function(){le.current=ae.current,e.pageHide=!0}),a.l.createElement(i.a,{"className":"content"},a.l.createElement(i.a,{"className":"new-head-search clear"},a.l.createElement(i.a,{"className":"search-filter left","onClick":function onClick(){return function openCascader(){N(!0)}()}},a.l.createElement(i.a,{"className":"search-filter-main"},a.l.createElement(i.a,{"className":"search-filter-txt overflow"},C.name||"珠海市"),a.l.createElement(l.a,{"src":n(303),"style":"width:9.8px;height:4.89px;","className":"image"}))),a.l.createElement(v.a,{"isOpened":S,"dataSource":L,"label":"label","onClose":function onClose(e){return function closeCascader(e){oe(e),N(!1)}(e)}}),a.l.createElement(s.a,{"onInput":function inputChange(e){var t=e.detail.value;k(t)}.bind(this),"className":"input-search left","style":"border-radius: 0 20px 20px 0;","placeholder":"输入团队名称搜索","value":E}),a.l.createElement(i.a,{"className":"search-btn left","onClick":function onClick(){return re()}})),a.l.createElement(i.a,{"className":"box"},a.l.createElement(i.a,{"className":"community-page-list"},a.l.createElement(i.a,{"className":"box-main my-integral"},a.l.createElement(i.a,{"className":"tabs-main tabs-community-team","style":"display:block;"},T&&T.length>0?a.l.createElement(i.a,{"className":"i-community-team"},a.l.createElement(y.a,{"teamList":T})):a.l.createElement(i.a,{"className":"i-class i-load-more i-load-more-line"},a.l.createElement(i.a,{"className":"i-load-more-tip"},a.l.createElement(i.a,null,"暂无数据"))))))),M&&a.l.createElement(_.a,null))}},{"key":"componentDidMount","value":function componentDidMount(){A(TeamRecommend.prototype.__proto__||Object.getPrototypeOf(TeamRecommend.prototype),"componentDidMount",this)&&A(TeamRecommend.prototype.__proto__||Object.getPrototypeOf(TeamRecommend.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){A(TeamRecommend.prototype.__proto__||Object.getPrototypeOf(TeamRecommend.prototype),"componentDidShow",this)&&A(TeamRecommend.prototype.__proto__||Object.getPrototypeOf(TeamRecommend.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){A(TeamRecommend.prototype.__proto__||Object.getPrototypeOf(TeamRecommend.prototype),"componentDidHide",this)&&A(TeamRecommend.prototype.__proto__||Object.getPrototypeOf(TeamRecommend.prototype),"componentDidHide",this).call(this)}}]),TeamRecommend}();w.config={}}}]);