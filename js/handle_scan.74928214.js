(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"603":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});var a=n(4),r=n.n(a),o=n(2),c=n(6),i=n(254),s=n(252),u=n(25),p=n(598),l=n(14),y=n(29),f=n(19),d=n(8),g=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),b=function get(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(a,r){try{var o=t[a](r),c=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function HandleScan(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HandleScan);for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=n=_possibleConstructorReturn(this,(e=HandleScan.__proto__||Object.getPrototypeOf(HandleScan)).call.apply(e,[this].concat(r))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(HandleScan,c["a"].Component),g(HandleScan,[{"key":"render","value":function render(){var e,t,n=this,a=c.a.useRouter(),g=(a.params,function getQueryString(e){return Object.entries(e).map(function(e){return e[0]+"="+e[1]}).join("&")}),b=(e=_asyncToGenerator(r.a.mark(function _callee(){var e,t,a,o,c,u;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e={},n.prev=1,n.next=4,Object(l.m)();case 4:if(t=n.sent,console.log("loginMsg",t),t){n.next=8;break}return n.abrupt("return",!1);case 8:e.code=t.code,n.next=14;break;case 11:return n.prev=11,n.t0=n.catch(1),n.abrupt("return",!1);case 14:return e.type=2,n.next=17,Object(i.a)();case 17:return a=n.sent,o=a,e.sysInfo=o,n.next=22,f.a.login(e);case 22:if(c=n.sent,0!=c.code){n.next=41;break}return Object(d.b)("userStatus",0),Object(d.b)("token",c.token),u={"uid":c.uid,"username":c.username||"","orgName":c.org_name||""},n.next=30,Object(l.O)(c.uid);case 30:return n.next=32,Object(l.N)({"uid":c.uid,"page":1,"rows":100});case 32:return n.next=34,Object(l.M)({"uid":c.uid});case 34:return Object(d.b)("userInfo",u),n.next=37,Object(s.e)({"key":"token","data":c.token});case 37:return n.next=39,Object(s.e)({"key":"user","data":u});case 39:n.next=42;break;case 41:return n.abrupt("return",!1);case 42:return n.abrupt("return",!0);case 43:case"end":return n.stop()}},_callee,n,[[1,11]])})),function reLogin(){return e.apply(this,arguments)}),_=(t=_asyncToGenerator(r.a.mark(function _callee2(){var e,t,o,c,i,s;return r.a.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return Object(y.a)(!0),e={"activityDetail":"/activityPages/pages/activity_detail?back=1&","activitySignup":"/activityPages/pages/activity_detail?back=1&","joinTeam":"/teamPages/pages/team_index?show=0&","likeActivity":"/activityPages/pages/activity_detail?type=0&","likeVolunteer":"/activityPages/pages/report_edit?type=1&","checkIn":"/activityPages/pages/activity_detail?back=1&","signOff":"/activityPages/pages/activity_detail?back=1&","targetRecruitment":"/teamPages/pages/join_team?","helpExchange":"/mallPages/pages/help_exchange?","scanCheck":"/activityPages/pages/scan_check?","regularActivity":"/activityPages/pages/regular_activity?back=1&","regularActivityDetail":"/activityPages/pages/regular_activity_detail?back=1&","communityStyle":"/communityPages/pages/community_style?back=1&pageType=setCur&","login":"/pages/login/get_wechat_phone?","familyRecruitment":"/familyPages/pages/family_manage?"},n.next=4,b();case 4:if(t=n.sent,o=Object(d.a)("registerUrl"),c=a.params.type,i=g(a.params),s="/pages/index/index",!e.hasOwnProperty(c)){n.next=15;break}s=""+(s=e[c])+i+"&open=1",t?Object(l.G)(s):(Object(d.b)("scanNextUrl",s),Object(l.B)(o)),n.next=18;break;case 15:return n.next=17,Object(u.e)({"title":"提示","content":"无效的二维码","showCancel":!1});case 17:Object(l.G)("/pages/index/index");case 18:Object(y.a)(!1);case 19:case"end":return n.stop()}},_callee2,n)})),function onload(){return t.apply(this,arguments)});return c.a.useEffect(function(){_()},[]),o.l.createElement(p.a,null)}},{"key":"componentDidMount","value":function componentDidMount(){b(HandleScan.prototype.__proto__||Object.getPrototypeOf(HandleScan.prototype),"componentDidMount",this)&&b(HandleScan.prototype.__proto__||Object.getPrototypeOf(HandleScan.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){b(HandleScan.prototype.__proto__||Object.getPrototypeOf(HandleScan.prototype),"componentDidShow",this)&&b(HandleScan.prototype.__proto__||Object.getPrototypeOf(HandleScan.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){b(HandleScan.prototype.__proto__||Object.getPrototypeOf(HandleScan.prototype),"componentDidHide",this)&&b(HandleScan.prototype.__proto__||Object.getPrototypeOf(HandleScan.prototype),"componentDidHide",this).call(this)}}]),HandleScan}();_.config={}}}]);