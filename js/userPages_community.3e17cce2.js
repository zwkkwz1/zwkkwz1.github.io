(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{"372":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAhCAYAAAC803lsAAACKUlEQVRYhc1XMUgcQRR9JxdBSAwcgYAWQbBIYacGJL2gkC4KEgvFVEewOEhjc7eBNAdXiByoWAhnmU6LkMZOkYCd9R0IMV00zSGoP/zLX/LdzOzM5NhwD4adnf/m/be7M5/ZHBEhAC8AzAKoOKbkADwGcOmSjqKoc+3z9FAEwI5PAJSlbwPH7gD8kH7VJ4HLSEHE6vKUcRuT8ZLiPpOxiwT3vYw/TUuUdzwZYwRAKxE7kyTMqSUeLPm2mDcE4Lu6/wu2N7KiJiVNJJPoZvtk35SBtyFGtgDcphjoBpumubZPk3csyG5gzOm7azJHzxvZyzBnI8TIG9s2M2AewLQnlzUXjREu8URUIKId+oMnMm5rJbKjzzH3uZr5hYgeViqVjhGNhkNE802xgsQOPXQaSusGKaKmturJ99bkt8Hk0F2z7rl2XoXWoay270HohBAjr0PFQxBi5LpXjOxn6OOf1sgjD049ayN8CvvpwSsGVObfIKKmKiznHnu/JdwFQ6wssdGAwsho6lP8FIAj6c8B+JTiPycHZFssDSV1vHwZRVEnpz6kHCsRcgi64mmomeba1shyRic01vxgCtiM7GZgIkY5xMh/R88b4W/ZziBf27b2bEbGAQx4im8AmPDksuZMiJFTubL7NQsn/sl+B+Cr9Jcs3Kp6E59NhLR/X11TPib+a+Nrsh7w+DaAfrkfBHBl4d6Dz2JlgUmppJzIZiIee6B4bGLYWfwA/AKXaRJWD2nf7wAAAABJRU5ErkJggg=="},"683":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var o=n(4),r=n.n(o),a=n(2),c=n(6),i=n(598),u=n(599),s=n(18),l=n(14),m=n(29),p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&i.return&&i.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),f=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function Community(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Community);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=Community.__proto__||Object.getPrototypeOf(Community)).call.apply(e,[this].concat(r))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Community,c["a"].Component),d(Community,[{"key":"render","value":function render(){var e,t,o,d,f,y=this,b=Object(l.u)(),g=c.a.useState([]),h=p(g,2),_=h[0],O=h[1],w=c.a.useState([]),v=p(w,2),j=v[0],C=v[1],k=c.a.useState({}),A=p(k,2),E=A[0],x=A[1],P=function turnToDetail(e){var t=e.id,n=e.simple_name||e.name;Object(l.B)("/communityPages/pages/community_style?id="+t+"&org_name="+n)},N=function turnToSet(e){var t=b.org_id||"";Object(l.B)("/communityPages/pages/community_recommend?redirectUrl=/userPages/pages/community&type=myResidents&orgId="+t)},D=function turnToJoin(e){Object(l.B)("/communityPages/pages/community_recommend?redirectUrl=/userPages/pages/community")},S=function updateDataStatus(e,t,n){return e.filter(function(e,o){return o===t&&(e.joined=n),!0})},J=(e=_asyncToGenerator(r.a.mark(function _callee(e,t){var n,o,a;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(e!==b.org_id){r.next=3;break}return Object(m.c)("该机构是当前归属机构，不能取消关注"),r.abrupt("return");case 3:return n=b.uid,o={"uid":n,"org_id":e},r.next=7,Object(s.d)(o);case 7:0===(a=r.sent).code?(Object(m.c)("取消关注成功"),O(S(_,t,!1)),Object(s.o)({"page":1,"rows":100,"uid":b.uid})):Object(m.c)(a.data);case 9:case"end":return r.stop()}},_callee,y)})),t=_asyncToGenerator(r.a.mark(function _callee2(e,t){var n,o,a;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return n=b.uid,o={"uid":n,"org_id":e},r.next=4,Object(s.d)(o);case 4:0===(a=r.sent).code?(Object(m.c)("取消关注成功"),C(S(j,t,!1)),Object(s.o)({"page":1,"rows":100,"uid":b.uid})):Object(m.c)(a.data);case 6:case"end":return r.stop()}},_callee2,y)})),o=_asyncToGenerator(r.a.mark(function _callee3(e,t){var n,o,a;return r.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return n=b.uid,o={"uid":n,"org_id":e},r.next=4,Object(s.v)(o);case 4:0===(a=r.sent).code?(Object(m.c)("关注成功"),O(S(_,t,!0)),Object(s.o)({"page":1,"rows":100,"uid":b.uid})):(O(S(_,t,!0)),Object(m.c)(a.data));case 6:case"end":return r.stop()}},_callee3,y)})),d=_asyncToGenerator(r.a.mark(function _callee4(e,t){var n,o,a;return r.a.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return n=b.uid,o={"uid":n,"org_id":e},r.next=4,Object(s.v)(o);case 4:0===(a=r.sent).code?(Object(m.c)("关注成功"),C(S(j,t,!0)),Object(s.o)({"page":1,"rows":100,"uid":b.uid})):(C(S(j,t,!0)),Object(m.c)(a.data));case 6:case"end":return r.stop()}},_callee4,y)})),f=_asyncToGenerator(r.a.mark(function _callee5(){var e,t,n,o;return r.a.wrap(function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l.z)(0);case 2:if(0===(e=r.sent)){r.next=6;break}return Object(l.v)(e,{"nextUrl":"/userPages/pages/user_index"}),r.abrupt("return");case 6:Object(m.a)(!0),t=Object(l.u)(),n=Object(l.t)(),o=[],n.forEach(function(e){e.joined=!0,o.push(e)}),t.group&&t.group.logos&&(t.group.logos.length>0&&-1===t.group.logos[0].url.indexOf("https://")&&-1===t.group.logos[0].url.indexOf("http://")&&(t.group.logo=Object(l.w)(t.group.logos[0].url)),x(t.group)),O(o),Object(m.a)(!1);case 14:case"end":return r.stop()}},_callee5,y)})),function onload(){return f.apply(this,arguments)});return c.a.useDidShow(function(){Object(l.L)("我的机构"),J()}),a.l.createElement(i.a,{"className":"content"},a.l.createElement(i.a,{"className":"my-shequ"},a.l.createElement(i.a,{"className":"main-con margin no-padding"},a.l.createElement(i.a,{"className":"title-fixed"},"我归属的机构",a.l.createElement(u.a,{"className":"set-icon right","src":n(372),"onClick":function onClick(){return N()}})),E.id?a.l.createElement(i.a,{"className":"padding-l-r clear"},a.l.createElement(i.a,{"className":"list-h border-bottom","onClick":function onClick(){return P(E)}},a.l.createElement(i.a,{"className":"control-2line","style":"-webkit-box-orient: vertical;"},E.simple_name||E.name||""))):a.l.createElement(i.a,{"className":"con-box"},a.l.createElement(i.a,{"className":"set-btn","onClick":function onClick(){return N()}},"设置"))),a.l.createElement(i.a,{"className":"main-con margin no-padding"},a.l.createElement(i.a,{"className":"title-liked"},"我关注的机构",a.l.createElement(u.a,{"className":"set-icon right","src":n(372),"onClick":function onClick(){return D()}})),_&&_.length>0?_.map(function(e){return a.l.createElement(i.a,{"className":"padding-l-r clear"},a.l.createElement(i.a,{"className":"list-h border-bottom","key":e.id},a.l.createElement(i.a,{"className":"control-2line","style":"-webkit-box-orient: vertical;","onClick":function onClick(){return P(e)}},e.simple_name||e.name)))}):a.l.createElement(i.a,{"className":"con-box clear"},a.l.createElement(i.a,{"className":"set-btn","onClick":function onClick(){return D()}},"设置")))))}},{"key":"componentDidMount","value":function componentDidMount(){f(Community.prototype.__proto__||Object.getPrototypeOf(Community.prototype),"componentDidMount",this)&&f(Community.prototype.__proto__||Object.getPrototypeOf(Community.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){f(Community.prototype.__proto__||Object.getPrototypeOf(Community.prototype),"componentDidShow",this)&&f(Community.prototype.__proto__||Object.getPrototypeOf(Community.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){f(Community.prototype.__proto__||Object.getPrototypeOf(Community.prototype),"componentDidHide",this)&&f(Community.prototype.__proto__||Object.getPrototypeOf(Community.prototype),"componentDidHide",this).call(this)}}]),Community}();y.config={}}}]);