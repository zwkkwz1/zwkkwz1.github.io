(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{"264":function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(2),o=r(274),a=r(6),c=r(598),i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();var l=function(e){function BackTop(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BackTop),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(BackTop.__proto__||Object.getPrototypeOf(BackTop)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(BackTop,a["a"].Component),i(BackTop,[{"key":"render","value":function render(){return n.l.createElement(c.a,null,n.l.createElement(c.a,{"style":"bottom:15%;","onClick":function onClick(){return function toTop(){Object(o.a)({"scrollTop":0,"duration":500})}()},"className":"back-top"}))}}]),BackTop}();l.options={"addGlobalClass":!0}},"274":function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(0),o=void 0,a=void 0,c=function pageScrollTo(e){var t=e.scrollTop,r=e.duration,c=void 0===r?300:r,i=e.success,l=e.fail,s=e.complete;return new Promise(function(e,r){try{if(void 0===t)throw Error('"scrollTop" is required');var u=document.querySelector(".taro-tabbar__panel")||window;o||(o=u===window?function scrollFunc(e){if(void 0===e)return window.pageYOffset;window.scrollTo(0,e)}:function scrollFunc(e){if(void 0===e)return u.scrollTop;u.scrollTop=e});var p=o(),f=t-p,y=c/17,h=Object(n.g)(n.c,y);!function scroll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=p+f*h(t);if(o(r),t<y)a&&clearTimeout(a),a=setTimeout(function(){scroll(t+1)},17);else{var n={"errMsg":"pageScrollTo:ok"};i&&i(n),s&&s(),e(n)}}()}catch(e){var d={"errMsg":"pageScrollTo:fail "+e.message};l&&l(d),s&&s(),r(d)}})}},"379":function(e,t,r){"use strict";r(258);var n=r(2),o=r(259),a=r(260),c=r.n(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();var s={"switch":"switch","checkbox":"check"};var u=function(e){function Switch(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Switch);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Switch.__proto__||Object.getPrototypeOf(Switch)).apply(this,arguments));return e.state={"checked":e.props.checked},e.switchChange=e.switchChange.bind(e),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Switch,n["l"].Component),l(Switch,[{"key":"switchChange","value":function switchChange(e){var t=this.props.onChange;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.checked}}),t&&t(e),this.setState({"checked":e.target.checked})}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){e.hasOwnProperty("checked")&&this.setState({"checked":e.checked})}},{"key":"render","value":function render(){var e=this.props,t=e.type,r=void 0===t?"switch":t,a=e.className,l=e.color,u=c()(function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{"value":r,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=r,e}({},"weui-"+function parseType(e){if(!s[e])throw new Error("unexpected type");return s[e]}(r),!0),a),p=void 0;return p=this.state.checked?{"borderColor":l||"04BE02","backgroundColor":l||"04BE02"}:"",n.l.createElement("input",i({},Object(o.a)(this.props,["className","checked","onChange"]),{"className":u,"checked":this.state.checked,"type":"checkbox","onChange":this.switchChange,"style":p}))}}]),Switch}();t.a=u},"697":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return v});var n=r(4),o=r.n(n),a=r(2),c=r(6),i=r(274),l=r(598),s=r(379),u=r(14),p=r(29),f=r(18),y=r(264),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),m=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,r)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(r):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var a=t[n](o),c=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function MyFollow(){var e,t,r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MyFollow);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=r=_possibleConstructorReturn(this,(e=MyFollow.__proto__||Object.getPrototypeOf(MyFollow)).call.apply(e,[this].concat(o))),r.config={},_possibleConstructorReturn(r,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MyFollow,c["a"].Component),b(MyFollow,[{"key":"render","value":function render(){var e=this,t={"activity":"专题活动","cycle_activity":"日常活动","team":"团队"},r=c.a.useState(!1),n=d(r,2),b=n[0],m=n[1],v=c.a.useState([]),w=d(v,2),_=w[0],g=w[1],O=c.a.useState({"page":1,"rows":10,"uid":"","type":["activity","cycle_activity"]}),k=d(O,2),j=k[0],P=k[1],E=c.a.useState(!0),T=d(E,2),C=T[0],S=T[1],M=Object(u.u)(),x=0;Object(u.z)(0).then(function(e){x=e});var F,N,D=(F=_asyncToGenerator(o.a.mark(function _callee(t,r){var n,a;return o.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return n="need_send",r.detail.value||(n="not_send"),e.next=4,Object(f.p)(t,n);case 4:0===(a=e.sent).code?Object(p.c)("设置成功"):Object(p.c)(a.msg);case 6:case"end":return e.stop()}},_callee,e)})),function handleSendMsg(e,t){return F.apply(this,arguments)}),R=(N=_asyncToGenerator(o.a.mark(function _callee2(){var t,r,n,a,c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return c&&(j.page=1,P(j),g([])),e.next=3,Object(f.u)(j);case 3:t=e.sent,r=t.user_stores.edges||[],n=parseInt(t.user_stores.totalCount)||0,j.page*j.rows>=n?S(!1):S(!0),a=[],r&&r.length>0&&r.forEach(function(e){var t=e.node;a.push(t)}),g(c?a:[].concat(_toConsumableArray(_),a));case 10:case"end":return e.stop()}},_callee2,e)})),function loadData(){return N.apply(this,arguments)}),B=c.a.useRef(0);c.a.usePageScroll(function(e){B.current=e.scrollTop;var t=e.scrollTop;m(t>500)});var A,H=(A=_asyncToGenerator(o.a.mark(function _callee3(){return o.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if(0===x){e.next=3;break}return Object(u.v)(x,{"nextUrl":"/userPages/pages/user_index"}),e.abrupt("return");case 3:Object(p.a)(!0),j.uid=M.uid,P(j),R(!0),Object(p.a)(!1);case 8:case"end":return e.stop()}},_callee3,e)})),function onload(){return A.apply(this,arguments)}),G=c.a.useRef(function(){}),$=c.a.useRef(0);c.a.useReachBottom(_asyncToGenerator(o.a.mark(function _callee4(){var t;return o.a.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:if(!e.pageHide){r.next=2;break}return r.abrupt("return");case 2:if(!((t=document.documentElement.scrollTop||document.body.scrollTop)<$.current)){r.next=8;break}return $.current=t,r.abrupt("return");case 8:$.current=t;case 9:G.current()&&q();case 11:case"end":return r.stop()}},_callee4,e)})));var I,q=(I=_asyncToGenerator(o.a.mark(function _callee5(){return o.a.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=5;break}return j.page+=1,P(function(e){return h({},e,j)}),e.next=5,R();case 5:case"end":return e.stop()}},_callee5,e)})),function reachBottom(){return I.apply(this,arguments)});c.a.useDidShow(function(){Object(i.a)({"scrollTop":z.current,"duration":100}),Object(u.L)("我的关注"),e.pageHide=!1,G.current=Object(u.Q)()});var z=c.a.useRef(0);return c.a.useDidHide(function(){z.current=B.current,e.pageHide=!0}),c.a.useEffect(function(){H()},[]),a.l.createElement(l.a,null,a.l.createElement(l.a,{"className":"content content-nav"},a.l.createElement(l.a,{"className":"my-topic"},a.l.createElement(l.a,{"className":"topic-tabs clear"},a.l.createElement(l.a,{"className":"topic-tabs-content left cur"},"活动")),a.l.createElement(l.a,{"className":"topic-sub-tabs clear"}),a.l.createElement(l.a,{"className":"my-topic-box","style":"display:block;"},_.length>0&&a.l.createElement(a.l.Fragment,null,_.map(function(r){return a.l.createElement(a.l.Fragment,{"key":r.id},a.l.createElement(l.a,{"className":"my-topic-content"},a.l.createElement(l.a,{"onClick":function onClick(){return function toDetail(e,t){var r=void 0;"activity"===t?r="/activityPages/pages/activity_detail?id="+e:"cycle_activity"===t&&(r="/activityPages/pages/regular_activity?id="+e),Object(u.B)(r)}(r.business_id,r.type)}},a.l.createElement(l.a,{"className":"my-topic-title seek-help-title-close"},r.business_name),a.l.createElement(l.a,{"className":"my-topic-remark seek-help-close"},"活动类型：",t[r.type]||""),a.l.createElement(l.a,{"className":"my-topic-remark seek-help-close"},"关注时间：",r.op_date||"")),a.l.createElement(l.a,{"className":"my-topic-info clear"},a.l.createElement(l.a,{"className":"my-topic-info-txt"},"接收通知"),a.l.createElement(l.a,{"className":"my-topic-info-right right"},a.l.createElement(s.a,{"checked":r.is_need_send,"color":"#2185F4","style":"zoom: 0.7;","onChange":D.bind(e,r.id)})))))})),0===_.length&&a.l.createElement(l.a,{"className":"i-class i-load-more i-load-more-line"},a.l.createElement(l.a,{"className":"i-load-more-tip"},a.l.createElement(l.a,null,"暂无数据")))))),b&&a.l.createElement(y.a,null))}},{"key":"componentDidMount","value":function componentDidMount(){m(MyFollow.prototype.__proto__||Object.getPrototypeOf(MyFollow.prototype),"componentDidMount",this)&&m(MyFollow.prototype.__proto__||Object.getPrototypeOf(MyFollow.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){m(MyFollow.prototype.__proto__||Object.getPrototypeOf(MyFollow.prototype),"componentDidShow",this)&&m(MyFollow.prototype.__proto__||Object.getPrototypeOf(MyFollow.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){m(MyFollow.prototype.__proto__||Object.getPrototypeOf(MyFollow.prototype),"componentDidHide",this)&&m(MyFollow.prototype.__proto__||Object.getPrototypeOf(MyFollow.prototype),"componentDidHide",this).call(this)}}]),MyFollow}();v.config={}}}]);