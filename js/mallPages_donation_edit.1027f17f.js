(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"276":function(e,t,n){"use strict";n.d(t,"v",function(){return a}),n.d(t,"o",function(){return i}),n.d(t,"p",function(){return u}),n.d(t,"y",function(){return c}),n.d(t,"u",function(){return l}),n.d(t,"n",function(){return s}),n.d(t,"w",function(){return p}),n.d(t,"x",function(){return f}),n.d(t,"t",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"r",function(){return h}),n.d(t,"s",function(){return E}),n.d(t,"j",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"l",function(){return g}),n.d(t,"z",function(){return y}),n.d(t,"k",function(){return _}),n.d(t,"b",function(){return O}),n.d(t,"a",function(){return N}),n.d(t,"i",function(){return w}),n.d(t,"q",function(){return C}),n.d(t,"m",function(){return D}),n.d(t,"d",function(){return j}),n.d(t,"c",function(){return x}),n.d(t,"h",function(){return S}),n.d(t,"g",function(){return P});var r=n(3),o=n(5),a=function loadRedeems(e){return r.a.httpGql(o.sb,e)},i=function handelRedeem(e,t){return r.a.put("redeem/"+e,t)},u=function handleCouponYHQ(e,t){return r.a.put("redeem/use_yhq/"+e,t)},c=function postDonation(e){return r.a.post("donation",e)},l=function loadRedeemDetail(e){return r.a.httpGql(o.rb,e)},s=function goodsExchange(e,t){return r.a.put("redeem/exchange/"+e+"/"+t)},p=function loadSponsorDetail(e){return r.a.httpGql(o.Lb,e,!0)},f=function loadSponsorDonationList(e){return r.a.httpGql(o.Mb,e,!0)},d=function loadOrgHasScore(e){return r.a.httpGql(o.ob,e)},m=function getCouponYHQFromOfficial(e){return r.a.put("temp_user_redeem/coupon_yhq/"+e.id,e)},h=function loadCouponsOfOfficial(e){return r.a.httpGql(o.H,e,!0)},v=function getCourses(e){return r.a.httpGql(o.N,e,!0)},b=function getCourseDetail(e){return r.a.httpGql(o.J,e,!0)},y=function recordViewNum(e){return r.a.post("course/recordView/"+e,{})},g=function getSeekHelps(e){return r.a.httpGql(o.Db,e)},_=function getMyCourses(e){return r.a.httpGql(o.jb,e)},E=function loadExperts(e){return r.a.httpGql(o.V,e,!0)},O=function addDDGroup(e){return r.a.post("chat-group",e)},C=function joinDDGroup(e,t){return r.a.put("chat-group/"+t,e)},N=function addCourseUsers(e,t){return r.a.post("course/addCourseUsers/"+t,e)},w=function getCourseUser(e){return r.a.httpGql(o.M,e)},D=function getVideoPlayAuth(e){return r.a.get("course/playAuth",e)},j=function courseEvaluate(e){return r.a.post("eval",e)},x=function courseEvalLikeOrDislike(e){return r.a.put("eval/isLike/"+e.id,e)},S=function getCourseEvals(e){return r.a.httpGql(o.L,e,!0)},P=function getCourseEvalById(e){return r.a.httpGql(o.K,e)}},"293":function(e,t,n){"use strict";n(257);var r=n(2),o=n(258),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var u=function(e){function Textarea(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Textarea);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Textarea.__proto__||Object.getPrototypeOf(Textarea)).apply(this,arguments));return e.onChange=e.onChange.bind(e),e.onFocus=e.onFocus.bind(e),e.onBlur=e.onBlur.bind(e),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Textarea,r["l"].Component),i(Textarea,[{"key":"onChange","value":function onChange(e){var t=this.props,n=t.onChange,onChange=void 0===n?"":n,r=t.onInput,o=void 0===r?"":r;return Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onChange?onChange&&onChange(e):o?o&&o(e):void 0}},{"key":"onFocus","value":function onFocus(e){var onFocus=this.props.onFocus;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onFocus&&onFocus(e)}},{"key":"onBlur","value":function onBlur(e){var onBlur=this.props.onBlur;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onBlur&&onBlur(e)}},{"key":"render","value":function render(){var e=this.props,t=e.className,n=void 0===t?"":t,i=e.placeholder,u=void 0===i?"":i,c=e.disabled,l=e.maxlength,s=void 0===l?140:l,p=e.autoFocus,f=void 0!==p&&p;return r.l.createElement("textarea",a({},Object(o.a)(this.props,["className","placeholder","disabled","maxlength","onChange","onInput","onFocus","onBlur","autofocus"]),{"className":n,"placeholder":u,"disabled":c,"maxlength":s,"autofocus":f,"onChange":this.onChange,"onFocus":this.onFocus,"onBlur":this.onBlur}))}}]),Textarea}();t.a=u},"300":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(2),o=n(6),a=n(271),i=n.n(a),u=n(596),c=n(259),l=n.n(c),s=n(272),p=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var f=function(e){function AtMessage(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtMessage);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtMessage.__proto__||Object.getPrototypeOf(AtMessage)).apply(this,arguments));return e.state={"_isOpened":!1,"_message":"","_type":"info","_duration":3e3},e._timer=null,e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtMessage,s["a"]),p(AtMessage,[{"key":"bindMessageListener","value":function bindMessageListener(){var e=this;o.a.eventCenter.on("atMessage",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={"_isOpened":!0,"_message":t.message,"_type":t.type,"_duration":t.duration||e.state._duration};e.setState(n,function(){clearTimeout(e._timer),e._timer=setTimeout(function(){e.setState({"_isOpened":!1})},e.state._duration)})}),o.a.atMessage=o.a.eventCenter.trigger.bind(o.a.eventCenter,"atMessage")}},{"key":"componentDidShow","value":function componentDidShow(){this.bindMessageListener()}},{"key":"componentDidMount","value":function componentDidMount(){this.bindMessageListener()}},{"key":"componentDidHide","value":function componentDidHide(){o.a.eventCenter.off("atMessage")}},{"key":"componentWillUnmount","value":function componentWillUnmount(){o.a.eventCenter.off("atMessage")}},{"key":"render","value":function render(){var e=this.props,t=e.className,n=e.customStyle,o=this.state,a=o._message,i=o._isOpened,c=o._type,s=l()({"at-message":!0,"at-message--show":i,"at-message--hidden":!i},"at-message--"+c,t);return r.l.createElement(u.a,{"className":s,"style":n},a)}}]),AtMessage}();f.defaultProps={"customStyle":"","className":""},f.propTypes={"customStyle":i.a.oneOfType([i.a.object,i.a.string]),"className":i.a.oneOfType([i.a.array,i.a.string])}},"352":function(e,t,n){},"607":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});var r=n(4),o=n.n(r),a=n(2),i=n(6),u=n(596),c=n(282),l=n(293),s=n(275),p=n(300),f=n(29),d=n(14),m=n(270),h=n(276),v=n(31),b=(n(352),n(287)),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),E=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function DonationEdit(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DonationEdit);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=DonationEdit.__proto__||Object.getPrototypeOf(DonationEdit)).call.apply(e,[this].concat(o))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DonationEdit,i["a"].Component),_(DonationEdit,[{"key":"render","value":function render(){var e=this,t=Object(d.u)(),n=0;Object(d.z)(0).then(function(e){n=e});var r,_=i.a.useState({}),E=g(_,2),O=E[0],C=E[1],N=i.a.useState(!1),w=g(N,2),D=w[0],j=w[1],x=i.a.useState({"id":"","name":"珠海"}),S=g(x,2),P=S[0],k=S[1],M=i.a.useState([]),T=g(M,2),G=T[0],q=T[1],A=i.a.useState({}),B=g(A,2),F=B[0],R=B[1],I=i.a.useState("PERSON"),L=g(I,2),H=L[0],U=L[1],V=i.a.useState(""),$=g(V,2),J=$[0],z=$[1],Q=i.a.useState("个人"),W=g(Q,2),Y=W[0],K=W[1],X=/^(((12[0-9]{1})|(13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/,Z=/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/,ee=0,te=function toggleType(e){U(e),K("PERSON"===e?"个人":"企业");var n="PERSON"===e?t.username:"";z(n),F.type=n?"":"error-txt",R(F)},ne=function formDataChange(e,t){var n=t.detail.value||"";"type"===e&&z(n),O[e]=n||"",F[e]=n?"":"error-txt",C(O),R(function(e){return y({},e,F)})},re=function closeCascader(e){!function cascaderChange(e){var t=e.valueList,n=t.length;if(n>0){var r=t[n-1].value.split("=");if(Array.isArray(r)&&r.length>0){var o=r[0],a=r[1];P.id=o,P.name=a,O.org_id=o,F.org_id=o?"":"error-txt",C(O),k(P),R(F)}}}(e),j(!1)},oe=function validateForm(e){var t=[],n=!0;if(e.org_id||(n=!1,F.org_id="error-txt",t.push("赞助机构不能为空")),!J){n=!1,F.type="error-txt";var r="BUSINESS"===H?"请输入正确的企业名称":"请输入正确的个人名称";t.push(r)}X.test(e.mobile)||Z.test(e.mobile)||(n=!1,F.mobile="error-txt",t.push("请输入正确的联系电话")),e.intention||(n=!1,F.intention="error-txt",t.push("赞助意向不能为空"));var o=t.length>0?t[0]:"";return n||(R(function(e){return y({},e,F)}),i.a.atMessage({"message":o,"type":"error"})),n},ae=(r=_asyncToGenerator(o.a.mark(function _callee(){var n,r;return o.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"BUSINESS"===H?n.company=J:n.contact=J,n.type=H,n.uid=t.uid||"",Object.assign(n,O),!oe(n)){e.next=18;break}return e.next=9,Object(h.y)(n);case 9:if(0!==(r=e.sent).code){e.next=17;break}return e.next=13,Object(f.c)("提交成功");case 13:return e.next=15,i.a.navigateBack({"delta":1});case 15:e.next=18;break;case 17:Object(f.c)(r.data);case 18:case"end":return e.stop()}},_callee,e)})),function formSubmit(){return r.apply(this,arguments)});i.a.useDidShow(function(){Object(d.L)("我要赞助")});var ie,ue=(ie=_asyncToGenerator(o.a.mark(function _callee2(){var r,a,i;return o.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(0===n){e.next=3;break}return Object(d.v)(n,{"nextUrl":"/mallPages/pages/donation-edit"}),e.abrupt("return");case 3:return Object(f.a)(!0),e.next=6,Object(d.l)();case 6:r=e.sent,q(Object(m.e)(r)),a=t.uid||"",i=t.org_id||"",z(t.username),O.org_id=i,O.mobile=t.mobile,O.uid=a,P.id=i,P.name=t.org_name,C(O),k(P),ee=(new Date).valueOf(),Object(d.F)(v.default.ENTER_LOVE_DONATION),Object(f.a)(!1);case 21:case"end":return e.stop()}},_callee2,e)})),function onload(){return ie.apply(this,arguments)});return i.a.useEffect(function(){return ue(),function cleanup(){var e=((new Date).valueOf()-ee)/1e3;Object(d.F)(v.default.LEAVE_LOVE_DONATION,{"stay_time":e})}},[]),a.l.createElement(u.a,null,a.l.createElement(p.a,null),a.l.createElement(u.a,{"className":"content content-nav"},a.l.createElement(u.a,{"className":"box"},a.l.createElement(u.a,{"className":"nav-list"},a.l.createElement(u.a,{"className":"nav-list-box"},a.l.createElement(u.a,{"className":"nav-list-content clear"},a.l.createElement(u.a,{"className":"nav-list-title left "+F.org_id},"我要赞助给"),a.l.createElement(u.a,{"className":"nav-list-main right chooseCommunity","onClick":function onClick(){return function openCascader(){j(!0)}()}},P.name||"请选择机构"),a.l.createElement(b.a,{"isOpened":D,"dataSource":G,"label":"label","onClose":function onClose(e){return re(e)}}))))),a.l.createElement(u.a,{"className":"box"},a.l.createElement(u.a,{"className":"nav-list"},a.l.createElement(u.a,{"className":"select-id-type clear"},a.l.createElement(u.a,{"onClick":function onClick(){return te("BUSINESS")},"className":"select-id-content left "+("BUSINESS"===H?"cur":"")},a.l.createElement(u.a,{"className":"select-id-main"},"我是企业")),a.l.createElement(u.a,{"onClick":function onClick(){return te("PERSON")},"className":"select-id-content left "+("PERSON"===H?"cur":"")},a.l.createElement(u.a,{"className":"select-id-main"},"我是个人"))),a.l.createElement(u.a,{"className":"nav-list-box"},a.l.createElement(u.a,{"className":"nav-list-input clear"},a.l.createElement(u.a,{"className":"nav-list-title left "+F.type},Y),a.l.createElement(u.a,{"className":"nav-list-main right"},a.l.createElement(c.a,{"onInput":ne.bind(this,"type"),"type":"text","className":"input-txt","placeholder":"请填写"+Y+"名称","value":J})))),a.l.createElement(u.a,{"className":"nav-list-box"},a.l.createElement(u.a,{"className":"nav-list-input clear"},a.l.createElement(u.a,{"className":"nav-list-title left "+F.mobile},"联系电话"),a.l.createElement(u.a,{"className":"nav-list-main right"},a.l.createElement(c.a,{"onInput":ne.bind(this,"mobile"),"name":"mobile","type":"text","className":"input-txt","placeholder":"请填写联系电话","value":O.mobile})))))),!D&&a.l.createElement(u.a,{"className":"box"},a.l.createElement(u.a,{"className":"nav-list"},a.l.createElement(u.a,{"className":"nav-list-box"},a.l.createElement(u.a,{"className":"nav-list-input clear"},a.l.createElement(u.a,{"className":"nav-list-title left "+F.intention},"赞助意向"))),a.l.createElement(u.a,{"className":"nav-list-box"},a.l.createElement(u.a,{"className":"nav-list-input clear"},a.l.createElement(u.a,{"style":"width:100%;","className":"nav-list-main"},a.l.createElement(l.a,{"style":"text-align: left;","name":"intention","onInput":ne.bind(this,"intention"),"value":O.intention,"maxlength":500,"className":"input-textarea","placeholder":"请填写内容、期望"})))))),a.l.createElement(u.a,{"className":"foot-nav"},a.l.createElement(u.a,{"className":"team-bottom-btn clear"},a.l.createElement(s.a,{"className":"join-team-btn","style":"-webkit-appearance: none;border-radius: 0;border:0;","onClick":function onClick(){return ae()}},"提交")))))}},{"key":"componentDidMount","value":function componentDidMount(){E(DonationEdit.prototype.__proto__||Object.getPrototypeOf(DonationEdit.prototype),"componentDidMount",this)&&E(DonationEdit.prototype.__proto__||Object.getPrototypeOf(DonationEdit.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){E(DonationEdit.prototype.__proto__||Object.getPrototypeOf(DonationEdit.prototype),"componentDidShow",this)&&E(DonationEdit.prototype.__proto__||Object.getPrototypeOf(DonationEdit.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){E(DonationEdit.prototype.__proto__||Object.getPrototypeOf(DonationEdit.prototype),"componentDidHide",this)&&E(DonationEdit.prototype.__proto__||Object.getPrototypeOf(DonationEdit.prototype),"componentDidHide",this).call(this)}}]),DonationEdit}();O.config={}}}]);