(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"276":function(e,t,n){"use strict";n.d(t,"v",function(){return a}),n.d(t,"o",function(){return c}),n.d(t,"p",function(){return u}),n.d(t,"y",function(){return i}),n.d(t,"u",function(){return s}),n.d(t,"n",function(){return l}),n.d(t,"w",function(){return p}),n.d(t,"x",function(){return f}),n.d(t,"t",function(){return d}),n.d(t,"e",function(){return h}),n.d(t,"r",function(){return m}),n.d(t,"s",function(){return E}),n.d(t,"j",function(){return g}),n.d(t,"f",function(){return b}),n.d(t,"l",function(){return _}),n.d(t,"z",function(){return y}),n.d(t,"k",function(){return x}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return O}),n.d(t,"i",function(){return k}),n.d(t,"q",function(){return w}),n.d(t,"m",function(){return j}),n.d(t,"d",function(){return D}),n.d(t,"c",function(){return H}),n.d(t,"h",function(){return C}),n.d(t,"g",function(){return P});var r=n(3),o=n(5),a=function loadRedeems(e){return r.a.httpGql(o.sb,e)},c=function handelRedeem(e,t){return r.a.put("redeem/"+e,t)},u=function handleCouponYHQ(e,t){return r.a.put("redeem/use_yhq/"+e,t)},i=function postDonation(e){return r.a.post("donation",e)},s=function loadRedeemDetail(e){return r.a.httpGql(o.rb,e)},l=function goodsExchange(e,t){return r.a.put("redeem/exchange/"+e+"/"+t)},p=function loadSponsorDetail(e){return r.a.httpGql(o.Lb,e,!0)},f=function loadSponsorDonationList(e){return r.a.httpGql(o.Mb,e,!0)},d=function loadOrgHasScore(e){return r.a.httpGql(o.ob,e)},h=function getCouponYHQFromOfficial(e){return r.a.put("temp_user_redeem/coupon_yhq/"+e.id,e)},m=function loadCouponsOfOfficial(e){return r.a.httpGql(o.H,e,!0)},g=function getCourses(e){return r.a.httpGql(o.N,e,!0)},b=function getCourseDetail(e){return r.a.httpGql(o.J,e,!0)},y=function recordViewNum(e){return r.a.post("course/recordView/"+e,{})},_=function getSeekHelps(e){return r.a.httpGql(o.Db,e)},x=function getMyCourses(e){return r.a.httpGql(o.jb,e)},E=function loadExperts(e){return r.a.httpGql(o.V,e,!0)},v=function addDDGroup(e){return r.a.post("chat-group",e)},w=function joinDDGroup(e,t){return r.a.put("chat-group/"+t,e)},O=function addCourseUsers(e,t){return r.a.post("course/addCourseUsers/"+t,e)},k=function getCourseUser(e){return r.a.httpGql(o.M,e)},j=function getVideoPlayAuth(e){return r.a.get("course/playAuth",e)},D=function courseEvaluate(e){return r.a.post("eval",e)},H=function courseEvalLikeOrDislike(e){return r.a.put("eval/isLike/"+e.id,e)},C=function getCourseEvals(e){return r.a.httpGql(o.L,e,!0)},P=function getCourseEvalById(e){return r.a.httpGql(o.K,e)}},"608":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(4),o=n.n(r),a=n(2),c=n(6),u=n(596),i=n(597),s=n(29),l=n(276),p=n(14),f=n(30),d=n(18),h=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),g=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function HelpExchange(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HelpExchange);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=HelpExchange.__proto__||Object.getPrototypeOf(HelpExchange)).call.apply(e,[this].concat(o))),n.config={},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(HelpExchange,c["a"].Component),m(HelpExchange,[{"key":"render","value":function render(){var e,t,n,r,m,g=this,b=c.a.useRouter().params,y=Object(p.u)(),_=c.a.useState({}),x=h(_,2),E=x[0],v=x[1],w=c.a.useState(1),O=h(w,2),k=O[0],j=O[1],D=c.a.useRef(""),H=c.a.useState([]),C=h(H,2),P=C[0],N=C[1],G=c.a.useState({"uid":"","role_id":["TLEADER","PLEADER"],"org_id":"","status":["RECRUITING","RECRUITED","AUDITED"]}),q=h(G,2),S=q[0],T=(q[1],c.a.useState({})),R=h(T,2),I=R[0],L=R[1],U=c.a.useState(""),A=h(U,2),M=(A[0],A[1]),Q=!1,F=(e=_asyncToGenerator(o.a.mark(function _callee(e){var t,n;return o.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(f.a)(e);case 2:return t=r.sent,n=t&&t.aTeams?t.aTeams:[],r.abrupt("return",n);case 5:case"end":return r.stop()}},_callee,g)})),function loadUserTeam(t){return e.apply(this,arguments)}),$=(t=_asyncToGenerator(o.a.mark(function _callee2(e){return o.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.q)({"uid":e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},_callee2,g)})),function loadUserInfo(e){return t.apply(this,arguments)}),V=(n=_asyncToGenerator(o.a.mark(function _callee3(e){var t,n,r,a,c,u,i,s,f,d;return o.a.wrap(function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(l.u)({"id":e});case 2:if(t=o.sent,"DHQ"===(n=t&&t.redeem?t.redeem:{}).type?(M("商品兑换"),(n.goods.goodsPic||[]).length>0&&(r=n&&n.goods.goodsPic&&n.goods.goodsPic[0].url?n.goods.goodsPic[0].url:"",n.picture=Object(p.w)(r))):(M("优惠券使用"),(n.coupon_yhq.goodsPic||[]).length>0&&(a=n&&n.coupon_yhq.goodsPic&&n.coupon_yhq.goodsPic[0].url?n.coupon_yhq.goodsPic[0].url:"",n.picture=Object(p.w)(a))),c=n.org_id||"",S.org_id=c,u="",!y){o.next=12;break}u=y.uid||"",o.next=16;break;case 12:return o.next=14,Object(p.r)();case 14:i=o.sent,u=i.uid||"";case 16:return S.uid=u,o.next=19,F(S);case 19:if(!((s=o.sent).length>0)){o.next=26;break}return o.next=23,$(D.current);case 23:f=o.sent,d=f&&f.wechat_user?f.wechat_user:{},L(d);case 26:N(s),v(n);case 28:case"end":return o.stop()}},_callee3,g)})),function loadData(e){return n.apply(this,arguments)}),B=(r=_asyncToGenerator(o.a.mark(function _callee4(e){var t,n,r;return o.a.wrap(function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=2;break}return o.abrupt("return");case 2:if(Object(s.a)(!0,"兑换中"),Q){o.next=28;break}if(Q=!0,t=void 0,n=void 0,r={"state":"1","count":k},"DHQ"!==E.type){o.next=14;break}return o.next=11,Object(l.o)(e,r);case 11:n=o.sent,o.next=17;break;case 14:return o.next=16,Object(l.p)(e,r);case 16:n=o.sent;case 17:if(0!==n.code){o.next=26;break}return o.next=20,Object(s.c)("兑换成功");case 20:E.state="1",v(E),t="/mallPages/pages/exchange_success?id="+e,Object(p.B)(t),o.next=27;break;case 26:Object(s.c)(n.data);case 27:Q=!1;case 28:Object(s.a)(!1);case 29:case"end":return o.stop()}},_callee4,g)})),function toUse(e){return r.apply(this,arguments)}),J=(m=_asyncToGenerator(o.a.mark(function _callee5(){var e,t;return o.a.wrap(function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:Object(s.a)(!0),e=b.id||"",t=b.uid||"",D.current=t,j(Number(b.num||0)),V(e),Object(s.a)(!1);case 7:case"end":return n.stop()}},_callee5,g)})),function onload(){return m.apply(this,arguments)});c.a.useDidShow(function(){Object(p.L)("帮助兑换")}),c.a.useEffect(function(){J()},[]);return a.l.createElement(u.a,null,a.l.createElement(u.a,{"className":"body about-body"},a.l.createElement(u.a,{"className":"content content-nav"},a.l.createElement(u.a,{"className":"box"},a.l.createElement(u.a,{"className":"gift-info","onClick":function onClick(){return function toDetail(){Object(p.B)("/mallPages/pages/redeem_detail?id="+E.id+"&type=use&uid="+D.current)}()}},a.l.createElement(i.a,{"style":"width:112.5px;height:112.5px;","src":E.picture,"className":"img"}),a.l.createElement(u.a,{"className":"gift-title"},E.goods_name||""),a.l.createElement(u.a,{"className":"gift-integral"},a.l.createElement(u.a,{"className":"gift-integral-main"},E.point||""),a.l.createElement(u.a,{"className":"gift-integral-txt"},"DHQ"===E.type?"积分":"ZKQ"===E.type?"折":"元")))),!!P&&P.length>0&&a.l.createElement(u.a,{"className":"gift-use"},a.l.createElement(u.a,{"className":"gift-user clear"},a.l.createElement(u.a,{"className":"gift-user-title left"},"兑换人"),a.l.createElement(u.a,{"style":"overflow: hidden;word-break: keep-all;text-overflow: ellipsis;white-space: nowrap;","className":"gift-user-main left"},I.username||I.nickname||"佚名")),a.l.createElement(u.a,{"className":"gift-user clear"},a.l.createElement(u.a,{"className":"gift-user-title left"},"手机号"),a.l.createElement(u.a,{"className":"gift-user-main left"},I.mobile||"无")),"0"===E.state&&a.l.createElement(u.a,{"style":"display: flex;"},a.l.createElement(u.a,{"className":"submit-sub-btn","style":"width: 45%;margin-right: 5px;","onClick":function onClick(){return function toIndex(){c.a.reLaunch({"url":"/pages/index/index"})}()}},"暂不使用"),a.l.createElement(u.a,{"className":"submit-btn","style":"width: 45%;margin-left: 5px;","onClick":function onClick(){return B(E.id)}},"确认使用")),"1"===E.state&&a.l.createElement(u.a,{"style":"background:#CFCFCF;","className":"submit-btn"},"已使用"),"0"!==E.state&&"1"!==E.state&&a.l.createElement(u.a,{"className":"submit-btn"},{"2":"已过期","3":"已退货","4":"退货中","6":"锁定中"}[E.state])))))}},{"key":"componentDidMount","value":function componentDidMount(){g(HelpExchange.prototype.__proto__||Object.getPrototypeOf(HelpExchange.prototype),"componentDidMount",this)&&g(HelpExchange.prototype.__proto__||Object.getPrototypeOf(HelpExchange.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){g(HelpExchange.prototype.__proto__||Object.getPrototypeOf(HelpExchange.prototype),"componentDidShow",this)&&g(HelpExchange.prototype.__proto__||Object.getPrototypeOf(HelpExchange.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){g(HelpExchange.prototype.__proto__||Object.getPrototypeOf(HelpExchange.prototype),"componentDidHide",this)&&g(HelpExchange.prototype.__proto__||Object.getPrototypeOf(HelpExchange.prototype),"componentDidHide",this).call(this)}}]),HelpExchange}();b.config={}}}]);