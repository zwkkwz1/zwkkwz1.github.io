(self.webpackChunkgod_ticket_land=self.webpackChunkgod_ticket_land||[]).push([[179],{225:()=>{const t={finger:{cb:null}},e=document.body.offsetWidth,n=document.body.offsetHeight;let o=!1,a=!1,s=null,i=null,l=null,c=null,r={radarBegin:!1,radar:!1,posImg:!1,rollingOverBtnImg:!1};const d=[{left:"0.46rem",top:"23%"},{left:"0.1rem",top:"46%"},{left:"0.68rem",top:"49%"},{left:"0.4rem",top:"65%"},{left:"0.60rem",top:"80%"}],u=[{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/2649906ba904d95695ec73b171636da2.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/fec457fda7f08adf44f4a5ebfb8dfebf.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/d569c5c85da9c7692dece1fcae8c71f6.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/403f23050ad9644b2b461f3761e09f19.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/cd5bb0d10698efabfde201c26c0a2c13.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/00c04271231a7b8edd12ca5e81aff335.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/9525d58e5557b381549e4e7666dbc381.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/173aba60dd7cec704efc3f688a50865f.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/e58a6ac11a8fa7fcc64cd99a2747ae56.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/b056e7e4edba10b693f1620d54ad77c9.png"}],f=[{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://market.m.taobao.com/app/miniapp-biz/qrcode/index.html?_ariver_appid=3000000028379505&nbsv=0.1.2109231403.28&_mp_code=tb&query=clearStorage%3D1%26merchantNum%3D1900110%26platform%3D1%26type%3D0&nbsource=debug&nbsn=DEBUG&transition=present"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.baidu.com"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/v/dance/?spm_id_from=666.4.b_7072696d6172794368616e6e656c4d656e75.17"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/anime/?spm_id_from=666.5.b_7072696d6172794368616e6e656c4d656e75.8"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/"}];let m={},g=[],p={};function y(t){return!t.some((function(t){const e=t.index;return!f[e].backInDom||!f[e].frontageInDom}))}function b(){"function"==typeof t.finger.cb&&t.finger.cb()}function h(t,e,n){const o=e.frontage,a=e.back;o.style.transform="rotateY(90deg)",a.style.transform="rotateY(90deg)",function(t){g.push({pos:m,urls:t,isReceive:!1}),localStorage.setItem("cardCatch",JSON.stringify(g))}(n),setTimeout((()=>{const e=document.getElementById("btnGroup");0===e.children.length&&B(),e.style.top=t+"px",e.style.display="flex",o.style.zIndex=1200,a.style.display="none",o.style.transform="rotateY(0deg)",a.style.transform="rotateY(0deg)"}),1e3)}function I(t,e){p=t,m=e,t.frontage.style.transitionProperty="none",p.frontage.classList.remove("zm-small-jump"),t.frontage.classList.remove("zm-small"),i.style.display="none",t.frontage.classList.add("img-big"),t.frontage.style.width="0.66rem",t.frontage.style.zIndex=1100;const o=document.getElementById("btnGroup");setTimeout((function(){o.style.top=.5*n+.5*t.frontage.height+12+"px"}),100),0===o.children.length&&B(),o.style.display="flex",window.requestAnimationFrame((function(){t.frontage.style.transitionProperty="all"}))}let k=!1;function D(){if(k)return;k=!0;let t=document.getElementById("promptText");t.style.display="inherit",t.style.opacity=1,setTimeout((function(){t.style.opacity=0,setTimeout((function(){t.style.display="none",t=null}),1e3)}),1e3)}function w(){p.frontage.classList.remove("zm-big"),p.frontage.classList.add("zm-small");let t=p,e=m;p.frontage.classList.contains("img-big")&&p.frontage.classList.remove("img-big"),setTimeout((function(){t.frontage.classList.add("zm-small-jump")}),1e3),p.frontage.style.width="0.1rem",p.frontage.style.left=m.left,p.frontage.style.top=m.top,p.frontage.style.zIndex=100,p.frontage.onclick=function(){I(t,e)},m={},p={},v()}function B(){const t=L("./asset/obtain_card.png"),e=L("./asset/summon_again.png");t.style.width="0.3rem",e.style.width="0.3rem";const n=document.getElementById("btnGroup");n.appendChild(t),n.appendChild(e),t.onclick=function(){window.open(p.url),n.style.display="none",w()},e.onclick=function(){w(),n.style.display="none"}}function E(){return!f.some((t=>!t.backInDom||!t.frontageInDom))}function T(){i.style.display="none";const e=document.getElementById("radarBox");e.style.display="inherit",e.style.background="rgb(0 0 0 / 40%)","function"==typeof t.finger.cb&&t.finger.cb(),r.radar||(r.radar=!0,e.appendChild(s)),setTimeout((function(){function o(){e.style.display="none",function(){if(0===d.length)return;m=d.splice(0,1)[0],r.posImg?l.style.display="inherit":(r.posImg=!0,l.onclick=function(){b(),function(){if(l.style.display="none",0===f.length)return;const t=Math.round(Math.random()*(f.length-1));p=f.splice(t,1)[0];let e=u.splice(t,1)[0];p.left=m.left,p.top=m.top,p.backInDom=!0,p.back.style.left=m.left,p.back.style.top=m.top,document.body.appendChild(p.back),setTimeout((()=>{!function(t,e){const o=t.back;o.classList.add("img-big"),c||(c=L("./asset/rollingOver.png",["img-default","rolling-over"])),setTimeout((()=>{let a=.5*n+.5*o.height+12;c.style.top=a+"px",r.rollingOverBtnImg?(c.style.display="inherit",c.onclick=function(){h(a,t,e),c.style.display="none"}):(r.rollingOverBtnImg=!0,document.body.appendChild(c),c.onclick=function(){h(a,t,e),c.style.display="none"}),document.body.appendChild(t.frontage),t.frontageInDom=!0}),1e3)}(p,e)}),100)}()},document.body.appendChild(l),setTimeout((function(){b()}),3e3));let e=document.getElementById("finger");e.style.left=m.left,e.style.top=`calc(${m.top} + 0.1rem)`,e.style.display="inherit",t.finger.cb=function(){e.style.display="none",e=null,t.finger.cb=null},l.style.left=m.left,l.style.top=m.top}()}if(E())o();else var a=setInterval((()=>{E()&&(o(),clearInterval(a))}),1e3)}),2e3)}function v(){0!==f.length?r.radarBegin?i.style.display="inherit":(r.radarBegin=!0,i.onclick=T,document.body.appendChild(i)):D()}function x(){a&&o&&u.forEach((function(t,e){S(t.back,["img-pos","bm","img-default"]).then((function(t){f[e].backInDom=!0,f[e].back=t})),S(t.frontage,["img-pos","zm-big","img-default"]).then((function(t){f[e].frontageInDom=!0,f[e].frontage=t}))}))}function _(o,a=1,s=!1){const i=document.getElementById("eyes");if(!i)return alert("eyes dom不存在！"),window.requestAnimationFrame((function(){z()})),!1;const l=n/2-o/2*e,c=document.getElementById("bgBottom"),r=document.getElementById("bgTop");return i.style.transitionDuration=c.style.transitionDuration=r.style.transitionDuration=a+"s",i.style.height=o+"rem",c.style.height=r.style.height=l+"px",s&&setTimeout((function(){!function(){const e=document.getElementById("eyes"),o=document.getElementById("bgBottom"),a=document.getElementById("bgTop");e.style.transitionDuration=o.style.transitionDuration=a.style.transitionDuration="1s",e.style.height=n+"px",e.style.opacity=0,a.style.height=o.style.height=0,setTimeout((function(){e.style.display="none",a.style.display=o.style.display="none"}),2e3),setTimeout((()=>{document.getElementById("finger").style.display="inherit",t.finger.cb=function(){document.getElementById("finger").style.display="none",t.finger.cb=null},v()}),200)}()}),a+200),!0}let C=0;function z(){let t=_(0),e=!1,n=!1;function o(){(function(){const t=(new Date).getTime();return t-C<800?(C=0,!0):(C=t,!1)})()&&(e=!0,n=!0,_(.5,.6,e))}if(document.body.addEventListener("click",o),t){setTimeout((function(){_(.3)}),20);let t=0;!function e(){setTimeout((function(){t++;let a=.05,l=!1;1&t?a=.05:2===t?(a=.4,s&&i&&(l=!0)):t>=4&&(a=.5,s&&i&&(l=!0)),n||_(a,.6+.2*t,l),l?document.body.removeEventListener("click",o):e()}),800+200*t)}()}}function L(t,e){let n=document.createElement("img");return n.src=t,e&&e.length>0&&e.forEach((t=>{n.classList.add(t)})),n}function S(t,e){return new Promise((function(n,o){let a=document.createElement("img");a.src=t,e&&e.length>0&&e.forEach((t=>{a.classList.add(t)})),a.onload=function(t){console.log(t),n(a),a.onload=null}}))}window.onload=function(){z(),S("http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/26051fc563ba0c5a6b0999732b5caa13.png",["bg-map"]).then((function(t){document.body.appendChild(t),setTimeout((function(){document.getElementById("wl").style.opacity=0}),1e3),function(){console.log("互动营销_资生堂_菲婷丝朋友圈神券大陆");let t=localStorage.getItem("cardCatch"),e=localStorage.getItem("ticketId");t?g=JSON.parse(t):(localStorage.setItem("cardCatch",[]),g=[]),function(){const t=[];function e(){o=!0;let e=0,n=0;for(;e<t.length;){const o=t[e].index;u.splice(o-n,1),f.splice(o-n,1),d.splice(0,1),n++,e++}0===f.length&&D(),x()}g.forEach((function(e){u.some((function(n,o){if(n.back===e.urls.back&&n.frontage===e.urls.frontage)return t.push({index:o,pos:e.pos}),!0}))})),0===t.length?e():t.forEach((function(n){const o=n.index,a=u[n.index];S(a.back,["img-pos","bm","img-default"]).then((function(n){f[o].backInDom=!0,f[o].back=n,y(t)&&e()})),S(a.frontage,["img-pos","zm-small-jump","img-default","zm-small"]).then((function(a){f[o].frontageInDom=!0,a.style.zIndex=100,a.style.width="0.1rem",a.style.left=n.pos.left,a.style.top=n.pos.top,a.style.transform="rotateY(0deg)",f[o].frontage=a;const s=f[o];document.body.appendChild(f[o].frontage),a.onclick=function(){I(s,n.pos)},y(t)&&e()}))}))}(),e||localStorage.setItem("ticketId",(new Date).getTime())}(),S("http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/7dec83d75d5b260c324582131102a68c.png",["radar"]).then((function(t){s=t,S("./asset/pos.png",["pos","img-default"]).then((function(t){l=t,a=!0,x()}))})),S("./asset/radarBeginImg.png",["radar-begin","img-default"]).then((function(t){i=t}))}))}}},t=>{t(t.s=225)}]);