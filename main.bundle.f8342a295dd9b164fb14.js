(self.webpackChunkgod_ticket_land=self.webpackChunkgod_ticket_land||[]).push([[179],{225:()=>{const e={finger:{hide:null,clickEvent:null},mantle:{clickEvent:null},cardZm:{clickEvent:null}};function t(){"function"==typeof e.finger.hide&&(e.finger.hide(),e.finger.hide=null),e.finger.clickEvent=null}function n(){"function"==typeof e.finger.clickEvent&&e.finger.clickEvent()}function o(){"function"==typeof e.mantle.clickEvent&&e.mantle.clickEvent()}function l(){"function"==typeof e.cardZm.clickEvent&&e.cardZm.clickEvent()}function s(t,n,o){let l=document.getElementById("finger");for(let e in t)l.style[e]=t[e];return l.style.display="inherit","function"==typeof n&&(e.finger.clickEvent=n),o&&(e.finger.hide=function(){l.style.display="none",l=null}),l}const i=document.body.offsetWidth,a=document.body.offsetHeight;let c=!1,r=!1,d=null,u=null,g=null,m=null,f=null,p={radarBegin:!1,radar:!1,posImg:!1,rollingOverBtnImg:!1,ruleImg:!1};const y=[{left:"0.46rem",top:"23%"},{left:"0.1rem",top:"46%"},{left:"0.68rem",top:"49%"},{left:"0.4rem",top:"65%"},{left:"0.60rem",top:"80%"}],h=[{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/2649906ba904d95695ec73b171636da2.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/fec457fda7f08adf44f4a5ebfb8dfebf.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/d569c5c85da9c7692dece1fcae8c71f6.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/403f23050ad9644b2b461f3761e09f19.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/cd5bb0d10698efabfde201c26c0a2c13.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/00c04271231a7b8edd12ca5e81aff335.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/9525d58e5557b381549e4e7666dbc381.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/173aba60dd7cec704efc3f688a50865f.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/e58a6ac11a8fa7fcc64cd99a2747ae56.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/b056e7e4edba10b693f1620d54ad77c9.png"}],b=[{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://market.m.taobao.com/app/miniapp-biz/qrcode/index.html?_ariver_appid=3000000028379505&nbsv=0.1.2109231403.28&_mp_code=tb&query=clearStorage%3D1%26merchantNum%3D1900110%26platform%3D1%26type%3D0&nbsource=debug&nbsn=DEBUG&transition=present"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.baidu.com"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/v/dance/?spm_id_from=666.4.b_7072696d6172794368616e6e656c4d656e75.17"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/anime/?spm_id_from=666.5.b_7072696d6172794368616e6e656c4d656e75.8"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/"}];let k={},I=[],E={};function v(){p.ruleImg?g.style.display="inherit":(p.ruleImg=!0,document.body.appendChild(g));let t=document.getElementById("mantle");t.style.display="inherit",e.mantle.clickEvent=function(){t.style.display="none",g.style.display="none",e.mantle.clickEvent=null,t=null},document.getElementById("finger").style.display="none"}function B(t){document.getElementById("anchor").style.display="inherit",e.cardZm.clickEvent=function(){w(t)}}function w(e){window.open(e)}function D(t,n,o){B(n.url);const l=n.frontage,s=n.back;l.style.transform="rotateY(90deg)",s.style.transform="rotateY(90deg)",function(e){I.push({pos:k,urls:e,isReceive:!1}),localStorage.setItem("cardCatch",JSON.stringify(I))}(o),setTimeout((()=>{const n=document.getElementById("btnGroup");0===n.children.length&&z(),n.style.top=t+"px",n.style.display="flex",l.style.zIndex=1400,s.style.display="none",l.style.transform="rotateY(0deg)",s.style.transform="rotateY(0deg)",e.mantle.clickEvent=function(){let t=document.getElementById("mantle");e.mantle.clickEvent=null,t=null,C()}}),1e3)}function L(n){let o=document.getElementById("mantle");o.style.display="inherit",n&&(e.mantle.clickEvent=function(){e.mantle.clickEvent=null,o=null,C()}),t()}function T(e,t){L(!0),B(e.url),E=e,k=t,e.frontage.style.transitionProperty="none",E.frontage.classList.remove("zm-small-jump"),e.frontage.classList.remove("zm-small"),e.frontage.classList.add("img-big"),e.frontage.style.width="0.66rem",e.frontage.style.zIndex=1100;const n=document.getElementById("btnGroup");setTimeout((function(){n.style.top=.5*a+.5*e.frontage.height+12+"px",n.style.display="flex"}),100),0===n.children.length&&z(),window.requestAnimationFrame((function(){e.frontage.style.transitionProperty="all"}))}let x=!1,_=null;function C(){document.getElementById("mantle").style.display="none",document.getElementById("btnGroup").style.display="none",e.cardZm.clickEvent=null,document.getElementById("anchor").style.display="none",E.frontage.classList.remove("zm-big"),E.frontage.classList.add("zm-small");let t=E,n=k;E.frontage.classList.contains("img-big")&&E.frontage.classList.remove("img-big"),t.frontage.onclick=null,_=setTimeout((function(){t.frontage.classList.add("zm-small-jump"),t.frontage.onclick=function(){T(t,n)}}),1e3),E.frontage.style.width="0.1rem",E.frontage.style.left=k.left,E.frontage.style.top=k.top,E.frontage.style.zIndex=100,k={},E={},j()}function z(){const e=N("./asset/obtain_card.png"),t=N("./asset/summon_again.png");e.style.width="0.36rem",t.style.width="0.36rem";const n=document.getElementById("btnGroup");n.appendChild(e),n.appendChild(t),e.onclick=function(){w(E.url)},t.onclick=function(){C()}}function S(){if(L(!1),0===b.length)return;const e=Math.round(Math.random()*(b.length-1));E=b.splice(e,1)[0];let t=h.splice(e,1)[0];E.left=k.left,E.top=k.top,E.backInDom=!0,E.back.style.left=k.left,E.back.style.top=k.top,document.body.appendChild(E.back),setTimeout((()=>{!function(e,t){const n=e.back;n.classList.add("img-big"),f||(f=N("./asset/rollingOver.png",["img-default","rolling-over"])),setTimeout((()=>{let o=.5*a+.5*n.height+12;f.style.top=o+"px",p.rollingOverBtnImg?(f.style.display="inherit",f.onclick=function(){D(o,e,t),f.style.display="none"}):(p.rollingOverBtnImg=!0,document.body.appendChild(f),f.onclick=function(){D(o,e,t),f.style.display="none"}),document.body.appendChild(e.frontage),e.frontageInDom=!0}),1e3)}(E,t)}),100)}function q(){return!b.some((e=>!e.backInDom||!e.frontageInDom))}function O(){u.style.display="none",t();const e=document.getElementById("radarBox");e.style.display="inherit",e.style.background="rgb(0 0 0 / 40%)",p.radar||(p.radar=!0,e.appendChild(d)),setTimeout((function(){function n(){e.style.display="none",0!==y.length&&(k=y.splice(0,1)[0],document.getElementById("mantle").style.display="inherit",p.posImg||(p.posImg=!0,m.onclick=function(){S(),m.style.display="none"},document.body.appendChild(m),setTimeout((function(){t()}),3e3)),m.style.display="inherit",m.style.zIndex=1301,m.style.left=k.left,m.style.top=k.top,fingerDom=s({left:k.left,top:`calc(${k.top} + 0.1rem)`},S,!0))}if(q())n();else var o=setInterval((()=>{q()&&(n(),clearInterval(o))}),1e3)}),2e3)}function j(){0!==b.length?p.radarBegin?u.style.display="inherit":(s({},O,!0),p.radarBegin=!0,u.onclick=O,document.body.appendChild(u)):function(){if(x)return;x=!0;let e=document.getElementById("promptText");e.style.display="inherit",e.style.opacity=1,setTimeout((function(){e.style.opacity=0,setTimeout((function(){e.style.display="none",e=null}),1e3)}),1e3)}()}function G(){r&&c&&h.forEach((function(e,t){P(e.back,["img-pos","bm","img-default"]).then((function(e){b[t].backInDom=!0,b[t].back=e})),P(e.frontage,["img-pos","zm-big","img-default"]).then((function(e){b[t].frontageInDom=!0,b[t].frontage=e}))}))}function Y(e,t=1,n=!1){const o=document.getElementById("eyes");if(!o)return alert("eyes dom不存在！"),window.requestAnimationFrame((function(){M()})),!1;const l=a/2-e/2*i,s=document.getElementById("bgBottom"),c=document.getElementById("bgTop");return o.style.transitionDuration=s.style.transitionDuration=c.style.transitionDuration=t+"s",o.style.height=e+"rem",s.style.height=c.style.height=l+"px",n&&setTimeout((function(){!function(){const e=document.getElementById("eyes"),t=document.getElementById("bgBottom"),n=document.getElementById("bgTop");e.style.transitionDuration=t.style.transitionDuration=n.style.transitionDuration="1s",e.style.height=a+"px",e.style.opacity=0,n.style.height=t.style.height=0,setTimeout((function(){e.style.display="none",n.style.display=t.style.display="none"}),1e3),setTimeout((()=>{j()}),200)}()}),t+200),!0}let Z=0;function M(){let e=Y(0),t=!1,n=!1;function o(){(function(){const e=(new Date).getTime();return e-Z<800?(Z=0,!0):(Z=e,!1)})()&&(t=!0,n=!0,Y(.5,.6,t))}if(document.body.addEventListener("click",o),e){setTimeout((function(){Y(.5)}),20);let e=0;!function t(){setTimeout((function(){e++;let l=.05,s=!1;1&e?l=.05:2===e?(l=.55,d&&u&&(s=!0)):e>=4&&(l=.6,d&&u&&(s=!0)),n||Y(l,.6+.2*e,s),s?document.body.removeEventListener("click",o):t()}),800+200*e)}()}}function N(e,t){let n=document.createElement("img");return n.src=e,t&&t.length>0&&t.forEach((e=>{n.classList.add(e)})),n}function P(e,t){return new Promise((function(n,o){let l=document.createElement("img");l.src=e,t&&t.length>0&&t.forEach((e=>{l.classList.add(e)})),l.onload=function(e){console.log(e),n(l),l.onload=null}}))}window.onload=function(){M(),P("http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/cf1d8aeaadf697c38730061650ecc053.png",["bg-map"]).then((function(e){document.body.appendChild(e),setTimeout((function(){document.getElementById("wl").style.opacity=0}),1e3),function(){console.log("互动营销_资生堂_菲婷丝朋友圈神券大陆");let e=localStorage.getItem("cardCatch"),t=localStorage.getItem("ticketId");e?I=JSON.parse(e):(localStorage.setItem("cardCatch",[]),I=[]),function(){const e=[];I.forEach((function(t){h.some((function(n,o){if(n.back===t.urls.back&&n.frontage===t.urls.frontage)return e.push({index:o,pos:t.pos}),!0}))}));const t=new WeakMap;function n(){let e=0;for(;e<b.length;)1===t.get(b[e])?(b.splice(e,1),h.splice(e,1),y.splice(0,1)):e++;c=!0,G()}0===e.length?n():e.forEach((function(o){const l=o.index,s=h[o.index];t.set(b[l],1),P(s.frontage,["img-pos","zm-small-jump","img-default","zm-small"]).then((function(t){b[l].frontageInDom=!0,t.style.zIndex=100,t.style.width="0.1rem",t.style.left=o.pos.left,t.style.top=o.pos.top,t.style.transform="rotateY(0deg)",b[l].frontage=t;const s=b[l];console.log(s.frontage),document.body.appendChild(b[l].frontage),t.onclick=function(){T(s,o.pos)},function(e){return!e.some((function(e){const t=e.index;return!b[t].frontageInDom}))}(e)&&n()}))}))}(),t||localStorage.setItem("ticketId",(new Date).getTime()),document.getElementById("anchor").addEventListener("click",l),document.getElementById("finger").addEventListener("click",n),document.getElementById("ruleLogo").addEventListener("click",v),document.getElementById("mantle").addEventListener("click",o)}(),P("http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/7dec83d75d5b260c324582131102a68c.png",["radar"]).then((function(e){d=e,P("./asset/pos.png",["pos","img-default"]).then((function(e){m=e,r=!0,G()}))})),P("./asset/radarBeginImg.png",["radar-begin","img-default"]).then((function(e){u=e})),[{url:"./asset/fino.png",classList:["logo","logo-fino"]},{url:"./asset/sm.png",classList:["logo","logo-sm"]},{url:"./asset/senka.png",classList:["logo","logo-senka"]},{url:"./asset/hand.png",classList:["logo","logo-hand"]},{url:"./asset/tsubaki.png",classList:["logo","logo-tsubaki"]},{url:"./asset/kur.png",classList:["logo","logo-kur"]},{url:"./asset/quir.png",classList:["logo","logo-quir"]},{url:"./asset/cherie.png",classList:["logo","logo-cherie"]},{url:"./asset/js.png",classList:["logo","logo-js"]},{url:"./asset/uno.png",classList:["logo","logo-uno"]}].forEach((function(e){const t=N(e.url,e.classList);document.body.appendChild(t)})),g=N("./asset/rule.png",["img-pos","img-default","img-big"])}))},window.addEventListener("pageshow",(function(e){alert("pageshow")}))}},e=>{e(e.s=225)}]);