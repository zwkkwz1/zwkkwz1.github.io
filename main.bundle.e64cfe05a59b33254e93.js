"use strict";(self.webpackChunkgod_ticket_land=self.webpackChunkgod_ticket_land||[]).push([[179],{225:(e,t,n)=>{var o=n(883),a=n.n(o);const i={finger:{cb:null}},l=document.body.offsetWidth,s=document.body.offsetHeight;let c=!1,r=!1,d=null,m=null,u=null,f=null,g={radarBegin:!1,radar:!1,posImg:!1,rollingOverBtnImg:!1};const p=[{left:"0.46rem",top:"23%"},{left:"0.1rem",top:"46%"},{left:"0.68rem",top:"49%"},{left:"0.4rem",top:"65%"},{left:"0.60rem",top:"80%"}],y=[{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/2649906ba904d95695ec73b171636da2.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/fec457fda7f08adf44f4a5ebfb8dfebf.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/d569c5c85da9c7692dece1fcae8c71f6.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/403f23050ad9644b2b461f3761e09f19.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/cd5bb0d10698efabfde201c26c0a2c13.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/00c04271231a7b8edd12ca5e81aff335.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/9525d58e5557b381549e4e7666dbc381.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/173aba60dd7cec704efc3f688a50865f.png"},{back:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/e58a6ac11a8fa7fcc64cd99a2747ae56.png",frontage:"http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/b056e7e4edba10b693f1620d54ad77c9.png"}],b=[{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://market.m.taobao.com/app/miniapp-biz/qrcode/index.html?_ariver_appid=3000000028379505&nbsv=0.1.2109231403.28&_mp_code=tb&query=clearStorage%3D1%26merchantNum%3D1900110%26platform%3D1%26type%3D0&nbsource=debug&nbsn=DEBUG&transition=present"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.baidu.com"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/v/dance/?spm_id_from=666.4.b_7072696d6172794368616e6e656c4d656e75.17"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/anime/?spm_id_from=666.5.b_7072696d6172794368616e6e656c4d656e75.8"},{back:null,frontage:null,backInDom:!1,frontageInDom:!1,url:"https://www.bilibili.com/"}];let h={},_=[],k={};function I(e){return!e.some((function(e){const t=e.index;return!b[t].backInDom||!b[t].frontageInDom}))}function v(){"function"==typeof i.finger.cb&&i.finger.cb()}function D(e,t,n){a().fed({event_name:"完成的卡牌次数",event_code:"gain_ticket_number_open",event_label:"30",event_trigger_mode:"open",url:"./index"});const o=t.frontage,i=t.back;o.style.transform="rotateY(90deg)",i.style.transform="rotateY(90deg)",function(e){_.push({pos:h,urls:e,isReceive:!1}),localStorage.setItem("cardCatch",JSON.stringify(_))}(n),setTimeout((()=>{const t=document.getElementById("btnGroup");0===t.children.length&&T(),t.style.top=e+"px",t.style.display="flex",o.style.zIndex=1200,i.style.display="none",o.style.transform="rotateY(0deg)",i.style.transform="rotateY(0deg)"}),1e3)}function w(e,t){k=e,h=t,e.frontage.style.transitionProperty="none",k.frontage.classList.remove("zm-small-jump"),e.frontage.classList.remove("zm-small"),m.style.display="none",e.frontage.classList.add("img-big"),e.frontage.style.width="0.66rem",e.frontage.style.zIndex=1100;const n=document.getElementById("btnGroup");setTimeout((function(){n.style.top=.5*s+.5*e.frontage.height+12+"px"}),100),0===n.children.length&&T(),n.style.display="flex",window.requestAnimationFrame((function(){e.frontage.style.transitionProperty="all"}))}let x=!1;function B(){if(x)return;x=!0;let e=document.getElementById("promptText");e.style.display="inherit",e.style.opacity=1,setTimeout((function(){e.style.opacity=0,setTimeout((function(){e.style.display="none",e=null}),1e3)}),1e3)}function E(){k.frontage.classList.remove("zm-big"),k.frontage.classList.add("zm-small");let e=k,t=h;k.frontage.classList.contains("img-big")&&k.frontage.classList.remove("img-big"),setTimeout((function(){e.frontage.classList.add("zm-small-jump")}),1e3),k.frontage.style.width="0.1rem",k.frontage.style.left=h.left,k.frontage.style.top=h.top,k.frontage.style.zIndex=100,k.frontage.onclick=function(){w(e,t)},h={},k={},L()}function T(){const e=j("./asset/obtain_card.png"),t=j("./asset/summon_again.png");e.style.width="0.4rem",t.style.width="0.4rem";const n=document.getElementById("btnGroup");n.appendChild(e),n.appendChild(t),e.onclick=function(){a().fed({event_name:"点击领券次数",event_code:"gain_ticket_member_click",event_label:"30",event_trigger_mode:"click",url:"./index"}),window.open(k.url),n.style.display="none",E()},t.onclick=function(){E(),n.style.display="none"}}function C(){return!b.some((e=>!e.backInDom||!e.frontageInDom))}function z(){m.style.display="none";const e=document.getElementById("radarBox");e.style.display="inherit",e.style.background="rgb(0 0 0 / 40%)","function"==typeof i.finger.cb&&i.finger.cb(),g.radar||(g.radar=!0,e.appendChild(d)),setTimeout((function(){function t(){e.style.display="none",function(){if(0===p.length)return;h=p.splice(0,1)[0],g.posImg?u.style.display="inherit":(g.posImg=!0,u.onclick=function(){v(),function(){if(u.style.display="none",0===b.length)return;const e=Math.round(Math.random()*(b.length-1));k=b.splice(e,1)[0];let t=y.splice(e,1)[0];k.left=h.left,k.top=h.top,k.backInDom=!0,k.back.style.left=h.left,k.back.style.top=h.top,document.body.appendChild(k.back),setTimeout((()=>{!function(e,t){const n=e.back;n.classList.add("img-big"),f||(f=j("./asset/rollingOver.png",["img-default","rolling-over"])),setTimeout((()=>{let o=.5*s+.5*n.height+12;f.style.top=o+"px",g.rollingOverBtnImg?(f.style.display="inherit",f.onclick=function(){D(o,e,t),f.style.display="none"}):(g.rollingOverBtnImg=!0,document.body.appendChild(f),f.onclick=function(){D(o,e,t),f.style.display="none"}),document.body.appendChild(e.frontage),e.frontageInDom=!0}),1e3)}(k,t)}),100)}()},document.body.appendChild(u),setTimeout((function(){v()}),3e3));let e=document.getElementById("finger");e.style.left=h.left,e.style.top=`calc(${h.top} + 0.1rem)`,e.style.display="inherit",i.finger.cb=function(){e.style.display="none",e=null,i.finger.cb=null},u.style.left=h.left,u.style.top=h.top}()}if(C())t();else var n=setInterval((()=>{C()&&(t(),clearInterval(n))}),1e3)}),2e3)}function L(){0!==b.length?g.radarBegin?m.style.display="inherit":(g.radarBegin=!0,m.onclick=z,document.body.appendChild(m)):B()}function O(){r&&c&&y.forEach((function(e,t){G(e.back,["img-pos","bm","img-default"]).then((function(e){b[t].backInDom=!0,b[t].back=e})),G(e.frontage,["img-pos","zm-big","img-default"]).then((function(e){b[t].frontageInDom=!0,b[t].frontage=e}))}))}function S(e,t=1,n=!1){const o=document.getElementById("eyes");if(!o)return alert("eyes dom不存在！"),window.requestAnimationFrame((function(){Y()})),!1;const a=s/2-e/2*l,c=document.getElementById("bgBottom"),r=document.getElementById("bgTop");return o.style.transitionDuration=c.style.transitionDuration=r.style.transitionDuration=t+"s",o.style.height=e+"rem",c.style.height=r.style.height=a+"px",n&&setTimeout((function(){!function(){const e=document.getElementById("eyes"),t=document.getElementById("bgBottom"),n=document.getElementById("bgTop");e.style.transitionDuration=t.style.transitionDuration=n.style.transitionDuration="1s",e.style.height=s+"px",e.style.opacity=0,n.style.height=t.style.height=0,setTimeout((function(){e.style.display="none",n.style.display=t.style.display="none"}),2e3),setTimeout((()=>{document.getElementById("finger").style.display="inherit",i.finger.cb=function(){document.getElementById("finger").style.display="none",i.finger.cb=null},L()}),200)}()}),t+200),!0}let q=0;function Y(){let e=S(0),t=!1,n=!1;function o(){(function(){const e=(new Date).getTime();return e-q<800?(q=0,!0):(q=e,!1)})()&&(t=!0,n=!0,S(.5,.6,t))}if(document.body.addEventListener("click",o),e){setTimeout((function(){S(.3)}),20);let e=0;function t(){setTimeout((function(){e++;let a=.05,i=!1;1&e?a=.05:2===e?(a=.4,d&&m&&(i=!0)):e>=4&&(a=.5,d&&m&&(i=!0)),n||S(a,.6+.2*e,i),i?document.body.removeEventListener("click",o):t()}),800+200*e)}t()}}function j(e,t){let n=document.createElement("img");return n.src=e,t&&t.length>0&&t.forEach((e=>{n.classList.add(e)})),n}function G(e,t){return new Promise((function(n,o){let a=document.createElement("img");a.src=e,t&&t.length>0&&t.forEach((e=>{a.classList.add(e)})),a.onload=function(e){console.log(e),n(a),a.onload=null}}))}window.onload=function(){Y(),G("http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/26051fc563ba0c5a6b0999732b5caa13.png",["bg-map"]).then((function(e){document.body.appendChild(e),setTimeout((function(){document.getElementById("wl").style.opacity=0}),1e3),function(){console.log("互动营销_资生堂_菲婷丝朋友圈神券大陆"),a().setPosition(!1),a().setConfig({is_prod:!1,runtime_env:"pc",merchant_id:"未知",distinct_id:"未知",act_id:"未知",member_id:"未知",platform_app:"互动营销_资生堂_菲婷丝朋友圈神券大陆",platform_app_code:"hdyx_zst_ftspyqsjdl",platform_app_version:"1.0",application_dep_platform:"other",platform_business:"other",application_label:"187,189,62,68,89,191",is_interactive:!0,nick:"未知",mix_nick:"未知",act_name:"未知",open_id:"未知",phone:"未知",ouid:"未知",provider:"未知",open_type:1}),a().fed({event_name:"互动营销平台_访问次数",event_code:"hdyx_pv",event_label:"30",event_trigger_mode:"open",url:"./index"});let e=localStorage.getItem("cardCatch"),t=localStorage.getItem("ticketId");e?_=JSON.parse(e):(localStorage.setItem("cardCatch",[]),_=[]),function(){const e=[];function t(){c=!0;let t=0,n=0;for(;t<e.length;){const o=e[t].index;y.splice(o-n,1),b.splice(o-n,1),p.splice(0,1),n++,t++}0===b.length&&B(),O()}_.forEach((function(t){y.some((function(n,o){if(n.back===t.urls.back&&n.frontage===t.urls.frontage)return e.push({index:o,pos:t.pos}),!0}))})),0===e.length?t():e.forEach((function(n){const o=n.index,a=y[n.index];G(a.back,["img-pos","bm","img-default"]).then((function(n){b[o].backInDom=!0,b[o].back=n,I(e)&&t()})),G(a.frontage,["img-pos","zm-small-jump","img-default","zm-small"]).then((function(a){b[o].frontageInDom=!0,a.style.zIndex=100,a.style.width="0.1rem",a.style.left=n.pos.left,a.style.top=n.pos.top,a.style.transform="rotateY(0deg)",b[o].frontage=a;const i=b[o];document.body.appendChild(b[o].frontage),a.onclick=function(){w(i,n.pos)},I(e)&&t()}))}))}(),t||(localStorage.setItem("ticketId",(new Date).getTime()),a().fed({event_name:"互动营销平台_访问人数",event_code:"hdyx_uv",event_label:"30",event_trigger_mode:"open",url:"./index"}))}(),G("http://enbrands-2.oss-cn-shanghai.aliyuncs.com/user/7dec83d75d5b260c324582131102a68c.png",["radar"]).then((function(e){d=e,G("./asset/pos.png",["pos","img-default"]).then((function(e){u=e,r=!0,O()}))})),G("./asset/radarBeginImg.png",["radar-begin","img-default"]).then((function(e){m=e}))}))}}},e=>{e.O(0,[216],(()=>(225,e(e.s=225)))),e.O()}]);